!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@ngrx/store"),require("rxjs"),require("rxjs/operators"),require("@angular/common/http"),require("@angular/router"),require("@ngrx/effects"),require("@angular/platform-browser"),require("@ngrx/router-store"),require("i18next"),require("i18next-xhr-backend")):"function"==typeof define&&define.amd?define("@spartacus/core",["exports","@angular/core","@angular/common","@ngrx/store","rxjs","rxjs/operators","@angular/common/http","@angular/router","@ngrx/effects","@angular/platform-browser","@ngrx/router-store","i18next","i18next-xhr-backend"],t):t(((e=e||self).spartacus=e.spartacus||{},e.spartacus.core={}),e.ng.core,e.ng.common,e.store,e.rxjs,e.rxjs.operators,e.ng.common.http,e.ng.router,e.effects,e.ng.platformBrowser,e.fromNgrxRouter,e.i18next,e.i18nextXhrBackend)}(this,(function(e,t,r,n,o,i,s,a,c,u,p,d,l){"use strict";d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function h(e,t){function r(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var y=function(){return(y=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function v(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function C(e,t){return function(r,n){t(r,n,e)}}function S(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}function g(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function E(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function I(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(E(arguments[t]));return e}function R(e){return e&&"object"==typeof e&&!Array.isArray(e)}function T(e){var t,r,n;void 0===e&&(e={});for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];if(!o.length)return e;var s=o.shift()||{};if(R(e)&&R(s))for(var a in s)s[a]instanceof Date?Object.assign(e,((t={})[a]=s[a],t)):R(s[a])?(e[a]||Object.assign(e,((r={})[a]={},r)),T(e[a],s[a])):Object.assign(e,((n={})[a]=s[a],n));return T.apply(void 0,I([e],o))}var A=new t.InjectionToken("Configuration"),U=new t.InjectionToken("ConfigurationChunk"),P=new t.InjectionToken("DefaultConfigurationChunk");function L(e,t){return void 0===e&&(e={}),void 0===t&&(t=!1),{provide:t?P:U,useValue:e,multi:!0}}function _(e,t,r){return void 0===r&&(r=!1),{provide:r?P:U,useFactory:e,multi:!0,deps:t}}function O(e){return void 0===e&&(e={}),{provide:P,useValue:e,multi:!0}}function b(e,t){return{provide:P,useFactory:e,multi:!0,deps:t}}function w(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),T.apply(void 0,I([{}],null!=t?t:[],null!=e?e:[]))}var D=function(){function e(){}var n;return n=e,e.withConfig=function(e){return{ngModule:n,providers:[L(e)]}},e.withConfigFactory=function(e,t){return{ngModule:n,providers:[_(e,t)]}},e.forRoot=function(e){return void 0===e&&(e={}),{ngModule:n,providers:[L(e),{provide:A,useFactory:w,deps:[[new t.Optional,U],[new t.Optional,P]]}]}},e=n=v([t.NgModule({imports:[r.CommonModule],declarations:[]})],e)}(),M={anonymousConsents:{registerConsent:"MARKETING_NEWSLETTER",showLegalDescriptionInDialog:!0,requiredConsents:[],consentManagementPage:{showAnonymousConsents:!0,hideConsents:[]}}},F={authentication:{client_id:"mobile_android",client_secret:"secret"},backend:{occ:{endpoints:{login:"/authorizationserver/oauth/token",revoke:"/authorizationserver/oauth/revoke"}}}},k="cx-use-client-token",N=function(){function e(){}return e.createHeader=function(e,t,r){return r?r.append(e,JSON.stringify(t)):r=(new s.HttpHeaders).set(e,JSON.stringify(t))},e.removeHeader=function(e,t){var r=t.headers.delete(e);return t.clone({headers:r})},e.getInterceptorParam=function(e,t){var r=t.get(e);if(r)return JSON.parse(r)},e}();function j(e,t){return{entityType:e,entityId:t}}function x(e,t){return{entityId:t,entityType:e,entityRemove:!0}}function $(e){return{entityId:null,entityType:e,entityRemove:!0}}var G=function(e,t){this.type="[ENTITY] REMOVE",this.meta=x(e,t)},B=function(e){this.type="[ENTITY] REMOVE ALL",this.meta=$(e)};function H(e){return{entityType:e,loader:{load:!0}}}function V(e,t){return{entityType:e,loader:{error:t||!0}}}function W(e){return{entityType:e,loader:{success:!0}}}function q(e){return{entityType:e,loader:{}}}var z=function(e){this.type="[LOADER] LOAD",this.meta=H(e)},Y=function(e,t){this.type="[LOADER] FAIL",this.meta=V(e,t)},K=function(e){this.type="[LOADER] SUCCESS",this.meta=W(e)},Z=function(e){this.type="[LOADER] RESET",this.meta=q(e)};function J(e,t){return y(y({},H(e)),j(e,t))}function Q(e,t,r){return y(y({},V(e,r)),j(e,t))}function X(e,t){return y(y({},W(e)),j(e,t))}function ee(e,t){return y(y({},q(e)),j(e,t))}var te=function(e,t){this.type="[ENTITY] LOAD",this.meta=J(e,t)},re=function(e,t,r){this.type="[ENTITY] LOAD FAIL",this.meta=Q(e,t,r)},ne=function(e,t,r){this.payload=r,this.type="[ENTITY] LOAD SUCCESS",this.meta=X(e,t)},oe=function(e,t){this.type="[ENTITY] RESET",this.meta=ee(e,t)},ie={loading:!1,error:!1,success:!1,value:void 0};function se(e,t){return function(r,n){if(void 0===r&&(r=ie),n.meta&&n.meta.loader&&n.meta.entityType===e){var o=n.meta.loader;return o.load?y(y({},r),{loading:!0,value:t?t(r.value,n):r.value}):o.error?y(y({},r),{loading:!1,error:!0,success:!1,value:t?t(r.value,n):void 0}):o.success?y(y({},r),{value:t?t(r.value,n):n.payload,loading:!1,error:!1,success:!0}):y(y({},ie),{value:t?t(ie.value,n):ie.value})}if(t){var i=t(r.value,n);if(i!==r.value)return y(y({},r),{value:i})}return r}}function ae(e){return e.value}function ce(e){return e.loading}function ue(e){return e.error}function pe(e){return e.success}function de(e,t){return e.entities[t]||ie}function le(e,t){return ae(de(e,t))}var fe={entities:{}};function he(e,t){return function(r,n){var o;void 0===r&&(r=fe);var i=!1;if(n.meta&&n.meta.entityType===e&&void 0!==n.meta.entityId){if(o=[].concat(n.meta.entityId),n.meta.entityRemove){if(null===n.meta.entityId)return fe;var s=!1,a=Object.keys(r.entities).reduce((function(e,t){return o.includes(t)?s=!0:e[t]=r.entities[t],e}),{});return s?{entities:a}:r}i=Array.isArray(n.meta.entityId)&&Array.isArray(n.payload)}else o=Object.keys(r.entities);for(var c={},u=0;u<o.length;u++){var p=o[u],d=i?y(y({},n),{payload:n.payload[u]}):n,l=t(r.entities[p],d);l&&(c[p]=l)}return Object.keys(c).length>0?y(y({},r),{entities:y(y({},r.entities),c)}):r}}function ye(e,t){return he(e,se(e,t))}function ve(e){return{entityType:e,loader:void 0,processesCountDiff:1}}function Ce(e){return{entityType:e,loader:void 0,processesCountDiff:-1}}function Se(e){return y(y({},q(e)),{processesCountDiff:null})}var ge=function(e){this.type="[PROCESSES LOADER] RESET",this.meta=Se(e)},me=function(e){this.type="[PROCESSES LOADER] INCREMENT",this.meta=ve(e)},Ee=function(e){this.type="[PROCESSES LOADER] DECREMENT",this.meta=Ce(e)};function Ie(e,t){return y(y({},Se(e)),j(e,t))}function Re(e,t){return y(y({},ve(e)),j(e,t))}function Te(e,t){return y(y({},Ce(e)),j(e,t))}var Ae=function(e,t){this.type="[ENTITY] PROCESSES LOADER RESET",this.meta=Ie(e,t)},Ue=function(e,t){this.type="[ENTITY] PROCESSES INCREMENT",this.meta=Re(e,t)},Pe=function(e,t){this.type="[ENTITY] PROCESSES DECREMENT",this.meta=Te(e,t)};function Le(e){return 0===e.processesCount&&!e.loading}function _e(e){return e.processesCount>0}var Oe={processesCount:0};function be(e,r){return function(n,o){void 0===n&&(n=y(y({},Oe),ie));var i=se(e,r)(n,o);if(o.meta&&o.meta.entityType===e){var s=o.meta.processesCountDiff;if(t.isDevMode()&&n.processesCount+s<0&&console.error("Action '"+o.type+"' sets processesCount to value < 0!\nMake sure to keep processesCount in sync.\nThere should always be only one decrement action for each increment action.\nMake sure that you don't reset state in between those actions.\n",o),s)return y(y({},i),{processesCount:n.processesCount?n.processesCount+s:s});if(null===s)return y(y({},i),Oe)}return i}}var we=y(y({},ie),Oe);function De(e,t){return _e(de(e,t))}function Me(e,t){return Le(de(e,t))}function Fe(e,t){return e.entities[t]||we}function ke(e,t){return he(e,be(e,t))}function Ne(e,t){return e.entities[t]||void 0}function je(e,t){return e.split(".").reduce((function(e,t){return e?e[t]:void 0}),t)}function xe(e,t,r){if(!e||!r||0===Object.keys(r).length)return{};var n=e.split(".").reduceRight((function(e,t){var r;return(r={})[t]=e,r}),r);return function(e,t,r){var n,o,i=function(e,t){var r,n;if(!e||!t)return[];var o=[];try{for(var i=m(t),s=i.next();!s.done;s=i.next()){var a=s.value;a.includes(e)&&o.push(a)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o}(e,t);if(0===i.length)return r;var s=T({},r);try{for(var a=m(i),c=a.next();!c.done;c=a.next())for(var u=c.value.split("."),p=s,d=0;d<u.length;d++){var l=u[d];d===u.length-1?p&&p[l]&&delete p[l]:p=p[l]}}catch(e){n={error:e}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return s}(e,t,n)}function $e(e,t,r){var n,o;if(e&&0===e.length)return{};var i={};try{for(var s=m(e),a=s.next();!a.done;a=s.next()){var c=a.value;i=T(i,xe(c,t,je(c,r)))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return i}function Ge(e,t){return e?Object.keys(e).filter((function(r){return e[r]===t})):[]}var Be=Object.freeze({__proto__:null,getStateSlice:$e,ENTITY_LOAD_ACTION:"[ENTITY] LOAD",ENTITY_FAIL_ACTION:"[ENTITY] LOAD FAIL",ENTITY_SUCCESS_ACTION:"[ENTITY] LOAD SUCCESS",ENTITY_RESET_ACTION:"[ENTITY] RESET",entityLoadMeta:J,entityFailMeta:Q,entitySuccessMeta:X,entityResetMeta:ee,EntityLoadAction:te,EntityFailAction:re,EntitySuccessAction:ne,EntityLoaderResetAction:oe,entityLoaderStateSelector:de,entityValueSelector:le,entityLoadingSelector:function(e,t){return ce(de(e,t))},entityErrorSelector:function(e,t){return ue(de(e,t))},entitySuccessSelector:function(e,t){return pe(de(e,t))},entityLoaderReducer:ye,ENTITY_PROCESSES_LOADER_RESET_ACTION:"[ENTITY] PROCESSES LOADER RESET",ENTITY_PROCESSES_INCREMENT_ACTION:"[ENTITY] PROCESSES INCREMENT",ENTITY_PROCESSES_DECREMENT_ACTION:"[ENTITY] PROCESSES DECREMENT",entityProcessesLoaderResetMeta:Ie,entityProcessesIncrementMeta:Re,entityProcessesDecrementMeta:Te,EntityProcessesLoaderResetAction:Ae,EntityProcessesIncrementAction:Ue,EntityProcessesDecrementAction:Pe,entityHasPendingProcessesSelector:De,entityIsStableSelector:Me,entityProcessesLoaderStateSelector:Fe,entityProcessesLoaderReducer:ke,ENTITY_REMOVE_ACTION:"[ENTITY] REMOVE",ENTITY_REMOVE_ALL_ACTION:"[ENTITY] REMOVE ALL",entityMeta:j,entityRemoveMeta:x,entityRemoveAllMeta:$,EntityRemoveAction:G,EntityRemoveAllAction:B,entitySelector:Ne,initialEntityState:fe,entityReducer:he,LOADER_LOAD_ACTION:"[LOADER] LOAD",LOADER_FAIL_ACTION:"[LOADER] FAIL",LOADER_SUCCESS_ACTION:"[LOADER] SUCCESS",LOADER_RESET_ACTION:"[LOADER] RESET",loadMeta:H,failMeta:V,successMeta:W,resetMeta:q,LoaderLoadAction:z,LoaderFailAction:Y,LoaderSuccessAction:K,LoaderResetAction:Z,loaderValueSelector:ae,loaderLoadingSelector:ce,loaderErrorSelector:ue,loaderSuccessSelector:pe,initialLoaderState:ie,loaderReducer:se,PROCESSES_INCREMENT_ACTION:"[PROCESSES LOADER] INCREMENT",PROCESSES_DECREMENT_ACTION:"[PROCESSES LOADER] DECREMENT",PROCESSES_LOADER_RESET_ACTION:"[PROCESSES LOADER] RESET",processesIncrementMeta:ve,processesDecrementMeta:Ce,processesLoaderResetMeta:Se,ProcessesLoaderResetAction:ge,ProcessesIncrementAction:me,ProcessesDecrementAction:Ee,isStableSelector:Le,hasPendingProcessesSelector:_e,initialProcessesState:Oe,processesLoaderReducer:be}),He=function(e){function t(){var t=e.call(this,"[Auth] Client Token Data")||this;return t.type="[Token] Load Client Token",t}return h(t,e),t}(z),Ve=function(e){function t(t){var r=e.call(this,"[Auth] Client Token Data",t)||this;return r.payload=t,r.type="[Token] Load Client Token Fail",r}return h(t,e),t}(Y),We=function(e){function t(t){var r=e.call(this,"[Auth] Client Token Data")||this;return r.payload=t,r.type="[Token] Load Client Token Success",r}return h(t,e),t}(K),qe="[Auth] Login",ze="[Auth] Logout",Ye=function(){this.type=qe},Ke=function(){this.type=ze},Ze="[Auth] Load User Token",Je="[Auth] Load User Token Success",Qe=function(e){this.payload=e,this.type=Ze},Xe=function(e){this.payload=e,this.type="[Auth] Load User Token Fail"},et=function(e){this.payload=e,this.type=Je},tt=function(e){this.payload=e,this.type="[Auth] Refresh User Token"},rt=function(e){this.payload=e,this.type="[Auth] Refresh User Token Success"},nt=function(e){this.payload=e,this.type="[Auth] Refresh User Token Fail"},ot=function(e){this.payload=e,this.type="[Auth] Revoke User Token"},it=function(e){this.payload=e,this.type="[Auth] Revoke User Token Success"},st=function(e){this.payload=e,this.type="[Auth] Revoke User Token Fail"},at=Object.freeze({__proto__:null,LOAD_CLIENT_TOKEN:"[Token] Load Client Token",LOAD_CLIENT_TOKEN_FAIL:"[Token] Load Client Token Fail",LOAD_CLIENT_TOKEN_SUCCESS:"[Token] Load Client Token Success",LoadClientToken:He,LoadClientTokenFail:Ve,LoadClientTokenSuccess:We,LOGIN:qe,LOGOUT:ze,LOGOUT_CUSTOMER_SUPPORT_AGENT:"[Auth] Logout Customer Support Agent",Login:Ye,Logout:Ke,LOAD_USER_TOKEN:Ze,LOAD_USER_TOKEN_FAIL:"[Auth] Load User Token Fail",LOAD_USER_TOKEN_SUCCESS:Je,REFRESH_USER_TOKEN:"[Auth] Refresh User Token",REFRESH_USER_TOKEN_FAIL:"[Auth] Refresh User Token Fail",REFRESH_USER_TOKEN_SUCCESS:"[Auth] Refresh User Token Success",REVOKE_USER_TOKEN:"[Auth] Revoke User Token",REVOKE_USER_TOKEN_FAIL:"[Auth] Revoke User Token Fail",REVOKE_USER_TOKEN_SUCCESS:"[Auth] Revoke User Token Success",LoadUserToken:Qe,LoadUserTokenFail:Xe,LoadUserTokenSuccess:et,RefreshUserToken:tt,RefreshUserTokenSuccess:rt,RefreshUserTokenFail:nt,RevokeUserToken:ot,RevokeUserTokenSuccess:it,RevokeUserTokenFail:st}),ct=n.createFeatureSelector("auth"),ut=function(e){return e.clientToken},pt=n.createSelector(ct,ut),dt=function(e){return e.token},lt=function(e){return e.userToken},ft=n.createSelector(ct,lt),ht=n.createSelector(ft,dt),yt=Object.freeze({__proto__:null,getClientTokenState:pt,"ɵ0":ut,getAuthState:ct,getUserTokenState:ft,getUserToken:ht,"ɵ1":lt}),vt=function(){function e(e){this.store=e}return e.prototype.authorize=function(e,t){this.store.dispatch(new Qe({userId:e,password:t}))},e.prototype.getOccUserId=function(){return this.getUserToken().pipe(i.map((function(e){return e&&e.userId?e.userId:"anonymous"})))},e.prototype.invokeWithUserId=function(e){return this.getOccUserId().pipe(i.take(1)).subscribe((function(t){return e(t)}))},e.prototype.getUserToken=function(){return this.store.pipe(n.select(ht))},e.prototype.refreshUserToken=function(e){this.store.dispatch(new tt({refreshToken:e.refresh_token}))},e.prototype.authorizeWithToken=function(e){this.store.dispatch(new et(e))},e.prototype.logout=function(){var e=this;this.getUserToken().pipe(i.take(1)).subscribe((function(t){e.store.dispatch(new Ke),Boolean(t)&&"current"===t.userId&&e.store.dispatch(new ot(t))}))},e.prototype.getClientToken=function(){var e=this;return this.store.pipe(n.select(pt),i.filter((function(t){return!!e.isClientTokenLoaded(t)||(t.loading||e.store.dispatch(new He),!1)})),i.map((function(e){return e.value})))},e.prototype.refreshClientToken=function(){var e=this;return this.store.dispatch(new He),this.store.pipe(n.select(pt),i.filter((function(t){return e.isClientTokenLoaded(t)})),i.map((function(e){return e.value})))},e.prototype.isClientTokenLoaded=function(e){return(e.success||e.error)&&!e.loading},e.prototype.isUserLoggedIn=function(){return this.getUserToken().pipe(i.map((function(e){return Boolean(e)&&Boolean(e.access_token)})))},e.ctorParameters=function(){return[{type:n.Store}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Ct=function(){function e(e){this.authService=e}return e.prototype.handleExpiredClientToken=function(e,t){var r=this;return this.authService.refreshClientToken().pipe(i.take(1),i.switchMap((function(n){return t.handle(r.createNewRequestWithNewToken(e,n))})))},e.prototype.createNewRequestWithNewToken=function(e,t){return e=e.clone({setHeaders:{Authorization:t.token_type+" "+t.access_token}})},e.ctorParameters=function(){return[{type:vt}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(vt))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),St=function(){function e(e){this.document=e}return Object.defineProperty(e.prototype,"nativeWindow",{get:function(){return"undefined"!=typeof window?window:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sessionStorage",{get:function(){return this.nativeWindow?this.nativeWindow.sessionStorage:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localStorage",{get:function(){return this.nativeWindow?this.nativeWindow.localStorage:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resize$",{get:function(){return this.nativeWindow?o.fromEvent(this.nativeWindow,"resize").pipe(i.debounceTime(300),i.startWith({target:this.nativeWindow}),i.distinctUntilChanged()):o.of(null)},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[r.DOCUMENT]}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(r.DOCUMENT))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"}),C(0,t.Inject(r.DOCUMENT))],e)}(),gt=function(){function e(e){this.router=e}return e.prototype.getPrimarySegments=function(e){var t=this.router.parseUrl(e);return this._getPrimarySegmentsFromUrlTree(t.root)},e.prototype._getPrimarySegmentsFromUrlTree=function(e){var t=e.segments.map((function(e){return e.path})),r=e.children[a.PRIMARY_OUTLET]?this._getPrimarySegmentsFromUrlTree(e.children[a.PRIMARY_OUTLET]):[];return t.concat(r)},e.ctorParameters=function(){return[{type:a.Router}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(a.Router))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),mt=function(e){return e.startsWith(":")},Et=function(e){return e.slice(1)},It=function(){function e(){}return e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root",useExisting:A})],e)}(),Rt=function(){function e(e){this.config=e}return e.prototype.getRouteConfig=function(e){var t,r,n=null===(r=null===(t=this.config)||void 0===t?void 0:t.routing)||void 0===r?void 0:r.routes,o=n&&n[e];return n&&void 0!==o||this.warn("No path was configured for the named route '"+e+"'!"),o},e.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.isDevMode()&&console.warn.apply(console,I(e))},e.prototype.getLoadStrategy=function(){var e,t,r;return null!==(r=null===(t=null===(e=this.config)||void 0===e?void 0:e.routing)||void 0===t?void 0:t.loadStrategy)&&void 0!==r?r:"always"},e.ctorParameters=function(){return[{type:It}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(It))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Tt=function(){function e(e,t){this.routingConfigService=e,this.urlParser=t,this.ROOT_URL=["/"]}return e.prototype.get=function(e){var t=this.routingConfigService.getRouteConfig(e);return t&&Array.isArray(t.paths)?"/"+t.paths[0]:void 0},e.prototype.transform=function(e){var t,r;Array.isArray(e)||(e=[e]);var n=[];try{for(var o=m(e),i=o.next();!i.done;i=o.next()){var s=i.value;if(this.isRouteCommand(s)){var a=this.generateUrlPart(s);if(null===a)return this.ROOT_URL;n.push.apply(n,I(a))}else n.push(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return this.shouldOutputAbsolute(e)&&n.unshift("/"),n},e.prototype.isRouteCommand=function(e){return e&&Boolean(e.cxRoute)},e.prototype.shouldOutputAbsolute=function(e){return this.isRouteCommand(e[0])},e.prototype.generateUrlPart=function(e){if(this.standarizeRouteCommand(e),!e.cxRoute)return null;var t=this.routingConfigService.getRouteConfig(e.cxRoute);if(!t||!t.paths)return null;var r=this.findPathWithFillableParams(t,e.params);return r?this.provideParamsValues(r,e.params,t.paramsMapping):null},e.prototype.standarizeRouteCommand=function(e){e.params=e.params||{}},e.prototype.provideParamsValues=function(e,t,r){var n=this;return this.urlParser.getPrimarySegments(e).map((function(e){if(mt(e)){var o=Et(e),i=n.getMappedParamName(o,r);return t[i]}return e}))},e.prototype.findPathWithFillableParams=function(e,t){var r=this,n=e.paths.find((function(n){return r.getParams(n).every((function(n){var o=r.getMappedParamName(n,e.paramsMapping);return void 0!==t[o]}))}));return null==n?(this.warn("No configured path matches all its params to given object. ","Route config: ",e,"Params object: ",t),null):n},e.prototype.getParams=function(e){return this.urlParser.getPrimarySegments(e).filter(mt).map(Et)},e.prototype.getMappedParamName=function(e,t){return t&&t[e]||e},e.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.isDevMode()&&console.warn.apply(console,I(e))},e.ctorParameters=function(){return[{type:Rt},{type:gt}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Rt),t.ɵɵinject(gt))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),At=function(e){this.payload=e,this.type="[Router] Go"},Ut=function(e){this.payload=e,this.type="[Router] Go By Url"},Pt=function(){this.type="[Router] Back"},Lt=function(){this.type="[Router] Forward"},_t=Object.freeze({__proto__:null,ROUTER_GO:"[Router] Go",ROUTER_GO_BY_URL:"[Router] Go By Url",ROUTER_BACK:"[Router] Back",ROUTER_FORWARD:"[Router] Forward",RouteGoAction:At,RouteGoByUrlAction:Ut,RouteBackAction:Pt,RouteForwardAction:Lt}),Ot=n.createFeatureSelector("router"),bt=function(e){return e.router},wt=n.createSelector(Ot,bt),Dt=function(e){return e.state&&e.state.context||{id:""}},Mt=n.createSelector(wt,Dt),Ft=function(e){return e.nextState&&e.nextState.context},kt=n.createSelector(wt,Ft),Nt=function(e){return!!e},jt=n.createSelector(kt,Nt),xt=Object.freeze({__proto__:null,getRouterFeatureState:Ot,getRouterState:wt,getPageContext:Mt,getNextPageContext:kt,isNavigating:jt,"ɵ0":bt,"ɵ1":Dt,"ɵ2":Ft,"ɵ3":Nt}),$t=function(){function e(e,t,r){this.store=e,this.winRef=t,this.semanticPathService=r}return e.prototype.getRouterState=function(){return this.store.pipe(n.select(wt))},e.prototype.getPageContext=function(){return this.store.pipe(n.select(Mt))},e.prototype.getNextPageContext=function(){return this.store.pipe(n.select(kt))},e.prototype.isNavigating=function(){return this.store.pipe(n.select(jt))},e.prototype.go=function(e,t,r){var n=this.semanticPathService.transform(e);return this.navigate(n,t,r)},e.prototype.goByUrl=function(e){this.store.dispatch(new Ut(e))},e.prototype.back=function(){this.winRef.document.referrer.includes(this.winRef.nativeWindow.location.origin)?this.store.dispatch(new Pt):this.go(["/"])},e.prototype.forward=function(){this.store.dispatch(new Lt)},e.prototype.navigate=function(e,t,r){this.store.dispatch(new At({path:e,query:t,extras:r}))},e.ctorParameters=function(){return[{type:n.Store},{type:St},{type:Tt}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(St),t.ɵɵinject(Tt))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Gt=function(){function e(e,t){this.authService=e,this.routingService=t}return e.prototype.handleExpiredUserToken=function(e,t){var r=this;return this.handleExpiredToken().pipe(i.switchMap((function(n){return t.handle(r.createNewRequestWithNewToken(e,n))})))},e.prototype.handleExpiredRefreshToken=function(){this.authService.logout()},e.prototype.handleExpiredToken=function(){var e,t=this;return this.authService.getUserToken().pipe(i.tap((function(r){r.access_token&&r.refresh_token&&!e?t.authService.refreshUserToken(r):r.access_token||r.refresh_token?r.refresh_token||(t.authService.logout(),t.routingService.go({cxRoute:"login"})):t.routingService.go({cxRoute:"login"}),e=e||r})),i.filter((function(t){return e.access_token!==t.access_token})),i.take(1))},e.prototype.createNewRequestWithNewToken=function(e,t){return e=e.clone({setHeaders:{Authorization:t.token_type+" "+t.access_token}})},e.ctorParameters=function(){return[{type:vt},{type:$t}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(vt),t.ɵɵinject($t))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Bt=function(){function e(e,t,r){this.userErrorHandlingService=e,this.clientErrorHandlingService=t,this.authService=r}return e.prototype.intercept=function(e,t){var r=this,n=this.isClientTokenRequest(e);return n&&(e=N.removeHeader(k,e)),t.handle(e).pipe(i.catchError((function(i){if(i instanceof s.HttpErrorResponse)switch(i.status){case 401:if(n){if(r.isExpiredToken(i))return r.clientErrorHandlingService.handleExpiredClientToken(e,t)}else{if(r.isExpiredToken(i))return r.userErrorHandlingService.handleExpiredUserToken(e,t);if(i.url.includes("/authorizationserver/oauth/token")&&"invalid_token"===i.error.error)return r.userErrorHandlingService.handleExpiredRefreshToken(),o.of()}break;case 400:i.url.includes("/authorizationserver/oauth/token")&&"invalid_grant"===i.error.error&&"refresh_token"===e.body.get("grant_type")&&r.authService.logout()}return o.throwError(i)})))},e.prototype.isClientTokenRequest=function(e){var t=N.getInterceptorParam(k,e.headers);return Boolean(t)},e.prototype.isExpiredToken=function(e){return!!(e.error&&e.error.errors&&e.error.errors instanceof Array&&e.error.errors[0])&&"InvalidTokenError"===e.error.errors[0].type},e.ctorParameters=function(){return[{type:Gt},{type:Ct},{type:vt}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Gt),t.ɵɵinject(Ct),t.ɵɵinject(vt))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Ht=function(){function e(){}return e.resolve=function(e,t){var r,n;try{for(var o=m(Object.keys(t)),i=o.next();!i.done;i=o.next()){var s=i.value,a=new RegExp("\\${"+s+"}","g");e=e.replace(a,t[s])}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return e},e}();function Vt(e,t){return e.context&&e.context[t]||[]}function Wt(e,t){var r=Vt(e,t);return r&&r.length?r[0]:void 0}var qt,zt=function(){function e(){}return e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root",useExisting:A})],e)}(),Yt="[Site-context] Load BaseSite",Kt=function(){this.type=Yt},Zt=function(e){this.payload=e,this.type="[Site-context] Load BaseSite Fail"},Jt=function(e){this.payload=e,this.type="[Site-context] Load BaseSite Success"},Qt=function(e){this.payload=e,this.type="[Site-context] Set Active BaseSite"},Xt=function(){this.type="[Site-context] BaseSite Change"},er="[Site-context] Load Currencies",tr="[Site-context] Set Active Currency",rr="[Site-context] Currency Change",nr=function(){this.type=er},or=function(e){this.payload=e,this.type="[Site-context] Load Currencies Fail"},ir=function(e){this.payload=e,this.type="[Site-context] Load Currencies Success"},sr=function(e){this.payload=e,this.type=tr},ar=function(e){this.payload=e,this.type=rr},cr="[Site-context] Load Languages",ur="[Site-context] Set Active Language",pr="[Site-context] Language Change",dr=function(){this.type=cr},lr=function(e){this.payload=e,this.type="[Site-context] Load Languages Fail"},fr=function(e){this.payload=e,this.type="[Site-context] Load Languages Success"},hr=function(e){this.payload=e,this.type=ur},yr=function(e){this.payload=e,this.type=pr},vr=Object.freeze({__proto__:null,LOAD_BASE_SITE:Yt,LOAD_BASE_SITE_FAIL:"[Site-context] Load BaseSite Fail",LOAD_BASE_SITE_SUCCESS:"[Site-context] Load BaseSite Success",SET_ACTIVE_BASE_SITE:"[Site-context] Set Active BaseSite",BASE_SITE_CHANGE:"[Site-context] BaseSite Change",LoadBaseSite:Kt,LoadBaseSiteFail:Zt,LoadBaseSiteSuccess:Jt,SetActiveBaseSite:Qt,BaseSiteChange:Xt,LOAD_CURRENCIES:er,LOAD_CURRENCIES_FAIL:"[Site-context] Load Currencies Fail",LOAD_CURRENCIES_SUCCESS:"[Site-context] Load Currencies Success",SET_ACTIVE_CURRENCY:tr,CURRENCY_CHANGE:rr,LoadCurrencies:nr,LoadCurrenciesFail:or,LoadCurrenciesSuccess:ir,SetActiveCurrency:sr,CurrencyChange:ar,LOAD_LANGUAGES:cr,LOAD_LANGUAGES_FAIL:"[Site-context] Load Languages Fail",LOAD_LANGUAGES_SUCCESS:"[Site-context] Load Languages Success",SET_ACTIVE_LANGUAGE:ur,LANGUAGE_CHANGE:pr,LoadLanguages:dr,LoadLanguagesFail:lr,LoadLanguagesSuccess:fr,SetActiveLanguage:hr,LanguageChange:yr}),Cr=n.createFeatureSelector("siteContext"),Sr=function(e){return e&&e.baseSite&&e.baseSite.activeSite},gr=n.createSelector(Cr,Sr),mr=function(e){return e&&e.baseSite&&e.baseSite.details},Er=n.createSelector(Cr,mr),Ir=function(e){return e.entities},Rr=function(e){return e.activeCurrency},Tr=function(e){return e.currencies},Ar=n.createSelector(Cr,Tr),Ur=n.createSelector(Ar,Ir),Pr=n.createSelector(Ar,Rr),Lr=function(e){return e?Object.keys(e).map((function(t){return e[t]})):null},_r=n.createSelector(Ur,Lr),Or=function(e){return e.activeLanguage},br=function(e){return e.entities},wr=n.createSelector(Cr,(function(e){return e.languages})),Dr=n.createSelector(wr,br),Mr=n.createSelector(wr,Or),Fr=n.createSelector(Dr,(function(e){return e?Object.keys(e).map((function(t){return e[t]})):null})),kr=Object.freeze({__proto__:null,getActiveBaseSite:gr,getBaseSiteData:Er,"ɵ0":Sr,"ɵ1":mr,getCurrenciesState:Ar,getCurrenciesEntities:Ur,getActiveCurrency:Pr,getAllCurrencies:_r,"ɵ2":Tr,"ɵ3":Lr,getLanguagesState:wr,getLanguagesEntities:Dr,getActiveLanguage:Mr,getAllLanguages:Fr,getSiteContextState:Cr}),Nr=function(){function e(e,t){this.store=e,this.config=t}return e.prototype.getActive=function(){return this.store.pipe(n.select(gr),i.filter((function(e){return Boolean(e)})))},e.prototype.getAll=function(){return this.getActive().pipe(i.map((function(e){return[e]})))},e.prototype.setActive=function(e){var t=this;return this.store.pipe(n.select(gr),i.take(1)).subscribe((function(r){e&&r!==e&&t.store.dispatch(new Qt(e))}))},e.prototype.initialize=function(){var e;this.getActive().subscribe((function(t){return e=t})).unsubscribe(),e||this.setActive(Wt(this.config,"baseSite"))},e.prototype.getBaseSiteData=function(){var e=this;return this.store.pipe(n.select(Er),i.tap((function(t){0===Object.keys(t).length&&e.store.dispatch(new Kt)})))},e.ctorParameters=function(){return[{type:n.Store},{type:zt}]},e=v([t.Injectable()],e)}(),jr=function(){function e(){}return e.prototype.encodeKey=function(e){return encodeURIComponent(e)},e.prototype.encodeValue=function(e){return encodeURIComponent(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}(),xr=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return h(r,e),r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root",useExisting:A})],r)}(zt),$r=function(){function e(e,t){var r=this;this.config=e,this.baseSiteService=t,this.baseSiteService&&this.baseSiteService.getActive().subscribe((function(e){return r._activeBaseSite=e}))}return Object.defineProperty(e.prototype,"activeBaseSite",{get:function(){var e;return null!==(e=this._activeBaseSite)&&void 0!==e?e:Wt(this.config,"baseSite")},enumerable:!0,configurable:!0}),e.prototype.getRawEndpoint=function(e){var t,r,n;return(null===(r=null===(t=this.config)||void 0===t?void 0:t.backend)||void 0===r?void 0:r.occ)?((e=null===(n=this.config.backend.occ.endpoints)||void 0===n?void 0:n[e]).startsWith("/")||(e="/"+e),this.config.backend.occ.baseUrl+e):""},e.prototype.getBaseEndpoint=function(){var e,t;return(null===(t=null===(e=this.config)||void 0===e?void 0:e.backend)||void 0===t?void 0:t.occ)?(this.config.backend.occ.baseUrl||"")+this.config.backend.occ.prefix+this.activeBaseSite:""},e.prototype.getEndpoint=function(e){return e.startsWith("/")||(e="/"+e),this.getBaseEndpoint()+e},e.prototype.getUrl=function(e,t,r,n){var o;if(e=this.getEndpointForScope(e,n),t&&(Object.keys(t).forEach((function(e){t[e]=encodeURIComponent(t[e])})),e=Ht.resolve(e,t)),r){var i={encoder:new jr};if(e.includes("?")){var a;o=E(e.split("?"),2),e=o[0],a=o[1],i=y(y({},i),{fromString:a})}var c=new s.HttpParams(i);Object.keys(r).forEach((function(e){var t=r[e];void 0!==t&&(c=null===t?c.delete(e):c.set(e,t))}));var u=c.toString();u.length&&(e+="?"+u)}return this.getEndpoint(e)},e.prototype.getEndpointForScope=function(e,r){var n,o,i=(null===(o=null===(n=this.config.backend)||void 0===n?void 0:n.occ)||void 0===o?void 0:o.endpoints)[e];if(r){if(null==i?void 0:i[r])return null==i?void 0:i[r];if("default"===r&&"string"==typeof i)return i;t.isDevMode()&&console.warn(e+' endpoint configuration missing for scope "'+r+'"')}return("string"==typeof i?i:null==i?void 0:i.default)||e},e.ctorParameters=function(){return[{type:xr},{type:Nr,decorators:[{type:t.Optional}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(xr),t.ɵɵinject(Nr,8))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"}),C(1,t.Optional())],e)}(),Gr=function(){function e(e,t){this.authService=e,this.occEndpoints=t}return e.prototype.intercept=function(e,t){var r=this;return this.getClientToken(e).pipe(i.take(1),i.switchMap((function(n){return n&&e.url.includes(r.occEndpoints.getBaseEndpoint())&&(e=e.clone({setHeaders:{Authorization:n.token_type+" "+n.access_token}})),t.handle(e)})))},e.prototype.getClientToken=function(e){return N.getInterceptorParam(k,e.headers)?this.authService.getClientToken():o.of(null)},e.ctorParameters=function(){return[{type:vt},{type:$r}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(vt),t.ɵɵinject($r))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Br=function(){function e(e,t){this.authService=e,this.occEndpoints=t}return e.prototype.intercept=function(e,t){var r=this;return this.authService.getUserToken().pipe(i.take(1),i.switchMap((function(n){return n&&r.isOccUrl(e.url)&&!e.headers.get("Authorization")&&(e=e.clone({setHeaders:{Authorization:n.token_type+" "+n.access_token}})),t.handle(e)})))},e.prototype.isOccUrl=function(e){return e.includes(this.occEndpoints.getBaseEndpoint())},e.ctorParameters=function(){return[{type:vt},{type:$r}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(vt),t.ɵɵinject($r))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Hr=function(){function e(){}return e.prototype.intercept=function(e,t){var r=this.isTokenRevocationRequest(e);return r&&(e=N.removeHeader("cx-token-revocation",e)),t.handle(e).pipe(i.catchError((function(e){return r?o.EMPTY:o.throwError(e)})))},e.prototype.isTokenRevocationRequest=function(e){var t=N.getInterceptorParam("cx-token-revocation",e.headers);return Boolean(t)},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Vr=[{provide:s.HTTP_INTERCEPTORS,useExisting:Gr,multi:!0},{provide:s.HTTP_INTERCEPTORS,useExisting:Br,multi:!0},{provide:s.HTTP_INTERCEPTORS,useExisting:Bt,multi:!0},{provide:s.HTTP_INTERCEPTORS,useExisting:Hr,multi:!0}];(qt=e.StorageSyncType||(e.StorageSyncType={})).NO_STORAGE="NO_STORAGE",qt.LOCAL_STORAGE="LOCAL_STORAGE",qt.SESSION_STORAGE="SESSION_STORAGE",(e.StateTransferType||(e.StateTransferType={})).TRANSFER_STATE="SSR";var Wr=function(){function e(){}return e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root",useExisting:A})],e)}(),qr={state:{storageSync:{localStorageKeyName:"spartacus-local-data",sessionStorageKeyName:"spartacus-session-data",keys:{},excludeKeys:{}}}};function zr(t,r){if(!(t.nativeWindow&&r&&r.state&&r.state.storageSync&&r.state.storageSync.keys))return function(e){return e};var o=r.state.storageSync;return function(i){return function(s,a){var c=i(s,a);if(a.type===n.INIT||a.type===n.UPDATE){var u=function(e,t){var r=Kr(t.localStorage,e.state.storageSync.localStorageKeyName),n=Kr(t.sessionStorage,e.state.storageSync.sessionStorageKeyName);return T(r,n)}(r,t);return T({},c,u)}if(a.type!==n.INIT){var p=$e(Ge(o.keys,e.StorageSyncType.LOCAL_STORAGE),Ge(o.excludeKeys,e.StorageSyncType.LOCAL_STORAGE),c);Yr(r.state.storageSync.localStorageKeyName,p,t.localStorage);var d=$e(Ge(o.keys,e.StorageSyncType.SESSION_STORAGE),Ge(o.excludeKeys,e.StorageSyncType.SESSION_STORAGE),c);Yr(r.state.storageSync.sessionStorageKeyName,d,t.sessionStorage)}return c}}}function Yr(e,t,r){!Zr(r)&&t&&r.setItem(e,JSON.stringify(t))}function Kr(e,t){if(!Zr(e)){var r=e.getItem(t);if(r)return JSON.parse(r)}}function Zr(e){return!Boolean(e)}var Jr=u.makeStateKey("cx-state");function Qr(t,o,i){if(o&&i&&i.state&&i.state.ssrTransfer&&i.state.ssrTransfer.keys){if(r.isPlatformBrowser(t))return function(t,r){var o=Ge(r,e.StateTransferType.TRANSFER_STATE);return function(e){return function(r,i){if(i.type===n.INIT){r||(r=e(r,i));var s=r.auth;if(!(s&&s.userToken&&s.userToken.token)&&t.hasKey(Jr)){var a=t.get(Jr,{});r=T({},r,$e(o,[],a))}return r}return e(r,i)}}}(o,i.state.ssrTransfer.keys);if(r.isPlatformServer(t))return function(t,r){var n=Ge(r,e.StateTransferType.TRANSFER_STATE);return function(e){return function(r,o){var i=e(r,o);if(i){var s=$e(n,[],i);t.set(Jr,s)}return i}}}(o,i.state.ssrTransfer.keys)}return function(e){return e}}var Xr=new t.InjectionToken("TransferStateMetaReducer"),en=new t.InjectionToken("StorageSyncMetaReducer"),tn=zr,rn=[{provide:Xr,useFactory:Qr,deps:[t.PLATFORM_ID,[new t.Optional,u.TransferState],[new t.Optional,A]]},{provide:en,useFactory:tn,deps:[St,[new t.Optional,A]]},{provide:n.META_REDUCERS,useExisting:Xr,multi:!0},{provide:n.META_REDUCERS,useExisting:en,multi:!0}],nn=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:I(rn,[O(qr)])}},e=r=v([t.NgModule({})],e)}(),on={error:"unknown error"},sn=function(){var e=new WeakSet;return function(t,r){if("object"==typeof r&&null!==r){if(e.has(r))return;e.add(r)}return r}};function an(e){if(e instanceof Error)return{message:e.message,type:e.name,reason:e.stack};if(e instanceof s.HttpErrorResponse){var t=e.error;return R(e.error)&&(t=JSON.stringify(e.error,sn())),{message:e.message,error:t,status:e.status,statusText:e.statusText,url:e.url}}return R(e)?on:e}var cn=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return h(r,e),r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root",useExisting:A})],r)}(xr),un=function(){function e(e,t,r){this.config=e,this.http=t,this.occEndpointsService=r}return e.prototype.loadClientAuthenticationToken=function(){var e=this.occEndpointsService.getRawEndpoint("login"),t=(new s.HttpParams).set("client_id",encodeURIComponent(this.config.authentication.client_id)).set("client_secret",encodeURIComponent(this.config.authentication.client_secret)).set("grant_type","client_credentials"),r=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});return this.http.post(e,t,{headers:r})},e.ctorParameters=function(){return[{type:cn},{type:s.HttpClient},{type:$r}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(cn),t.ɵɵinject(s.HttpClient),t.ɵɵinject($r))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),pn=function(){function e(e,t){var r=this;this.actions$=e,this.clientAuthenticationTokenService=t,this.loadClientToken$=this.actions$.pipe(c.ofType("[Token] Load Client Token"),i.exhaustMap((function(){return r.clientAuthenticationTokenService.loadClientAuthenticationToken().pipe(i.map((function(e){return new We(e)})),i.catchError((function(e){return o.of(new Ve(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:un}]},v([c.Effect()],e.prototype,"loadClientToken$",void 0),e=v([t.Injectable()],e)}(),dn=function(){function e(e,t,r){this.http=e,this.config=t,this.occEndpointsService=r}return e.prototype.loadToken=function(e,t){var r=this.occEndpointsService.getRawEndpoint("login"),n=(new s.HttpParams).set("client_id",this.config.authentication.client_id).set("client_secret",this.config.authentication.client_secret).set("grant_type","password").set("username",e).set("password",t),a=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});return this.http.post(r,n,{headers:a}).pipe(i.catchError((function(e){return o.throwError(e)})))},e.prototype.refreshToken=function(e){var t=this.occEndpointsService.getRawEndpoint("login"),r=(new s.HttpParams).set("client_id",encodeURIComponent(this.config.authentication.client_id)).set("client_secret",encodeURIComponent(this.config.authentication.client_secret)).set("refresh_token",encodeURI(e)).set("grant_type","refresh_token"),n=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});return this.http.post(t,r,{headers:n}).pipe(i.catchError((function(e){return o.throwError(e)})))},e.prototype.revoke=function(e){var t=this.occEndpointsService.getRawEndpoint("revoke"),r=N.createHeader("cx-token-revocation",!0,new s.HttpHeaders({Authorization:e.token_type+" "+e.access_token,"Content-Type":"application/x-www-form-urlencoded"})),n=(new s.HttpParams).set("token",e.access_token);return this.http.post(t,n,{headers:r}).pipe(i.catchError((function(e){return o.throwError(e)})))},e.ctorParameters=function(){return[{type:s.HttpClient},{type:cn},{type:$r}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(s.HttpClient),t.ɵɵinject(cn),t.ɵɵinject($r))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),ln=function(){function e(e,t){var r=this;this.actions$=e,this.userTokenService=t,this.loadUserToken$=this.actions$.pipe(c.ofType(Ze),i.map((function(e){return e.payload})),i.mergeMap((function(e){var t=e.userId,n=e.password;return r.userTokenService.loadToken(t,n).pipe(i.map((function(e){var t=new Date;return t.setSeconds(t.getSeconds()+e.expires_in),e.expiration_time=t.toJSON(),e.userId="current",new et(e)})),i.catchError((function(e){return o.of(new Xe(an(e)))})))}))),this.login$=this.actions$.pipe(c.ofType(Je),i.map((function(){return new Ye}))),this.refreshUserToken$=this.actions$.pipe(c.ofType("[Auth] Refresh User Token"),i.map((function(e){return e.payload})),i.exhaustMap((function(e){var t=e.refreshToken;return r.userTokenService.refreshToken(t).pipe(i.map((function(e){var t=new Date;return t.setSeconds(t.getSeconds()+e.expires_in),e.expiration_time=t.toJSON(),new rt(e)}),i.catchError((function(e){return o.of(new nt(an(e)))}))))}))),this.revokeUserToken$=this.actions$.pipe(c.ofType("[Auth] Revoke User Token"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return r.userTokenService.revoke(e).pipe(i.map((function(){return new it(e)})),i.catchError((function(e){return o.of(new st(e))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:dn}]},v([c.Effect()],e.prototype,"loadUserToken$",void 0),v([c.Effect()],e.prototype,"login$",void 0),v([c.Effect()],e.prototype,"refreshUserToken$",void 0),v([c.Effect()],e.prototype,"revokeUserToken$",void 0),e=v([t.Injectable()],e)}(),fn=[ln,pn],hn={};function yn(e,t){switch(void 0===e&&(e=hn),t.type){case Ze:case"[Auth] Refresh User Token":return y({},e);case Je:case"[Auth] Refresh User Token Success":return y(y({},e),t.payload);case"[Auth] Load User Token Fail":case"[Auth] Refresh User Token Fail":return y({},e)}return e}function vn(){return{userToken:n.combineReducers({token:yn}),clientToken:se("[Auth] Client Token Data")}}var Cn=new t.InjectionToken("AuthReducers"),Sn={provide:Cn,useFactory:vn};function gn(e){return function(t,r){return r.type===ze&&(t=y(y({},t),{userToken:void 0})),e(t,r)}}var mn=[gn];function En(){return{state:{storageSync:{keys:{"auth.userToken.token.access_token":e.StorageSyncType.LOCAL_STORAGE,"auth.userToken.token.token_type":e.StorageSyncType.LOCAL_STORAGE,"auth.userToken.token.expires_in":e.StorageSyncType.LOCAL_STORAGE,"auth.userToken.token.expiration_time":e.StorageSyncType.LOCAL_STORAGE,"auth.userToken.token.scope":e.StorageSyncType.LOCAL_STORAGE,"auth.userToken.token.userId":e.StorageSyncType.LOCAL_STORAGE}}}}}var In,Rn,Tn,An,Un,Pn=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule,nn,n.StoreModule.forFeature("auth",Cn,{metaReducers:mn}),c.EffectsModule.forFeature(fn)],providers:[b(En),Sn]})],e)}(),Ln=function(){function e(){}var n;return n=e,e.forRoot=function(){return{ngModule:n,providers:I([O(F)],Vr)}},e=n=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule,Pn]})],e)}(),_n=function(){function e(e,t){this.routing=e,this.router=t,this.ignoredUrls=new Set}return e.prototype.redirect=function(){void 0===this.redirectUrl?this.routing.go("/"):this.routing.goByUrl(this.redirectUrl),this.redirectUrl=void 0,this.lastAuthGuardNavigation=void 0},e.prototype.reportAuthGuard=function(){var e=this.getCurrentNavigation(),t=e.url,r=e.navigationId;this.lastAuthGuardNavigation={url:t,navigationId:r},this.redirectUrl=t},e.prototype.reportNotAuthGuard=function(){var e=this.getCurrentNavigation(),t=e.url,r=e.initialUrl,n=e.navigationId;this.ignoredUrls.add(t),this.ignoredUrls.has(r)||(!this.lastAuthGuardNavigation||this.lastAuthGuardNavigation.navigationId<n-1)&&(this.redirectUrl=r,this.lastAuthGuardNavigation=void 0)},e.prototype.getCurrentNavigation=function(){var e=this.router.url,t=this.router.getCurrentNavigation(),r=this.router.serializeUrl(t.finalUrl);return{navigationId:t.id,url:r,initialUrl:e}},e.ctorParameters=function(){return[{type:$t},{type:a.Router}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject($t),t.ɵɵinject(a.Router))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),On=function(){function e(e,t,r,n){this.routingService=e,this.authService=t,this.authRedirectService=r,this.router=n}return e.prototype.canActivate=function(){var e=this;return this.authService.getUserToken().pipe(i.map((function(t){return t.access_token||(e.authRedirectService.reportAuthGuard(),e.routingService.go({cxRoute:"login"})),!!t.access_token})))},e.ctorParameters=function(){return[{type:$t},{type:vt},{type:_n},{type:a.Router}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject($t),t.ɵɵinject(vt),t.ɵɵinject(_n),t.ɵɵinject(a.Router))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),bn=function(){function e(e,t,r){this.routingService=e,this.authService=t,this.authRedirectService=r}return e.prototype.canActivate=function(){var e=this;return this.authRedirectService.reportNotAuthGuard(),this.authService.getUserToken().pipe(i.map((function(t){return t.access_token&&e.routingService.go({cxRoute:"home"}),!t.access_token})))},e.ctorParameters=function(){return[{type:$t},{type:vt},{type:_n}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject($t),t.ɵɵinject(vt),t.ɵɵinject(_n))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}();(In=e.CountryType||(e.CountryType={})).BILLING="BILLING",In.SHIPPING="SHIPPING",(Rn=e.PromotionLocation||(e.PromotionLocation={})).ActiveCart="CART",Rn.Checkout="CHECKOUT",Rn.Order="ORDER",(Tn=e.PageType||(e.PageType={})).CONTENT_PAGE="ContentPage",Tn.PRODUCT_PAGE="ProductPage",Tn.CATEGORY_PAGE="CategoryPage",Tn.CATALOG_PAGE="CatalogPage",(An=e.CmsBannerCarouselEffect||(e.CmsBannerCarouselEffect={})).FADE="FADE",An.ZOOM="ZOOM",An.CURTAIN="CURTAINX",An.TURNDOWN="TURNDOWN",(Un=e.ANONYMOUS_CONSENT_STATUS||(e.ANONYMOUS_CONSENT_STATUS={})).GIVEN="GIVEN",Un.WITHDRAWN="WITHDRAWN";var wn,Dn,Mn,Fn;(wn=e.ImageType||(e.ImageType={})).PRIMARY="PRIMARY",wn.GALLERY="GALLERY",(Dn=e.VariantType||(e.VariantType={})).SIZE="ApparelSizeVariantProduct",Dn.STYLE="ApparelStyleVariantProduct",Dn.COLOR="ElectronicsColorVariantProduct",(Mn=e.PriceType||(e.PriceType={})).BUY="BUY",Mn.FROM="FROM",(Fn=e.VariantQualifier||(e.VariantQualifier={})).SIZE="size",Fn.STYLE="style",Fn.COLOR="color",Fn.THUMBNAIL="thumbnail",Fn.PRODUCT="product",Fn.ROLLUP_PROPERTY="rollupProperty";(e.NotificationType||(e.NotificationType={})).BACK_IN_STOCK="BACK_IN_STOCK";var kn,Nn="[Anonymous Consents] Anonymous Consents",jn=function(e){function t(){var t=e.call(this,Nn)||this;return t.type="[Anonymous Consents] Load Anonymous Consent Templates",t}return h(t,e),t}(z),xn=function(e){function t(t){var r=e.call(this,Nn)||this;return r.payload=t,r.type="[Anonymous Consents] Load Anonymous Consent Templates Success",r}return h(t,e),t}(K),$n=function(e){function t(t){var r=e.call(this,Nn,t)||this;return r.type="[Anonymous Consents] Load Anonymous Consent Templates Fail",r}return h(t,e),t}(Y),Gn=function(e){function t(){var t=e.call(this,Nn)||this;return t.type="[Anonymous Consents] Reset Load Anonymous Consent Templates",t}return h(t,e),t}(Z),Bn=function(){this.type="[Anonymous Consents] Get All Anonymous Consents"},Hn=function(e){this.templateCode=e,this.type="[Anonymous Consents] Get Anonymous Consent"},Vn=function(e){this.payload=e,this.type="[Anonymous Consents] Set Anonymous Consents"},Wn=function(e){this.templateCode=e,this.type="[Anonymous Consents] Give Anonymous Consent"},qn=function(e){this.templateCode=e,this.type="[Anonymous Consents] Withdraw Anonymous Consent"},zn=function(e){this.dismissed=e,this.type="[Anonymous Consents] Toggle Anonymous Consents Banner Dismissed"},Yn=function(e){this.updated=e,this.type="[Anonymous Consents] Anonymous Consent Templates Updated"},Kn=function(){this.type="[Anonymous Consents] Check Updated Versions"},Zn=Object.freeze({__proto__:null,LOAD_ANONYMOUS_CONSENT_TEMPLATES:"[Anonymous Consents] Load Anonymous Consent Templates",LOAD_ANONYMOUS_CONSENT_TEMPLATES_SUCCESS:"[Anonymous Consents] Load Anonymous Consent Templates Success",LOAD_ANONYMOUS_CONSENT_TEMPLATES_FAIL:"[Anonymous Consents] Load Anonymous Consent Templates Fail",RESET_LOAD_ANONYMOUS_CONSENT_TEMPLATES:"[Anonymous Consents] Reset Load Anonymous Consent Templates",GET_ALL_ANONYMOUS_CONSENTS:"[Anonymous Consents] Get All Anonymous Consents",GET_ANONYMOUS_CONSENT:"[Anonymous Consents] Get Anonymous Consent",SET_ANONYMOUS_CONSENTS:"[Anonymous Consents] Set Anonymous Consents",GIVE_ANONYMOUS_CONSENT:"[Anonymous Consents] Give Anonymous Consent",WITHDRAW_ANONYMOUS_CONSENT:"[Anonymous Consents] Withdraw Anonymous Consent",TOGGLE_ANONYMOUS_CONSENTS_BANNER_DISMISSED:"[Anonymous Consents] Toggle Anonymous Consents Banner Dismissed",TOGGLE_ANONYMOUS_CONSENT_TEMPLATES_UPDATED:"[Anonymous Consents] Anonymous Consent Templates Updated",ANONYMOUS_CONSENT_CHECK_UPDATED_VERSIONS:"[Anonymous Consents] Check Updated Versions",LoadAnonymousConsentTemplates:jn,LoadAnonymousConsentTemplatesSuccess:xn,LoadAnonymousConsentTemplatesFail:$n,ResetLoadAnonymousConsentTemplates:Gn,GetAllAnonymousConsents:Bn,GetAnonymousConsent:Hn,SetAnonymousConsents:Vn,GiveAnonymousConsent:Wn,WithdrawAnonymousConsent:qn,ToggleAnonymousConsentsBannerDissmissed:zn,ToggleAnonymousConsentTemplatesUpdated:Yn,AnonymousConsentCheckUpdatedVersions:Kn}),Jn=n.createFeatureSelector("anonymous-consents"),Qn=function(e){return e.templates},Xn=n.createSelector(Jn,Qn),eo=n.createSelector(Xn,ae),to=n.createSelector(Xn,ce),ro=n.createSelector(Xn,pe),no=n.createSelector(Xn,ue),oo=function(e){return n.createSelector(eo,(function(t){return t?t.find((function(t){return t.id===e})):null}))},io=n.createSelector(Jn,(function(e){return e.ui.updated})),so=function(e){return e.ui.bannerDismissed},ao=n.createSelector(Jn,so),co=n.createSelector(Jn,(function(e){return e.consents})),uo=function(e){return n.createSelector(co,(function(t){return t.find((function(t){return t.templateCode===e}))}))},po=Object.freeze({__proto__:null,getAnonymousConsentTemplatesState:Xn,getAnonymousConsentTemplatesValue:eo,getAnonymousConsentTemplatesLoading:to,getAnonymousConsentTemplatesSuccess:ro,getAnonymousConsentTemplatesError:no,getAnonymousConsentTemplate:oo,"ɵ0":Qn,getAnonymousConsentTemplatesUpdate:io,getAnonymousConsentsBannerDismissed:ao,"ɵ1":so,getAnonymousConsents:co,getAnonymousConsentByTemplateCode:uo,getAnonymousConsentState:Jn}),lo=function(){function r(e,t){this.store=e,this.authService=t}return r.prototype.loadTemplates=function(){this.store.dispatch(new jn)},r.prototype.getTemplates=function(e){var t=this;return void 0===e&&(e=!1),o.iif((function(){return e}),this.store.pipe(n.select(eo),i.withLatestFrom(this.getLoadTemplatesLoading()),i.filter((function(e){var t=E(e,2);t[0];return!t[1]})),i.tap((function(e){var r=E(e,2),n=r[0];r[1];Boolean(n)||t.loadTemplates()})),i.filter((function(e){var t=E(e,2),r=t[0];t[1];return Boolean(r)})),i.map((function(e){var t=E(e,2),r=t[0];t[1];return r}))),this.store.pipe(n.select(eo)))},r.prototype.getTemplate=function(e){return this.store.pipe(n.select(oo(e)))},r.prototype.getLoadTemplatesLoading=function(){return this.store.pipe(n.select(to))},r.prototype.getLoadTemplatesSuccess=function(){return this.store.pipe(n.select(ro))},r.prototype.getLoadTemplatesError=function(){return this.store.pipe(n.select(no))},r.prototype.resetLoadTemplatesState=function(){this.store.dispatch(new Gn)},r.prototype.getConsents=function(){return this.store.pipe(n.select(co))},r.prototype.setConsents=function(e){return this.store.dispatch(new Vn(e))},r.prototype.getConsent=function(e){var t=this;return this.authService.isUserLoggedIn().pipe(i.filter((function(e){return!e})),i.tap((function(){return t.getTemplates(!0)})),i.switchMap((function(){return t.store.pipe(n.select(uo(e)))})))},r.prototype.giveConsent=function(e){this.store.dispatch(new Wn(e))},r.prototype.giveAllConsents=function(){var e=this;return this.getTemplates(!0).pipe(i.tap((function(t){return t.forEach((function(t){return e.giveConsent(t.id)}))})))},r.prototype.isConsentGiven=function(t){return t&&t.consentState===e.ANONYMOUS_CONSENT_STATUS.GIVEN},r.prototype.withdrawConsent=function(e){this.store.dispatch(new qn(e))},r.prototype.withdrawAllConsents=function(){var e=this;return this.getTemplates(!0).pipe(i.tap((function(t){return t.forEach((function(t){return e.withdrawConsent(t.id)}))})))},r.prototype.isConsentWithdrawn=function(t){return t&&t.consentState===e.ANONYMOUS_CONSENT_STATUS.WITHDRAWN},r.prototype.toggleBannerDismissed=function(e){this.store.dispatch(new zn(e)),e&&this.toggleTemplatesUpdated(!1)},r.prototype.isBannerDismissed=function(){return this.store.pipe(n.select(ao))},r.prototype.getTemplatesUpdated=function(){var e=this;return this.getTemplates(!0).pipe(i.switchMap((function(){return e.store.pipe(n.select(io))})))},r.prototype.toggleTemplatesUpdated=function(e){this.store.dispatch(new Yn(e))},r.prototype.isBannerVisible=function(){var e=this;return o.combineLatest([this.isBannerDismissed(),this.getTemplatesUpdated()]).pipe(i.tap((function(){return e.checkConsentVersions()})),i.map((function(e){var t=E(e,2),r=t[0],n=t[1];return!r||n})))},r.prototype.checkConsentVersions=function(){this.store.dispatch(new Kn)},r.prototype.detectUpdatedTemplates=function(e,t){if(t.length!==e.length)return!0;for(var r=0;r<t.length;r++){var n=t[r],o=e[r];if(n.version!==o.version)return!0}return!1},r.prototype.serializeAndEncode=function(e){if(!e)return"";var t=JSON.stringify(e);return encodeURIComponent(t)},r.prototype.decodeAndDeserialize=function(e){var t=decodeURIComponent(e);return JSON.parse(t)},r.prototype.consentsUpdated=function(e,t){return this.serializeAndEncode(e)!==this.serializeAndEncode(t)},r.ctorParameters=function(){return[{type:n.Store},{type:vt}]},r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(n.Store),t.ɵɵinject(vt))},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root"})],r)}(),fo=function(){},ho={backend:{occ:{endpoints:{asmCustomerSearch:"/assistedservicewebservices/customers/search"}}}},yo=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return h(r,e),r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root",useExisting:A})],r)}(xr),vo=new t.InjectionToken("CustomerSearchPageNormalizer"),Co=function(){function e(e){this.injector=e,this.converters=new Map}return e.prototype.getConverters=function(e){if(!this.converters.has(e)){var t=this.injector.get(e,[]);Array.isArray(t)||console.warn('Converter must be multi-provided, please use "multi: true" for',e.toString()),this.converters.set(e,t)}return this.converters.get(e)},e.prototype.hasConverters=function(e){var t=this.getConverters(e);return Array.isArray(t)&&t.length>0},e.prototype.pipeable=function(e){var t=this;return this.hasConverters(e)?i.map((function(r){return t.convertSource(r,e)})):function(e){return e}},e.prototype.pipeableMany=function(e){var t=this;return this.hasConverters(e)?i.map((function(r){return t.convertMany(r,e)})):function(e){return e}},e.prototype.convert=function(e,t){return this.hasConverters(t)?this.convertSource(e,t):e},e.prototype.convertMany=function(e,t){var r=this;return this.hasConverters(t)&&Array.isArray(e)?e.map((function(e){return r.convertSource(e,t)})):e},e.prototype.convertSource=function(e,t){return this.getConverters(t).reduce((function(t,r){return r.convert(e,t)}),void 0)},e.ctorParameters=function(){return[{type:t.Injector}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(t.INJECTOR))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),So=function(){function e(e,t,r,n,o){var i=this;this.http=e,this.occEndpointsService=t,this.converterService=r,this.config=n,this.baseSiteService=o,this.baseSiteService.getActive().subscribe((function(e){return i.activeBaseSite=e}))}return e.prototype.customerSearch=function(e){var t=N.createHeader("cx-use-csagent-token",!0,new s.HttpHeaders),r=(new s.HttpParams).set("baseSite",this.activeBaseSite).set("sort","byNameAsc");void 0!==e.query&&(r=r.set("query",""+e.query)),void 0!==e.pageSize&&(r=r.set("pageSize",""+e.pageSize));var n=this.occEndpointsService.getRawEndpoint("asmCustomerSearch");return this.http.get(n,{headers:t,params:r}).pipe(this.converterService.pipeable(vo))},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co},{type:yo},{type:Nr}]},e=v([t.Injectable()],e)}(),go=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule],providers:[O(ho),{provide:fo,useClass:So}]})],e)}(),mo=function(){},Eo=new t.InjectionToken("CartNormalizer"),Io=function(){},Ro=function(){},To=function(){},Ao=new t.InjectionToken("ProductNormalizer"),Uo=function(){function e(e){this.converter=e}return e.prototype.convert=function(e,t){var r=this;return void 0===t&&(t=y({},e)),e&&e.entries&&(t.entries=e.entries.map((function(e){return y(y({},e),{product:r.converter.convert(e.product,Ao)})}))),this.removeDuplicatePromotions(e,t),t},e.prototype.removeDuplicatePromotions=function(e,t){e&&e.potentialOrderPromotions&&(t.potentialOrderPromotions=this.removeDuplicateItems(e.potentialOrderPromotions)),e&&e.potentialProductPromotions&&(t.potentialProductPromotions=this.removeDuplicateItems(e.potentialProductPromotions)),e&&e.appliedOrderPromotions&&(t.appliedOrderPromotions=this.removeDuplicateItems(e.appliedOrderPromotions)),e&&e.appliedProductPromotions&&(t.appliedProductPromotions=this.removeDuplicateItems(e.appliedProductPromotions))},e.prototype.removeDuplicateItems=function(e){return e.filter((function(e,t,r){return t===r.map((function(e){return JSON.stringify(e)})).indexOf(JSON.stringify(e))}))},e.ctorParameters=function(){return[{type:Co}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Co))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Po={backend:{occ:{endpoints:{carts:"users/${userId}/carts?fields=carts(DEFAULT,potentialProductPromotions,appliedProductPromotions,potentialOrderPromotions,appliedOrderPromotions,entries(totalPrice(formattedValue),product(images(FULL),stock(FULL)),basePrice(formattedValue,value),updateable),totalPrice(formattedValue),totalItems,totalPriceWithTax(formattedValue),totalDiscounts(value,formattedValue),subTotal(formattedValue),deliveryItemsQuantity,deliveryCost(formattedValue),totalTax(formattedValue, value),pickupItemsQuantity,net,appliedVouchers,productDiscounts(formattedValue),saveTime,user,name)",cart:"users/${userId}/carts/${cartId}?fields=DEFAULT,potentialProductPromotions,appliedProductPromotions,potentialOrderPromotions,appliedOrderPromotions,entries(totalPrice(formattedValue),product(images(FULL),stock(FULL)),basePrice(formattedValue,value),updateable),totalPrice(formattedValue),totalItems,totalPriceWithTax(formattedValue),totalDiscounts(value,formattedValue),subTotal(formattedValue),deliveryItemsQuantity,deliveryCost(formattedValue),totalTax(formattedValue, value),pickupItemsQuantity,net,appliedVouchers,productDiscounts(formattedValue),user",createCart:"users/${userId}/carts?fields=DEFAULT,potentialProductPromotions,appliedProductPromotions,potentialOrderPromotions,appliedOrderPromotions,entries(totalPrice(formattedValue),product(images(FULL),stock(FULL)),basePrice(formattedValue,value),updateable),totalPrice(formattedValue),totalItems,totalPriceWithTax(formattedValue),totalDiscounts(value,formattedValue),subTotal(formattedValue),deliveryItemsQuantity,deliveryCost(formattedValue),totalTax(formattedValue, value),pickupItemsQuantity,net,appliedVouchers,productDiscounts(formattedValue),user",addEntries:"users/${userId}/carts/${cartId}/entries",updateEntries:"users/${userId}/carts/${cartId}/entries/${entryNumber}",removeEntries:"users/${userId}/carts/${cartId}/entries/${entryNumber}",addEmail:"users/${userId}/carts/${cartId}/email",deleteCart:"users/${userId}/carts/${cartId}",cartVoucher:"users/${userId}/carts/${cartId}/vouchers",saveCart:"users/${userId}/carts/${cartId}/save"}}}},Lo=new t.InjectionToken("CartModificationNormalizer"),_o=function(){function e(e,t,r){this.http=e,this.occEndpointsService=t,this.converterService=r}return e.prototype.add=function(e,t,r,n){void 0===n&&(n=1);var o=JSON.stringify({}),i=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"}),a=this.occEndpointsService.getUrl("addEntries",{userId:e,cartId:t},{code:r,qty:n});return this.http.post(a,o,{headers:i}).pipe(this.converterService.pipeable(Lo))},e.prototype.update=function(e,t,r,n,o){var i={};o&&(i={pickupStore:o});var a=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"}),c=this.occEndpointsService.getUrl("updateEntries",{userId:e,cartId:t,entryNumber:r},y({qty:n},i));return this.http.patch(c,{},{headers:a}).pipe(this.converterService.pipeable(Lo))},e.prototype.remove=function(e,t,r){var n=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"}),o=this.occEndpointsService.getUrl("removeEntries",{userId:e,cartId:t,entryNumber:r});return this.http.delete(o,{headers:n})},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),Oo=new t.InjectionToken("CartVoucherNormalizer"),bo=function(){function e(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r}return e.prototype.getCartVoucherEndpoint=function(e,t){return this.occEndpoints.getUrl("cartVoucher",{userId:e,cartId:t})},e.prototype.getHeaders=function(e){var t=new s.HttpHeaders({"Content-Type":"application/json"});return"anonymous"===e&&(t=N.createHeader(k,!0,t)),t},e.prototype.add=function(e,t,r){var n=this.getCartVoucherEndpoint(e,t),a=JSON.stringify({}),c=(new s.HttpParams).set("voucherId",r),u=this.getHeaders(e);return this.http.post(n,a,{headers:u,params:c}).pipe(i.catchError((function(e){return o.throwError(e)})),this.converter.pipeable(Oo))},e.prototype.remove=function(e,t,r){var n=this.getCartVoucherEndpoint(e,t)+"/"+encodeURIComponent(r),s=this.getHeaders(e);return this.http.delete(n,{headers:s}).pipe(i.catchError((function(e){return o.throwError(e)})))},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),wo=function(){function e(e,t,r){this.http=e,this.occEndpointsService=t,this.converterService=r}return e.prototype.loadAll=function(e){return this.http.get(this.occEndpointsService.getUrl("carts",{userId:e})).pipe(i.pluck("carts"),this.converterService.pipeableMany(Eo))},e.prototype.load=function(e,t){return"current"===t?this.loadAll(e).pipe(i.map((function(e){return e?e.find((function(e){return void 0===e.saveTime})):null}))):this.http.get(this.occEndpointsService.getUrl("cart",{userId:e,cartId:t})).pipe(this.converterService.pipeable(Eo))},e.prototype.create=function(e,t,r){var n=JSON.stringify({}),o={};return t&&(o={oldCartId:t}),r&&(o.toMergeCartGuid=r),this.http.post(this.occEndpointsService.getUrl("createCart",{userId:e},o),n).pipe(this.converterService.pipeable(Eo))},e.prototype.delete=function(e,t){var r=new s.HttpHeaders;return"anonymous"===e&&(r=N.createHeader(k,!0,r)),this.http.delete(this.occEndpointsService.getUrl("deleteCart",{userId:e,cartId:t}),{headers:r})},e.prototype.addEmail=function(e,t,r){var n=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});n=N.createHeader(k,!0,n);var o=(new s.HttpParams).set("email",r),i=this.occEndpointsService.getUrl("addEmail",{userId:e,cartId:t});return this.http.put(i,o,{headers:n})},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),Do=new t.InjectionToken("SaveCartNormalizer"),Mo=function(){function e(e,t,r){this.http=e,this.occEndpointsService=t,this.converterService=r}return e.prototype.saveCart=function(e,t,r,n){var o=new s.HttpParams;Boolean(r)&&(o=o.set("saveCartName",r)),Boolean(n)&&(o=o.set("saveCartDescription",n));var i=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});return this.http.patch(this.occEndpointsService.getUrl("saveCart",{userId:e,cartId:t}),o,{headers:i}).pipe(this.converterService.pipeable(Do))},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),Fo=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule],providers:[O(Po),{provide:mo,useClass:wo},{provide:Eo,useExisting:Uo,multi:!0},{provide:Io,useClass:_o},{provide:To,useClass:bo},{provide:Ro,useClass:Mo}]})],e)}(),ko=new t.InjectionToken("OrderNormalizer"),No=function(){function e(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r}return e.prototype.getEndpoint=function(e,t){var r="users/"+e+t;return this.occEndpoints.getEndpoint(r)},e.prototype.placeOrder=function(e,t){var r=this.getEndpoint(e,"/orders"),n=new s.HttpParams({fromString:"cartId="+t+"&fields=FULL"}),o=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});return"anonymous"===e&&(o=N.createHeader(k,!0,o)),this.http.post(r,{},{headers:o,params:n}).pipe(this.converter.pipeable(ko))},e.prototype.loadCheckoutDetails=function(e,t){var r=this.getEndpoint(e,"/carts/")+t,n=new s.HttpParams({fromString:"fields=deliveryAddress(FULL),deliveryMode,paymentInfo(FULL)"});return this.http.get(r,{params:n})},e.prototype.clearCheckoutDeliveryAddress=function(e,t){var r=""+this.getEndpoint(e,"/carts/")+t+"/addresses/delivery";return this.http.delete(r)},e.prototype.clearCheckoutDeliveryMode=function(e,t){var r=""+this.getEndpoint(e,"/carts/")+t+"/deliverymode";return this.http.delete(r)},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),jo=new t.InjectionToken("DeliveryModeNormalizer"),xo=new t.InjectionToken("AddressNormalizer"),$o=new t.InjectionToken("AddressSerializer"),Go=new t.InjectionToken("AddressValidationNormalizer"),Bo=function(){function e(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r}return e.prototype.getCartEndpoint=function(e){var t="users/"+e+"/carts/";return this.occEndpoints.getEndpoint(t)},e.prototype.createAddress=function(e,t,r){return r=this.converter.convert(r,$o),this.http.post(this.getCartEndpoint(e)+t+"/addresses/delivery",r,{headers:(new s.HttpHeaders).set("Content-Type","application/json")}).pipe(this.converter.pipeable(xo))},e.prototype.setAddress=function(e,t,r){return this.http.put(this.getCartEndpoint(e)+t+"/addresses/delivery",{},{params:{addressId:r}})},e.prototype.setMode=function(e,t,r){return this.http.put(this.getCartEndpoint(e)+t+"/deliverymode",{},{params:{deliveryModeId:r}})},e.prototype.getMode=function(e,t){return this.http.get(this.getCartEndpoint(e)+t+"/deliverymode").pipe(this.converter.pipeable(jo))},e.prototype.getSupportedModes=function(e,t){return this.http.get(this.getCartEndpoint(e)+t+"/deliverymodes").pipe(i.pluck("deliveryModes"),this.converter.pipeableMany(jo))},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),Ho=new t.InjectionToken("PaymentDetailsNormalizer"),Vo=new t.InjectionToken("PaymentDetailsSerializer"),Wo=new t.InjectionToken("CardTypeNormalizer"),qo=function(){function e(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r,"undefined"!=typeof DOMParser&&(this.domparser=new DOMParser)}return e.prototype.getCartEndpoint=function(e){var t="users/"+e+"/carts/";return this.occEndpoints.getEndpoint(t)},e.prototype.create=function(e,t,r){var n=this;return r=this.converter.convert(r,Vo),this.getProviderSubInfo(e,t).pipe(i.map((function(e){var t=n.convertToMap(e.mappingLabels.entry);return{url:e.postUrl,parameters:n.getParamsForPaymentProvider(r,e.parameters.entry,t),mappingLabels:t}})),i.mergeMap((function(o){return n.createSubWithProvider(o.url,o.parameters).pipe(i.map((function(e){return n.extractPaymentDetailsFromHtml(e)})),i.mergeMap((function(o){return o.defaultPayment=r.defaultPayment,o.savePaymentInfo=!0,n.createDetailsWithParameters(e,t,o).pipe(n.converter.pipeable(Ho))})))})))},e.prototype.set=function(e,t,r){return this.http.put(this.getCartEndpoint(e)+t+"/paymentdetails",{},{params:{paymentDetailsId:r}})},e.prototype.loadCardTypes=function(){return this.http.get(this.occEndpoints.getEndpoint("cardtypes")).pipe(i.map((function(e){return e.cardTypes})),this.converter.pipeableMany(Wo))},e.prototype.getProviderSubInfo=function(e,t){return this.http.get(this.getCartEndpoint(e)+t+"/payment/sop/request?responseUrl=sampleUrl")},e.prototype.createSubWithProvider=function(e,t){var r=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded",Accept:"text/html"}),n=new s.HttpParams({encoder:new jr});return Object.keys(t).forEach((function(e){n=n.append(e,t[e])})),this.http.post(e,n,{headers:r,responseType:"text"})},e.prototype.createDetailsWithParameters=function(e,t,r){var n=new s.HttpParams({encoder:new jr});Object.keys(r).forEach((function(e){n=n.append(e,r[e])}));var o=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});return this.http.post(this.getCartEndpoint(e)+t+"/payment/sop/response",n,{headers:o})},e.prototype.getParamsForPaymentProvider=function(e,t,r){var n=this.convertToMap(t);return n[r.hybris_account_holder_name]=e.accountHolderName,n[r.hybris_card_type]=e.cardType.code,n[r.hybris_card_number]=e.cardNumber,"true"===r.hybris_combined_expiry_date?n[r.hybris_card_expiry_date]=e.expiryMonth+r.hybris_separator_expiry_date+e.expiryYear:(n[r.hybris_card_expiration_month]=e.expiryMonth,n[r.hybris_card_expiration_year]=e.expiryYear),n[r.hybris_card_cvn]=e.cvn,n[r.hybris_billTo_country]=e.billingAddress.country.isocode,n[r.hybris_billTo_firstname]=e.billingAddress.firstName,n[r.hybris_billTo_lastname]=e.billingAddress.lastName,n[r.hybris_billTo_street1]=e.billingAddress.line1+" "+e.billingAddress.line2,n[r.hybris_billTo_city]=e.billingAddress.town,e.billingAddress.region?n[r.hybris_billTo_region]=e.billingAddress.region.isocodeShort:n[r.hybris_billTo_region]="",n[r.hybris_billTo_postalcode]=e.billingAddress.postalCode,n},e.prototype.extractPaymentDetailsFromHtml=function(e){for(var t=this.domparser.parseFromString(e,"text/xml").getElementsByTagName("form")[0].getElementsByTagName("input"),r={},n=0;t[n];n++){var o=t[n];"{}"!==o.getAttribute("name")&&""!==o.getAttribute("value")&&(r[o.getAttribute("name")]=o.getAttribute("value"))}return r},e.prototype.convertToMap=function(e){return e.reduce((function(e,t){return e[t.key]=t.value,e}),{})},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),zo=function(){},Yo=function(){function e(e){this.converter=e}return e.prototype.convert=function(e,t){var r=this;return void 0===t&&(t=y({},e)),e.entries&&(t.entries=e.entries.map((function(e){return r.convertOrderEntry(e)}))),e.consignments&&(t.consignments=e.consignments.map((function(e){return y(y({},e),{entries:e.entries.map((function(e){return y(y({},e),{orderEntry:r.convertOrderEntry(e.orderEntry)})}))})}))),e.unconsignedEntries&&(t.unconsignedEntries=e.unconsignedEntries.map((function(e){return r.convertOrderEntry(e)}))),t},e.prototype.convertOrderEntry=function(e){return y(y({},e),{product:this.converter.convert(e.product,Ao)})},e.ctorParameters=function(){return[{type:Co}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Co))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Ko=function(){},Zo=function(){},Jo=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule],providers:[{provide:zo,useClass:No},{provide:ko,useExisting:Yo,multi:!0},{provide:Ko,useClass:Bo},{provide:Zo,useClass:qo}]})],e)}(),Qo=new t.InjectionToken("CmsPageNormalizer"),Xo=function(){function r(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r,this.headers=(new s.HttpHeaders).set("Content-Type","application/json")}return r.prototype.load=function(e,t){if(void 0===e.type)return this.http.get(this.occEndpoints.getUrl("page",{id:e.id},{fields:t||"DEFAULT"}),{headers:this.headers}).pipe(this.converter.pipeable(Qo));var r=this.getPagesRequestParams(e);return this.http.get(this.getPagesEndpoint(r,t),{headers:this.headers}).pipe(this.converter.pipeable(Qo))},r.prototype.getPagesEndpoint=function(e,t){return t=t||"DEFAULT",this.occEndpoints.getUrl("pages",{},y({fields:t},e))},r.prototype.getPagesRequestParams=function(t){var r={};return"smartedit-preview"!==t.id&&(r={pageType:t.type},t.type===e.PageType.CONTENT_PAGE?r.pageLabelOrId=t.id:r.code=t.id),r},r.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},r=v([t.Injectable()],r)}(),ei=new t.InjectionToken("CmsComponentNormalizer"),ti=function(){function r(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r,this.headers=(new s.HttpHeaders).set("Content-Type","application/json")}return r.prototype.load=function(e,t){return this.http.get(this.getComponentEndPoint(e,t),{headers:this.headers}).pipe(this.converter.pipeable(ei))},r.prototype.findComponentsByIds=function(e,t,r,n,o,s){void 0===r&&(r="DEFAULT"),void 0===n&&(n=0),void 0===o&&(o=e.length);var a=y(y({},this.getContextParams(t)),this.getPaginationParams(n,o,s));return a.componentIds=e.toString(),this.http.get(this.getComponentsEndpoint(a,r),{headers:this.headers}).pipe(i.pluck("component"),this.converter.pipeableMany(ei))},r.prototype.findComponentsByIdsLegacy=function(e,t,r,n,o,s){void 0===r&&(r="DEFAULT"),void 0===n&&(n=0),void 0===o&&(o=e.length);var a={idList:e},c=y(y({},this.getContextParams(t)),this.getPaginationParams(n,o,s));return this.http.post(this.getComponentsEndpoint(c,r),a,{headers:this.headers}).pipe(i.pluck("component"),this.converter.pipeableMany(ei))},r.prototype.getComponentEndPoint=function(e,t){return this.occEndpoints.getUrl("component",{id:e},this.getContextParams(t))},r.prototype.getComponentsEndpoint=function(e,t){return this.occEndpoints.getUrl("components",{},y({fields:t},e))},r.prototype.getPaginationParams=function(e,t,r){var n={};return void 0!==e&&(n.currentPage=e.toString()),void 0!==t&&(n.pageSize=t.toString()),void 0!==r&&(n.sort=r),n},r.prototype.getContextParams=function(t){var r={};switch(t.type){case e.PageType.PRODUCT_PAGE:r={productCode:t.id};break;case e.PageType.CATEGORY_PAGE:r={categoryCode:t.id};break;case e.PageType.CATALOG_PAGE:r={catalogCode:t.id}}return r},r.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},r=v([t.Injectable()],r)}();(kn=e.DeferLoadingStrategy||(e.DeferLoadingStrategy={})).DEFER="DEFERRED-LOADING",kn.INSTANT="INSTANT-LOADING";var ri=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return h(r,e),r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root",useExisting:A})],r)}(xr),ni=function(){function e(){}return e.prototype.convert=function(e,t){return void 0===t&&(t={}),this.normalizePageData(e,t),this.normalizePageSlotData(e,t),this.normalizePageComponentData(e,t),this.normalizeComponentData(e,t),t},e.prototype.normalizePageData=function(e,t){t.page={loadTime:Date.now(),name:e.name,type:e.typeCode,title:e.title,pageId:e.uid,template:e.template,slots:{},properties:e.properties,label:e.label}},e.prototype.normalizePageSlotData=function(e,t){var r,n;try{for(var o=m(e.contentSlots.contentSlot),i=o.next();!i.done;i=o.next()){var s=i.value;t.page.slots[s.position]={components:[],properties:s.properties}}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e.prototype.normalizePageComponentData=function(e,t){var r,n,o,i;try{for(var s=m(e.contentSlots.contentSlot),a=s.next();!a.done;a=s.next()){var c=a.value;if(c.components.component&&Array.isArray(c.components.component))try{for(var u=(o=void 0,m(c.components.component)),p=u.next();!p.done;p=u.next()){var d=p.value,l={uid:d.uid,typeCode:d.typeCode,properties:d.properties};"CMSFlexComponent"===d.typeCode?l.flexType=d.flexType:"JspIncludeComponent"===d.typeCode?l.flexType=d.uid:l.flexType=d.typeCode,t.page.slots[c.position].components.push(l)}}catch(e){o={error:e}}finally{try{p&&!p.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}},e.prototype.normalizeComponentData=function(e,t){var r,n,o,i;t.components=[];try{for(var s=m(e.contentSlots.contentSlot),a=s.next();!a.done;a=s.next()){var c=a.value;if(c.components.component&&Array.isArray(c.components.component))try{for(var u=(o=void 0,m(c.components.component)),p=u.next();!p.done;p=u.next()){var d=p.value;d.properties&&(d.properties=void 0),t.components.push(d)}}catch(e){o={error:e}}finally{try{p&&!p.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),oi=function(){},ii=function(){},si=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule],providers:[{provide:oi,useClass:Xo},{provide:Qo,useExisting:ni,multi:!0},{provide:ii,useClass:ti}]})],e)}(),ai=function(){function e(e){this.config=e}return e.prototype.convert=function(e,t){return void 0===t&&(t=y({},e)),e.images&&(t.images=this.normalize(e.images)),t},e.prototype.normalize=function(e){var t,r,n={};if(e)try{for(var o=m(e),i=o.next();!i.done;i=o.next()){var s=i.value,a=s.hasOwnProperty("galleryIndex");n.hasOwnProperty(s.imageType)||(n[s.imageType]=a?[]:{});var c=void 0;a&&!n[s.imageType][s.galleryIndex]&&(n[s.imageType][s.galleryIndex]={}),c=a?n[s.imageType][s.galleryIndex]:n[s.imageType];var u=y({},s);u.url=this.normalizeImageUrl(u.url),c[s.format]=u}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},e.prototype.normalizeImageUrl=function(e){return new RegExp(/^(http|data:image|\/\/)/i).test(e)?e:(this.config.backend.media.baseUrl||this.config.backend.occ.baseUrl||"")+e},e.ctorParameters=function(){return[{type:xr}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(xr))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),ci=function(){function e(){}return e.prototype.convert=function(e,t){return void 0===t&&(t=y({},e)),e.productReferences&&(t.productReferences=this.normalize(e.productReferences)),t},e.prototype.normalize=function(e){var t,r,n={};if(e)try{for(var o=m(e),i=o.next();!i.done;i=o.next()){var s=i.value;n.hasOwnProperty(s.referenceType)||(n[s.referenceType]=[]),n[s.referenceType].push(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},e=v([t.Injectable()],e)}(),ui=function(){function e(e){this.converterService=e,this.DEFAULT_TOP_VALUES=6}return e.prototype.convert=function(e,t){var r=this;return void 0===t&&(t={}),t=y(y({},t),e),this.normalizeFacets(t),e.products&&(t.products=e.products.map((function(e){return r.converterService.convert(e,Ao)}))),t},e.prototype.normalizeFacets=function(e){this.normalizeFacetValues(e),this.normalizeUselessFacets(e)},e.prototype.normalizeUselessFacets=function(e){e.facets=e.facets.filter((function(t){return!e.pagination||!e.pagination.totalResults||(!t.hasOwnProperty("visible")||t.visible)&&t.values&&t.values.find((function(t){return t.selected||t.count<e.pagination.totalResults}))}))},e.prototype.normalizeFacetValues=function(e){var t=this;e.facets&&(e.facets=e.facets.map((function(e){var r=e.topValues,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["topValues"]);return n.topValueCount=r?r.length:t.DEFAULT_TOP_VALUES,n})))},e.ctorParameters=function(){return[{type:Co}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Co))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),pi=function(){function e(e){this.converter=e}return e.prototype.convert=function(e,t){var r=this;if(void 0===t&&(t=[]),void 0===t&&(t=y({},e)),e&&e.references)return t=e.references.map((function(e){return y(y({},e),{target:r.converter.convert(e.target,Ao)})}))},e.ctorParameters=function(){return[{type:Co}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Co))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),di=function(){function e(e){this.config=e}return e.prototype.convert=function(e,t){return void 0===t&&(t=y({},e)),e.name&&(t.name=this.normalize(e.name),t.nameHtml=e.name),t},e.prototype.normalize=function(e){return e.replace(/<[^>]*>/g,"")},e.ctorParameters=function(){return[{type:xr}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(xr))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),li=new t.InjectionToken("ProductReferencesListNormalizer"),fi=function(){function e(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r}return e.prototype.load=function(e,t,r){return this.http.get(this.getEndpoint(e,t,r)).pipe(this.converter.pipeable(li))},e.prototype.getEndpoint=function(e,t,r){return this.occEndpoints.getUrl("productReferences",{productCode:e},{referenceType:t,pageSize:r})},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),hi=new t.InjectionToken("ProductReviewNormalizer"),yi=new t.InjectionToken("ProductReviewSerializer"),vi=function(){function e(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r}return e.prototype.load=function(e,t){return this.http.get(this.getEndpoint(e,t)).pipe(i.pluck("reviews"),this.converter.pipeableMany(hi))},e.prototype.post=function(e,t){t=this.converter.convert(t,yi);var r=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"}),n=new URLSearchParams;return n.append("headline",t.headline),n.append("comment",t.comment),n.append("rating",t.rating.toString()),n.append("alias",t.alias),this.http.post(this.getEndpoint(e),n.toString(),{headers:r})},e.prototype.getEndpoint=function(e,t){return this.occEndpoints.getUrl("productReviews",{productCode:e},{maxCount:t})},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),Ci=new t.InjectionToken("ProductSearchPageNormalizer"),Si=new t.InjectionToken("ProductSuggestionNormalizer"),gi={pageSize:20},mi=function(){function e(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r}return e.prototype.search=function(e,t){return void 0===t&&(t=gi),this.http.get(this.getSearchEndpoint(e,t)).pipe(this.converter.pipeable(Ci))},e.prototype.loadSuggestions=function(e,t){return void 0===t&&(t=3),this.http.get(this.getSuggestionEndpoint(e,t.toString())).pipe(i.pluck("suggestions"),this.converter.pipeableMany(Si))},e.prototype.getSearchEndpoint=function(e,t){return this.occEndpoints.getUrl("productSearch",{},{query:e,pageSize:t.pageSize,currentPage:t.currentPage,sort:t.sortCode})},e.prototype.getSuggestionEndpoint=function(e,t){return this.occEndpoints.getUrl("productSuggestions",{},{term:e,max:t})},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}();function Ei(e){var t=e.map((function(e){return"string"==typeof e?Ii(e):e}));return function e(t){return Object.keys(t).map((function(r){var n=e(t[r]);return n?r+"("+n+")":r})).join(",")}(function e(t){void 0===t&&(t={});var r=Object.keys(t);r.includes("FULL")?(delete t.DEFAULT,delete t.BASIC):r.includes("DEFAULT")&&delete t.BASIC;return Object.keys(t).forEach((function(r){t[r]=e(t[r])})),t}(T.apply(void 0,I([{}],t))))}function Ii(e,t){void 0===t&&(t=0);for(var r={},n=t;n<e.length;){if(","===e[n])n>t&&(r[e.substr(t,n-t)]={}),t=n+1;else if("("===e[n]){var o=Ii(e,n+1);if(!Array.isArray(o))return r;r[e.substr(t,n-t)]=o[0],n=(t=o[1])-1}else if(")"===e[n])return n>t&&(r[e.substr(t,n-t)]={}),[r,n+1];n++}return t<e.length&&(r[e.substr(t,n-t)]={}),r}function Ri(e,t){return function e(t,r){if(!R(t))return t;var n=Object.keys(r);if(0===n.length||n.find((function(e){return"BASIC"===e||"DEFAULT"===e||"FULL"===e})))return t;var o={};return n.forEach((function(n){t.hasOwnProperty(n)&&(o[n]=e(t[n],r[n]))})),o}(e,"string"==typeof t?Ii(t):t)}var Ti,Ai=function(){function e(e){this.http=e,this.FIELDS_PARAM="fields"}return e.prototype.getOptimalUrlGroups=function(e){var t,r,n,o,i={};try{for(var s=m(e),a=s.next();!a.done;a=s.next()){var c=a.value,u=E(this.splitFields(c.url),2),p=u[0],d=u[1];i[p]||(i[p]={}),c.fields=d?Ii(d):{},i[p][c.scopedData.scope]=c}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}var l={};try{for(var f=m(Object.entries(i)),h=f.next();!h.done;h=f.next()){var y=E(h.value,2),v=y[0],C=y[1];l[this.getUrlWithFields(v,Object.values(C).map((function(e){return e.fields})))]=C}}catch(e){n={error:e}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}return l},e.prototype.splitFields=function(e){var t=this,r=E(e.split("?"),2),n=r[0],o=r[1],i={};o&&o.split("&").map((function(e){var t=e.split("=");i[t[0]]=t[1]}));var s=Object.keys(i).sort().reduce((function(e,r){return r!==t.FIELDS_PARAM&&e.push(i[r]?r+"="+i[r]:r),e}),[]).join("&");return[s?n+"?"+s:n,i[this.FIELDS_PARAM]]},e.prototype.getUrlWithFields=function(e,t){var r=Ei(t);return r&&(e+=e.includes("?")?"&":"?",e+=this.FIELDS_PARAM+"="+r),e},e.ctorParameters=function(){return[{type:s.HttpClient}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(s.HttpClient))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Ui=function(){function e(e,t){this.http=e,this.occFields=t}return e.prototype.scopedDataLoad=function(e,t){var r=this,n=[];t||(t=function(e){return r.http.get(e)});var o=this.occFields.getOptimalUrlGroups(e);return Object.entries(o).forEach((function(e){var r=E(e,2),o=r[0],s=r[1],a=Object.values(s);if(1===a.length)n.push(y(y({},a[0].scopedData),{data$:t(o)}));else{var c=t(o).pipe(i.shareReplay(1));a.forEach((function(e){n.push(y(y({},e.scopedData),{data$:c.pipe(i.map((function(t){return Ri(t,e.fields)})))}))}))}})),n},e.ctorParameters=function(){return[{type:s.HttpClient},{type:Ai}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(s.HttpClient),t.ɵɵinject(Ai))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Pi=function(){function e(e,t,r,n){this.http=e,this.occEndpoints=t,this.converter=r,this.requestsOptimizer=n}return e.prototype.load=function(e,t){return this.http.get(this.getEndpoint(e,t)).pipe(this.converter.pipeable(Ao))},e.prototype.loadMany=function(e){var t=this,r=e.map((function(e){return{scopedData:e,url:t.getEndpoint(e.code,e.scope)}}));return this.requestsOptimizer.scopedDataLoad(r).map((function(e){return y(y({},e),{data$:e.data$.pipe(t.converter.pipeable(Ao))})}))},e.prototype.getEndpoint=function(e,t){return this.occEndpoints.getUrl("product",{productCode:e},void 0,t)},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co},{type:Ui}]},e=v([t.Injectable()],e)}(),Li=function(){},_i=function(){},Oi=function(){},bi=function(){};(Ti=e.ProductScope||(e.ProductScope={})).LIST="list",Ti.DETAILS="details",Ti.ATTRIBUTES="attributes",Ti.VARIANTS="variants";var wi={backend:{occ:{endpoints:{product:{default:"products/${productCode}?fields=DEFAULT,averageRating,images(FULL),classifications,manufacturer,numberOfReviews,categories(FULL),baseOptions,baseProduct,variantOptions,variantType",list:"products/${productCode}?fields=code,name,summary,price(formattedValue),images(DEFAULT,galleryIndex)",details:"products/${productCode}?fields=averageRating,stock(DEFAULT),description,availableForPickup,code,url,price(DEFAULT),numberOfReviews,manufacturer,categories(FULL),priceRange,multidimensional,configuratorType,configurable,tags,images(FULL)",attributes:"products/${productCode}?fields=classifications",variants:"products/${productCode}?fields=name,purchasable,baseOptions(DEFAULT),baseProduct,variantOptions(DEFAULT),variantType"},productReviews:"products/${productCode}/reviews",productReferences:"products/${productCode}/references?fields=DEFAULT,references(target(images(FULL)))",productSearch:"products/search?fields=products(code,name,summary,price(FULL),images(DEFAULT),stock(FULL),averageRating,variantOptions),facets,breadcrumbs,pagination(DEFAULT),sorts(DEFAULT),freeTextSearch,currentQuery",productSuggestions:"products/suggestions"}},loadingScopes:{product:{details:{include:[e.ProductScope.LIST,e.ProductScope.VARIANTS]}}}}},Di=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule],providers:[O(wi),{provide:Li,useClass:Pi},{provide:Ao,useExisting:ai,multi:!0},{provide:Ao,useExisting:di,multi:!0},{provide:_i,useClass:fi},{provide:li,useExisting:pi,multi:!0},{provide:bi,useClass:mi},{provide:Ci,useExisting:ui,multi:!0},{provide:Oi,useClass:vi}]})],e)}(),Mi=new t.InjectionToken("LanguageNormalizer"),Fi=new t.InjectionToken("CurrencyNormalizer"),ki=new t.InjectionToken("CountryNormalizer"),Ni=new t.InjectionToken("RegionNormalizer"),ji=function(){function e(e,t,r){this.http=e,this.occEndpointsService=t,this.converterService=r}return e.prototype.loadLanguages=function(){return this.http.get(this.occEndpointsService.getUrl("languages")).pipe(i.map((function(e){return e.languages})),this.converterService.pipeableMany(Mi))},e.prototype.loadCurrencies=function(){return this.http.get(this.occEndpointsService.getUrl("currencies")).pipe(i.map((function(e){return e.currencies})),this.converterService.pipeableMany(Fi))},e.prototype.loadCountries=function(e){return this.http.get(this.occEndpointsService.getUrl("countries",void 0,e?{type:e}:void 0)).pipe(i.map((function(e){return e.countries})),this.converterService.pipeableMany(ki))},e.prototype.loadRegions=function(e){return this.http.get(this.occEndpointsService.getUrl("regions",{isoCode:e})).pipe(i.map((function(e){return e.regions})),this.converterService.pipeableMany(Ni))},e.prototype.loadBaseSite=function(){var e=this.occEndpointsService.getBaseEndpoint().split("/"),t=e.pop(),r=e.join("/")+"/basesites",n=new s.HttpParams({fromString:"fields=FULL"});return this.http.get(r,{params:n}).pipe(i.map((function(e){return e.baseSites.find((function(e){return e.uid===t}))})))},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),xi=function(){},$i={backend:{occ:{endpoints:{languages:"languages",currencies:"currencies",countries:"countries",regions:"countries/${isoCode}/regions?fields=regions(name,isocode,isocodeShort)"}}}},Gi=function(){function e(e,t,r){this.store=e,this.config=r,this.sessionStorage=t.sessionStorage}return e.prototype.getAll=function(){var e=this;return this.store.pipe(n.select(_r),i.tap((function(t){t||e.store.dispatch(new nr)})),i.filter((function(e){return Boolean(e)})))},e.prototype.getActive=function(){return this.store.pipe(n.select(Pr),i.filter((function(e){return Boolean(e)})))},e.prototype.setActive=function(e){var t=this;return this.store.pipe(n.select(Pr),i.take(1)).subscribe((function(r){r!==e&&t.store.dispatch(new sr(e))}))},e.prototype.initialize=function(){var e;if(this.getActive().subscribe((function(t){return e=t})).unsubscribe(),!e){var t=this.sessionStorage&&this.sessionStorage.getItem("currency");t&&Vt(this.config,"currency").includes(t)?this.setActive(t):this.setActive(Wt(this.config,"currency"))}},e.ctorParameters=function(){return[{type:n.Store},{type:St},{type:zt}]},e=v([t.Injectable()],e)}(),Bi=function(){function e(e,t,r){this.store=e,this.config=r,this.sessionStorage=t.sessionStorage}return e.prototype.getAll=function(){var e=this;return this.store.pipe(n.select(Fr),i.tap((function(t){t||e.store.dispatch(new dr)})),i.filter((function(e){return Boolean(e)})))},e.prototype.getActive=function(){return this.store.pipe(n.select(Mr),i.filter((function(e){return Boolean(e)})))},e.prototype.setActive=function(e){var t=this;return this.store.pipe(n.select(Mr),i.take(1)).subscribe((function(r){r!==e&&t.store.dispatch(new hr(e))}))},e.prototype.initialize=function(){var e;if(this.getActive().subscribe((function(t){return e=t})).unsubscribe(),!e){var t=this.sessionStorage&&this.sessionStorage.getItem("language");t&&Vt(this.config,"language").includes(t)?this.setActive(t):this.setActive(Wt(this.config,"language"))}},e.ctorParameters=function(){return[{type:n.Store},{type:St},{type:zt}]},e=v([t.Injectable()],e)}(),Hi=function(){function e(e,t,r,n){var o=this;this.languageService=e,this.currencyService=t,this.occEndpoints=r,this.config=n,this.activeLang=Wt(this.config,"language"),this.activeCurr=Wt(this.config,"currency"),this.languageService.getActive().subscribe((function(e){return o.activeLang=e})),this.currencyService.getActive().subscribe((function(e){o.activeCurr=e}))}return e.prototype.intercept=function(e,t){return e.url.includes(this.occEndpoints.getBaseEndpoint())&&(e=e.clone({setParams:{lang:this.activeLang,curr:this.activeCurr}})),t.handle(e)},e.ctorParameters=function(){return[{type:Bi},{type:Gi},{type:$r},{type:zt}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Bi),t.ɵɵinject(Gi),t.ɵɵinject($r),t.ɵɵinject(zt))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Vi=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule],providers:[O($i),{provide:xi,useClass:ji},{provide:s.HTTP_INTERCEPTORS,useExisting:Hi,multi:!0}]})],e)}(),Wi=function(){},qi={backend:{occ:{endpoints:{store:"stores/${storeId}?fields=FULL",stores:"stores?fields=stores(name,displayName,formattedDistance,openingHours(weekDayOpeningList(FULL),specialDayOpeningList(FULL)),geoPoint(latitude,longitude),address(line1,line2,town,region(FULL),postalCode,phone,country,email), features),pagination(DEFAULT),sorts(DEFAULT)",storescounts:"stores/storescounts"}}}},zi=function(){function e(e){this.adapter=e}return e.prototype.search=function(e,t,r,n){return this.adapter.search(e,t,r,n)},e.prototype.getCounts=function(){return this.adapter.loadCounts()},e.prototype.get=function(e){return this.adapter.load(e)},e.ctorParameters=function(){return[{type:Wi}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Wi))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Yi=new t.InjectionToken("PointOfServiceNormalizer"),Ki=new t.InjectionToken("StoreFinderSearchPageNormalizer"),Zi=new t.InjectionToken("StoreCountNormalizer"),Ji=function(){function e(e,t,r){this.http=e,this.occEndpointsService=t,this.converterService=r}return e.prototype.search=function(e,t,r,n){return this.callOccFindStores(e,t,r,n).pipe(this.converterService.pipeable(Ki))},e.prototype.loadCounts=function(){return this.http.get(this.occEndpointsService.getUrl("storescounts")).pipe(i.map((function(e){return e.countriesAndRegionsStoreCount})),this.converterService.pipeableMany(Zi))},e.prototype.load=function(e){return this.http.get(this.occEndpointsService.getUrl("store",{storeId:e})).pipe(this.converterService.pipeable(Yi))},e.prototype.callOccFindStores=function(e,t,r,n){var o={};return r?(o.longitude=String(r.longitude),o.latitude=String(r.latitude),o.radius=String(n)):o.query=e,t.pageSize&&(o.pageSize=String(t.pageSize)),t.currentPage&&(o.currentPage=String(t.currentPage)),t.sort&&(o.sort=t.sort),this.http.get(this.occEndpointsService.getUrl("stores",void 0,o))},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),Qi=function(){function e(){}return e=v([t.NgModule({providers:[O(qi),{provide:Wi,useClass:Ji}]})],e)}(),Xi=new t.InjectionToken("AnonymousConsentNormalizer"),es=new t.InjectionToken("ConsentTemplateNormalizer"),ts=function(){function e(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r}return e.prototype.loadAnonymousConsentTemplates=function(){var e=this.occEndpoints.getUrl("anonymousConsentTemplates");return this.http.get(e).pipe(i.catchError((function(e){return o.throwError(e)})),i.map((function(e){return e.consentTemplates})),this.converter.pipeableMany(es))},e.prototype.loadAnonymousConsents=function(){var e=this.occEndpoints.getUrl("anonymousConsentTemplates");return this.http.head(e,{observe:"response"}).pipe(i.catchError((function(e){return o.throwError(e)})),i.map((function(e){return e.headers.get("X-Anonymous-Consents")})),this.converter.pipeable(Xi))},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),rs=function(){function e(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r}return e.prototype.loadAll=function(e){var t=this.occEndpoints.getUrl("addresses",{userId:e}),r=new s.HttpHeaders({"Content-Type":"application/json"});return this.http.get(t,{headers:r}).pipe(i.catchError((function(e){return o.throwError(e)})),i.map((function(e){return e.addresses})),this.converter.pipeableMany(xo))},e.prototype.add=function(e,t){var r=this.occEndpoints.getUrl("addresses",{userId:e}),n=new s.HttpHeaders({"Content-Type":"application/json"});return t=this.converter.convert(t,$o),this.http.post(r,t,{headers:n}).pipe(i.catchError((function(e){return o.throwError(e)})))},e.prototype.update=function(e,t,r){var n=this.occEndpoints.getUrl("addressDetail",{userId:e,addressId:t}),a=new s.HttpHeaders({"Content-Type":"application/json"});return r=this.converter.convert(r,$o),this.http.patch(n,r,{headers:a}).pipe(i.catchError((function(e){return o.throwError(e)})))},e.prototype.verify=function(e,t){var r=this.occEndpoints.getUrl("addressVerification",{userId:e}),n=new s.HttpHeaders({"Content-Type":"application/json"});return"anonymous"===e&&(n=N.createHeader(k,!0,n)),t=this.converter.convert(t,$o),this.http.post(r,t,{headers:n}).pipe(i.catchError((function(e){return o.throwError(e)})),this.converter.pipeable(Go))},e.prototype.delete=function(e,t){var r=this.occEndpoints.getUrl("addressDetail",{userId:e,addressId:t}),n=new s.HttpHeaders({"Content-Type":"application/json"});return this.http.delete(r,{headers:n}).pipe(i.catchError((function(e){return o.throwError(e)})))},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),ns=function(){function e(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r}return e.prototype.loadConsents=function(e){var t=this.occEndpoints.getUrl("consentTemplates",{userId:e}),r=new s.HttpHeaders({"Cache-Control":"no-cache"});return this.http.get(t,{headers:r}).pipe(i.catchError((function(e){return o.throwError(e)})),i.map((function(e){return e.consentTemplates})),this.converter.pipeableMany(es))},e.prototype.giveConsent=function(e,t,r){var n=this.occEndpoints.getUrl("consents",{userId:e}),a=(new s.HttpParams).set("consentTemplateId",t).set("consentTemplateVersion",r.toString()),c=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache"});return this.http.post(n,a,{headers:c}).pipe(i.catchError((function(e){return o.throwError(e)})),this.converter.pipeable(es))},e.prototype.withdrawConsent=function(e,t){var r=new s.HttpHeaders({"Cache-Control":"no-cache"}),n=this.occEndpoints.getUrl("consentDetail",{userId:e,consentId:t});return this.http.delete(n,{headers:r})},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),os=new t.InjectionToken("OrderHistoryNormalizer"),is=new t.InjectionToken("ConsignmentTrackingNormalizer"),ss=new t.InjectionToken("OrderReturnRequestNormalizer"),as=new t.InjectionToken("OrderReturnRequestInputSerializer"),cs=new t.InjectionToken("OrderReturnsNormalizer"),us=function(){function e(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r}return e.prototype.load=function(e,t){var r=this.occEndpoints.getUrl("orderDetail",{userId:e,orderId:t}),n=new s.HttpHeaders;return"anonymous"===e&&(n=N.createHeader(k,!0,n)),this.http.get(r,{headers:n}).pipe(this.converter.pipeable(ko))},e.prototype.loadHistory=function(e,t,r,n){var o={};t&&(o.pageSize=t.toString()),r&&(o.currentPage=r.toString()),n&&(o.sort=n.toString());var i=this.occEndpoints.getUrl("orderHistory",{userId:e},o);return this.http.get(i).pipe(this.converter.pipeable(os))},e.prototype.getConsignmentTracking=function(e,t,r){void 0===r&&(r="current");var n=this.occEndpoints.getUrl("consignmentTracking",{userId:r,orderCode:e,consignmentCode:t});return this.http.get(n).pipe(this.converter.pipeable(is))},e.prototype.cancel=function(e,t,r){var n=this.occEndpoints.getUrl("cancelOrder",{userId:e,orderId:t}),a=new s.HttpHeaders({"Content-Type":"application/json"});return this.http.post(n,r,{headers:a}).pipe(i.catchError((function(e){return o.throwError(e)})))},e.prototype.createReturnRequest=function(e,t){var r=this.occEndpoints.getUrl("returnOrder",{userId:e}),n=new s.HttpHeaders({"Content-Type":"application/json"});return t=this.converter.convert(t,as),this.http.post(r,t,{headers:n}).pipe(i.catchError((function(e){return o.throwError(e)})),this.converter.pipeable(ss))},e.prototype.loadReturnRequestList=function(e,t,r,n){var o={};t&&(o.pageSize=t.toString()),r&&(o.currentPage=r.toString()),n&&(o.sort=n.toString());var i=this.occEndpoints.getUrl("orderReturns",{userId:e},o);return this.http.get(i).pipe(this.converter.pipeable(cs))},e.prototype.loadReturnRequestDetail=function(e,t){var r=this.occEndpoints.getUrl("orderReturnDetail",{userId:e,returnRequestCode:t});return this.http.get(r).pipe(this.converter.pipeable(ss))},e.prototype.cancelReturnRequest=function(e,t,r){var n=this.occEndpoints.getUrl("cancelReturn",{userId:e,returnRequestCode:t}),a=new s.HttpHeaders({"Content-Type":"application/json"});return this.http.patch(n,r,{headers:a}).pipe(i.catchError((function(e){return o.throwError(e)})))},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),ps=function(){function e(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r}return e.prototype.loadAll=function(e){var t=this.occEndpoints.getUrl("paymentDetailsAll",{userId:e})+"?saved=true",r=new s.HttpHeaders({"Content-Type":"application/json"});return this.http.get(t,{headers:r}).pipe(i.catchError((function(e){return o.throwError(e)})),i.map((function(e){return e.payments})),this.converter.pipeableMany(Ho))},e.prototype.delete=function(e,t){var r=this.occEndpoints.getUrl("paymentDetail",{userId:e,paymentDetailId:t}),n=new s.HttpHeaders({"Content-Type":"application/json"});return this.http.delete(r,{headers:n}).pipe(i.catchError((function(e){return o.throwError(e)})))},e.prototype.setDefault=function(e,t){var r=this.occEndpoints.getUrl("paymentDetail",{userId:e,paymentDetailId:t}),n=new s.HttpHeaders({"Content-Type":"application/json"});return this.http.patch(r,{billingAddress:{titleCode:"mr"},defaultPayment:!0},{headers:n}).pipe(i.catchError((function(e){return o.throwError(e)})))},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),ds=new t.InjectionToken("UserNormalizer"),ls=new t.InjectionToken("UserSerializer"),fs=new t.InjectionToken("UserSignUpSerializer"),hs=new t.InjectionToken("TitleNormalizer"),ys=function(){function e(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r}return e.prototype.load=function(e){var t=this.occEndpoints.getUrl("user",{userId:e});return this.http.get(t).pipe(this.converter.pipeable(ds))},e.prototype.update=function(e,t){var r=this.occEndpoints.getUrl("user",{userId:e});return t=this.converter.convert(t,ls),this.http.patch(r,t)},e.prototype.register=function(e){var t=this.occEndpoints.getUrl("userRegister"),r=new s.HttpHeaders({"Content-Type":"application/json"});return r=N.createHeader(k,!0,r),e=this.converter.convert(e,fs),this.http.post(t,e,{headers:r}).pipe(this.converter.pipeable(ds))},e.prototype.registerGuest=function(e,t){var r=this.occEndpoints.getUrl("userRegister"),n=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});n=N.createHeader(k,!0,n);var o=(new s.HttpParams).set("guid",e).set("password",t);return this.http.post(r,o,{headers:n}).pipe(this.converter.pipeable(ds))},e.prototype.requestForgotPasswordEmail=function(e){var t=this.occEndpoints.getUrl("userForgotPassword"),r=(new s.HttpParams).set("userId",e),n=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});return n=N.createHeader(k,!0,n),this.http.post(t,r,{headers:n})},e.prototype.resetPassword=function(e,t){var r=this.occEndpoints.getUrl("userResetPassword"),n=new s.HttpHeaders({"Content-Type":"application/json"});return n=N.createHeader(k,!0,n),this.http.post(r,{token:e,newPassword:t},{headers:n})},e.prototype.updateEmail=function(e,t,r){var n=this.occEndpoints.getUrl("userUpdateLoginId",{userId:e}),o=(new s.HttpParams).set("password",t).set("newLogin",r),i=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});return this.http.put(n,o,{headers:i})},e.prototype.updatePassword=function(e,t,r){var n=this.occEndpoints.getUrl("userUpdatePassword",{userId:e}),o=(new s.HttpParams).set("old",t).set("new",r),i=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});return this.http.put(n,o,{headers:i})},e.prototype.remove=function(e){var t=this.occEndpoints.getUrl("user",{userId:e});return this.http.delete(t)},e.prototype.loadTitles=function(){var e=this.occEndpoints.getUrl("titles");return this.http.get(e).pipe(i.map((function(e){return e.titles})),this.converter.pipeableMany(hs))},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),vs=function(){},Cs=function(){},Ss=function(){},gs=function(){},ms=new t.InjectionToken("ProductInterestsNormalizer"),Es=function(){},Is=function(){},Rs=function(){},Ts=function(){},As=function(){},Us=new t.InjectionToken("CustomerCouponSearchResultNormalizer"),Ps=function(){function e(e,t,r){this.http=e,this.occEndpoints=t,this.converter=r}return e.prototype.getCustomerCoupons=function(e,t,r,n){if("anonymous"===e)return o.of({});var i=this.occEndpoints.getUrl("customerCoupons",{userId:e}),a=(new s.HttpParams).set("sort",n||"startDate:asc");t&&(a=a.set("pageSize",t.toString())),r&&(a=a.set("currentPage",r.toString()));var c=this.newHttpHeader();return this.http.get(i,{headers:c,params:a}).pipe(this.converter.pipeable(Us))},e.prototype.turnOffNotification=function(e,t){var r=this.occEndpoints.getUrl("couponNotification",{userId:e,couponCode:t}),n=this.newHttpHeader();return this.http.delete(r,{headers:n})},e.prototype.turnOnNotification=function(e,t){var r=this.occEndpoints.getUrl("couponNotification",{userId:e,couponCode:t}),n=this.newHttpHeader();return this.http.post(r,{headers:n})},e.prototype.claimCustomerCoupon=function(e,t){var r=this.occEndpoints.getUrl("claimCoupon",{userId:e,couponCode:t}),n=this.newHttpHeader();return this.http.post(r,{headers:n})},e.prototype.newHttpHeader=function(){return new s.HttpHeaders({"Content-Type":"application/json"})},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:Co}]},e=v([t.Injectable()],e)}(),Ls=function(){function e(e){this.anonymousConsentsService=e}return e.prototype.convert=function(e,t){return void 0===t&&(t=[]),t=this.anonymousConsentsService.decodeAndDeserialize(e)},e.ctorParameters=function(){return[{type:lo}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(lo))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),_s=function(){function e(e){this.converter=e}return e.prototype.convert=function(e,t){var r=this;return void 0===t&&(t=y({},e)),e.returnEntries&&(t.returnEntries=e.returnEntries.map((function(e){return y(y({},e),{orderEntry:r.convertOrderEntry(e.orderEntry)})}))),t},e.prototype.convertOrderEntry=function(e){return y(y({},e),{product:this.converter.convert(e.product,Ao)})},e.ctorParameters=function(){return[{type:Co}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Co))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Os=function(){function e(e){this.converter=e}return e.prototype.convert=function(e,t){var r=this;return void 0===t&&(t=y({},e)),e&&e.results&&(t.results=e.results.map((function(e){return y(y({},e),{product:r.converter.convert(e.product,Ao)})}))),t},e.ctorParameters=function(){return[{type:Co}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Co))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),bs={backend:{occ:{endpoints:{user:"users/${userId}",userRegister:"users",userForgotPassword:"forgottenpasswordtokens",userResetPassword:"resetpassword",userUpdateLoginId:"users/${userId}/login",userUpdatePassword:"users/${userId}/password",titles:"titles",paymentDetailsAll:"users/${userId}/paymentdetails",paymentDetail:"users/${userId}/paymentdetails/${paymentDetailId}",orderHistory:"users/${userId}/orders",orderDetail:"users/${userId}/orders/${orderId}?fields=FULL",anonymousConsentTemplates:"users/anonymous/consenttemplates",consentTemplates:"users/${userId}/consenttemplates",consents:"users/${userId}/consents",consentDetail:"users/${userId}/consents/${consentId}",addresses:"users/${userId}/addresses",addressDetail:"users/${userId}/addresses/${addressId}",addressVerification:"users/${userId}/addresses/verification",consignmentTracking:"users/${userId}/orders/${orderCode}/consignments/${consignmentCode}/tracking",customerCoupons:"users/${userId}/customercoupons",claimCoupon:"users/${userId}/customercoupons/${couponCode}/claim",couponNotification:"users/${userId}/customercoupons/${couponCode}/notification",notificationPreference:"users/${userId}/notificationpreferences",productInterests:"users/${userId}/productinterests",getProductInterests:"users/${userId}/productinterests?fields=sorts,pagination,results(productInterestEntry,product(code))",cancelOrder:"users/${userId}/orders/${orderId}/cancellation",returnOrder:"users/${userId}/orderReturns?fields=BASIC,returnEntries(BASIC,refundAmount(formattedValue),orderEntry(basePrice(formattedValue),product(name,code,baseOptions,images(DEFAULT,galleryIndex)))),deliveryCost(formattedValue),totalPrice(formattedValue),subTotal(formattedValue)",orderReturns:"users/${userId}/orderReturns?fields=BASIC",orderReturnDetail:"users/${userId}/orderReturns/${returnRequestCode}?fields=BASIC,returnEntries(BASIC,refundAmount(formattedValue),orderEntry(basePrice(formattedValue),product(name,code,baseOptions,images(DEFAULT,galleryIndex)))),deliveryCost(formattedValue),totalPrice(formattedValue),subTotal(formattedValue)",cancelReturn:"users/${userId}/orderReturns/${returnRequestCode}"}}}},ws=new s.HttpHeaders({"Content-Type":"application/json"}),Ds=function(){function e(e,t,r,n){this.http=e,this.occEndpoints=t,this.config=r,this.converter=n}return e.prototype.getInterests=function(e,t,r,n,a,c){var u=(new s.HttpParams).set("sort",n||"name:asc");return t&&(u=u.set("pageSize",t.toString())),r&&(u=u.set("currentPage",r.toString())),a&&(u=u.set("productCode",a)),c&&(u=u.set("notificationType",c.toString())),this.http.get(this.occEndpoints.getUrl("getProductInterests",{userId:e}),{headers:ws,params:u}).pipe(this.converter.pipeable(ms),i.catchError((function(e){return o.throwError(e)})))},e.prototype.removeInterest=function(e,t){var r=this,n=[];return t.productInterestEntry.forEach((function(a){var c=(new s.HttpParams).set("productCode",t.product.code).set("notificationType",a.interestType);n.push(r.http.delete(r.occEndpoints.getUrl("productInterests",{userId:e}),{params:c}).pipe(i.catchError((function(e){return o.throwError(e)}))))})),o.forkJoin(n)},e.prototype.addInterest=function(e,t,r){var n=(new s.HttpParams).set("productCode",t).set("notificationType",r.toString());return this.http.post(this.occEndpoints.getUrl("productInterests",{userId:e}),{},{headers:ws,params:n}).pipe(i.catchError((function(e){return o.throwError(e)})))},e.ctorParameters=function(){return[{type:s.HttpClient},{type:$r},{type:xr},{type:Co}]},e=v([t.Injectable()],e)}(),Ms=new t.InjectionToken("NotificationPreferenceSerializer"),Fs=new t.InjectionToken("NotificationPreferenceNormalizer"),ks=function(){function e(e){this.adapter=e}return e.prototype.loadAll=function(e){return this.adapter.loadAll(e)},e.prototype.update=function(e,t){return this.adapter.update(e,t)},e.ctorParameters=function(){return[{type:Is}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Is))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Ns=new s.HttpHeaders({"Content-Type":"application/json"}),js=function(){function e(e,t,r){this.http=e,this.converter=t,this.occEndpoints=r}return e.prototype.loadAll=function(e){return this.http.get(this.occEndpoints.getUrl("notificationPreference",{userId:e}),{headers:Ns}).pipe(i.map((function(e){return e.preferences})),this.converter.pipeableMany(Fs),i.catchError((function(e){return o.throwError(e)})))},e.prototype.update=function(e,t){return t=this.converter.convert(t,Ms),this.http.patch(this.occEndpoints.getUrl("notificationPreference",{userId:e}),{preferences:t},{headers:Ns}).pipe(i.catchError((function(e){return o.throwError(e)})))},e.ctorParameters=function(){return[{type:s.HttpClient},{type:Co},{type:$r}]},e=v([t.Injectable()],e)}(),xs=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule],providers:[O(bs),{provide:As,useClass:ys},{provide:Cs,useClass:rs},{provide:Ss,useClass:ns},{provide:vs,useClass:ts},{provide:Ts,useClass:ps},{provide:Rs,useClass:us},{provide:gs,useClass:Ps},{provide:Is,useClass:js},{provide:Es,useClass:Ds},{provide:ms,useExisting:Os,multi:!0},{provide:ss,useExisting:_s,multi:!0},{provide:Xi,useExisting:Ls,multi:!0}]})],e)}(),$s=function(){function e(){this.EXTRACT_JAVA_REGEXP_MODIFIERS=/^(\(\?([a-z]+)\))?(.*)/}return e.prototype.toJsRegExp=function(e){var r=e.match(this.EXTRACT_JAVA_REGEXP_MODIFIERS);if(!r)return null;var n=E(r,4),o=n[2],i=n[3];try{return new RegExp(i,o)}catch(r){return t.isDevMode()&&console.warn("WARNING: Could not convert Java regexp into Javascript. Original regexp: "+e+" \nMessage: "+r),null}},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Gs=new t.InjectionToken("ConfigInitializer"),Bs=new t.InjectionToken("CONFIG_INITIALIZER_FORROOT_GUARD"),Hs=new t.InjectionToken("SERVER_REQUEST_URL"),Vs=new t.InjectionToken("SERVER_REQUEST_ORIGIN"),Ws=function(){function e(e){this.javaRegExpConverter=e}return e.prototype.fromOccBaseSites=function(e,t){var r=this,n=e.find((function(e){return r.isCurrentBaseSite(e,t)}));if(!n)throw this.getError("Current url ("+t+") doesn't match with any of url patterns of any base site.");var o=n.stores&&n.stores[0];if(!o)throw this.getError("Current base site ("+n.uid+") doesn't have any base store.");return{baseSite:n.uid,languages:this.getIsoCodes(o.languages,n.defaultLanguage||o.defaultLanguage),currencies:this.getIsoCodes(o.currencies,o.defaultCurrency),urlParameters:this.getUrlParams(n.urlEncodingAttributes)}},e.prototype.toSiteContextConfig=function(e){var t,r=e.baseSite,n=e.languages,o=e.currencies;return{context:(t={urlParameters:e.urlParameters},t.baseSite=[r],t.language=n,t.currency=o,t)}},e.prototype.toI18nConfig=function(e){return{i18n:{fallbackLang:e.languages[0]}}},e.prototype.isCurrentBaseSite=function(e,t){var r=this;return-1!==(e.urlPatterns||[]).findIndex((function(e){var n=r.javaRegExpConverter.toJsRegExp(e);if(n)return n.test(t)}))},e.prototype.getUrlParams=function(e){return(e||[]).map((function(e){return"storefront"===e?"baseSite":e}))},e.prototype.getIsoCodes=function(e,t){return this.moveToFirst(e,(function(e){return e.isocode===t.isocode})).map((function(e){return e.isocode}))},e.prototype.moveToFirst=function(e,t){var r=(e=I(e)).findIndex(t);if(-1!==r){var n=E(e.splice(r,1),1)[0];e.unshift(n)}return e},e.prototype.getError=function(e){return new Error("Error: Cannot get base site config! "+e)},e.ctorParameters=function(){return[{type:$s}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject($s))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),qs=function(){function e(e,t){this.config=e,this.http=t,this.endpoint="basesites?fields=baseSites(uid,defaultLanguage(isocode),urlEncodingAttributes,urlPatterns,stores(currencies(isocode),defaultCurrency(isocode),languages(isocode),defaultLanguage(isocode)))"}return Object.defineProperty(e.prototype,"baseEndpoint",{get:function(){return(this.config.backend.occ.baseUrl||"")+this.config.backend.occ.prefix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return""+this.baseEndpoint+this.endpoint},enumerable:!0,configurable:!0}),e.prototype.load=function(){return this.config&&this.config.backend&&this.config.backend.occ?this.http.get(this.url).pipe(i.map((function(e){return e.baseSites}))):o.throwError(new Error("Missing config for OCC backend!"))},e.ctorParameters=function(){return[{type:xr},{type:s.HttpClient}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(xr),t.ɵɵinject(s.HttpClient))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),zs=u.makeStateKey("cx-external-config"),Ys=function(){function e(e,t,r,n,o,i,s){this.platform=e,this.document=t,this.config=r,this.sitesConfigLoader=n,this.converter=o,this.transferState=i,this.serverRequestUrl=s}return Object.defineProperty(e.prototype,"currentUrl",{get:function(){return r.isPlatformBrowser(this.platform)?this.document.location.href:this.serverRequestUrl?this.serverRequestUrl:void(t.isDevMode()&&console.error("Please provide token 'SERVER_REQUEST_URL' with the requested URL for SSR"))},enumerable:!0,configurable:!0}),e.prototype.loadConfig=function(){var e=this;return this.get().pipe(i.tap((function(t){return e.transfer(t)})),i.map((function(t){return T.apply(void 0,I([{}],e.getConfigChunks(t)))}))).toPromise()},e.prototype.get=function(){var e=this.rehydrate();return e?o.of(e):this.load()},e.prototype.load=function(){var e=this;return this.sitesConfigLoader.load().pipe(i.map((function(t){return e.converter.fromOccBaseSites(t,e.currentUrl)})))},e.prototype.rehydrate=function(){if(this.transferState&&r.isPlatformBrowser(this.platform))return this.transferState.get(zs,void 0)},e.prototype.transfer=function(e){this.transferState&&r.isPlatformServer(this.platform)&&e&&this.transferState.set(zs,e)},e.prototype.getConfigChunks=function(e){var t=[this.converter.toSiteContextConfig(e)];return this.shouldReturnI18nChunk()&&t.push(this.converter.toI18nConfig(e)),t},e.prototype.shouldReturnI18nChunk=function(){var e=void 0!==(this.config&&this.config.i18n&&this.config.i18n.fallbackLang);return e&&t.isDevMode()&&console.warn("There is an already provided static config for 'i18n.fallbackLang', so the value from OCC loaded config is ignored."),!e},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]},{type:void 0,decorators:[{type:t.Inject,args:[r.DOCUMENT]}]},{type:void 0,decorators:[{type:t.Inject,args:[A]}]},{type:qs},{type:Ws},{type:u.TransferState,decorators:[{type:t.Optional}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[Hs]}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(t.PLATFORM_ID),t.ɵɵinject(r.DOCUMENT),t.ɵɵinject(A),t.ɵɵinject(qs),t.ɵɵinject(Ws),t.ɵɵinject(u.TransferState,8),t.ɵɵinject(Hs,8))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"}),C(0,t.Inject(t.PLATFORM_ID)),C(1,t.Inject(r.DOCUMENT)),C(2,t.Inject(A)),C(5,t.Optional()),C(6,t.Optional()),C(6,t.Inject(Hs))],e)}();function Ks(e,t){return t.context&&t.context.baseSite?null:{scopes:["context","i18n.fallbackLang"],configFactory:function(){return e.loadConfig()}}}var Zs=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:[{provide:Gs,useFactory:Ks,deps:[Ys,zt],multi:!0}]}},e=r=v([t.NgModule()],e)}();function Js(e){var t=Xs("occ-backend-base-url",e);return t&&"OCC_BACKEND_BASE_URL_VALUE"!==t?{backend:{occ:{baseUrl:t}}}:{}}function Qs(e){var t=Xs("media-backend-base-url",e);return t&&"MEDIA_BACKEND_BASE_URL_VALUE"!==t?{backend:{media:{baseUrl:t}}}:{}}function Xs(e,t){var r=t.getTag('name="'+e+'"');return r&&r.content}var ea={backend:{occ:{prefix:"/rest/v2/"},media:{}}};function ta(e){if(void 0===e.backend||void 0===e.backend.occ||void 0===e.backend.occ.baseUrl)return"Please configure backend.occ.baseUrl before using storefront library!"}var ra,na,oa,ia,sa,aa,ca,ua,pa,da,la,fa,ha,ya,va,Ca,Sa,ga,ma,Ea,Ia,Ra,Ta,Aa,Ua,Pa,La,_a,Oa,ba,wa,Da,Ma,Fa,ka,Na,ja,xa,$a,Ga,Ba,Ha,Va,Wa,qa,za,Ya,Ka,Za,Ja,Qa,Xa,ec,tc,rc,nc,oc,ic,sc,ac,cc,uc,pc,dc,lc,fc,hc=function(){function e(e){this.config=e}return e.prototype.intercept=function(e,t){return this.requiresWithCredentials(e)&&(e=e.clone({withCredentials:!0})),t.handle(e)},e.prototype.requiresWithCredentials=function(e){var t,r;return(null===(t=this.occConfig)||void 0===t?void 0:t.useWithCredentials)&&e.url.indexOf(null===(r=this.occConfig)||void 0===r?void 0:r.prefix)>-1},Object.defineProperty(e.prototype,"occConfig",{get:function(){return this.config.backend.occ},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:xr}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(xr))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}();(function(e){e.BUY="BUY",e.FROM="FROM"})((fc=e.Occ||(e.Occ={})).PriceType||(fc.PriceType={})),function(e){e.PRIMARY="PRIMARY",e.GALLERY="GALLERY"}(fc.ImageType||(fc.ImageType={})),(lc=fc.Fields||(fc.Fields={})).BASIC="BASIC",lc.DEFAULT="DEFAULT",lc.FULL="FULL",(dc=fc.Fields1||(fc.Fields1={})).BASIC="BASIC",dc.DEFAULT="DEFAULT",dc.FULL="FULL",(pc=fc.Fields2||(fc.Fields2={})).BASIC="BASIC",pc.DEFAULT="DEFAULT",pc.FULL="FULL",(uc=fc.Fields3||(fc.Fields3={})).BASIC="BASIC",uc.DEFAULT="DEFAULT",uc.FULL="FULL",(cc=fc.Fields4||(fc.Fields4={})).BASIC="BASIC",cc.DEFAULT="DEFAULT",cc.FULL="FULL",(ac=fc.Fields5||(fc.Fields5={})).BASIC="BASIC",ac.DEFAULT="DEFAULT",ac.FULL="FULL",(sc=fc.Fields6||(fc.Fields6={})).BASIC="BASIC",sc.DEFAULT="DEFAULT",sc.FULL="FULL",function(e){e.CONTENT_PAGE="ContentPage",e.PRODUCT_PAGE="ProductPage",e.CATEGORY_PAGE="CategoryPage",e.CATALOG_PAGE="CatalogPage"}(fc.PageType||(fc.PageType={})),(ic=fc.Fields7||(fc.Fields7={})).BASIC="BASIC",ic.DEFAULT="DEFAULT",ic.FULL="FULL",(oc=fc.Fields8||(fc.Fields8={})).BASIC="BASIC",oc.DEFAULT="DEFAULT",oc.FULL="FULL",(nc=fc.Fields9||(fc.Fields9={})).BASIC="BASIC",nc.DEFAULT="DEFAULT",nc.FULL="FULL",(rc=fc.Fields10||(fc.Fields10={})).BASIC="BASIC",rc.DEFAULT="DEFAULT",rc.FULL="FULL",(tc=fc.Fields11||(fc.Fields11={})).BASIC="BASIC",tc.DEFAULT="DEFAULT",tc.FULL="FULL",(ec=fc.Fields12||(fc.Fields12={})).BASIC="BASIC",ec.DEFAULT="DEFAULT",ec.FULL="FULL",(Xa=fc.Fields13||(fc.Fields13={})).BASIC="BASIC",Xa.DEFAULT="DEFAULT",Xa.FULL="FULL",(Qa=fc.Fields14||(fc.Fields14={})).BASIC="BASIC",Qa.DEFAULT="DEFAULT",Qa.FULL="FULL",(Ja=fc.Fields15||(fc.Fields15={})).BASIC="BASIC",Ja.DEFAULT="DEFAULT",Ja.FULL="FULL",(Za=fc.Fields16||(fc.Fields16={})).BASIC="BASIC",Za.DEFAULT="DEFAULT",Za.FULL="FULL",(Ka=fc.SortEnum||(fc.SortEnum={})).BASIC="BASIC",Ka.DEFAULT="DEFAULT",Ka.FULL="FULL",(Ya=fc.Fields17||(fc.Fields17={})).BASIC="BASIC",Ya.DEFAULT="DEFAULT",Ya.FULL="FULL",(za=fc.Fields18||(fc.Fields18={})).BASIC="BASIC",za.DEFAULT="DEFAULT",za.FULL="FULL",(qa=fc.Fields19||(fc.Fields19={})).BASIC="BASIC",qa.DEFAULT="DEFAULT",qa.FULL="FULL",(Wa=fc.Fields20||(fc.Fields20={})).BASIC="BASIC",Wa.DEFAULT="DEFAULT",Wa.FULL="FULL",(Va=fc.Fields21||(fc.Fields21={})).BASIC="BASIC",Va.DEFAULT="DEFAULT",Va.FULL="FULL",(Ha=fc.Fields22||(fc.Fields22={})).BASIC="BASIC",Ha.DEFAULT="DEFAULT",Ha.FULL="FULL",(Ba=fc.Fields23||(fc.Fields23={})).BASIC="BASIC",Ba.DEFAULT="DEFAULT",Ba.FULL="FULL",(Ga=fc.Fields24||(fc.Fields24={})).BASIC="BASIC",Ga.DEFAULT="DEFAULT",Ga.FULL="FULL",($a=fc.Fields25||(fc.Fields25={})).BASIC="BASIC",$a.DEFAULT="DEFAULT",$a.FULL="FULL",(xa=fc.Fields26||(fc.Fields26={})).BASIC="BASIC",xa.DEFAULT="DEFAULT",xa.FULL="FULL",(ja=fc.Fields27||(fc.Fields27={})).BASIC="BASIC",ja.DEFAULT="DEFAULT",ja.FULL="FULL",(Na=fc.Fields28||(fc.Fields28={})).BASIC="BASIC",Na.DEFAULT="DEFAULT",Na.FULL="FULL",(ka=fc.Fields29||(fc.Fields29={})).BASIC="BASIC",ka.DEFAULT="DEFAULT",ka.FULL="FULL",(Fa=fc.Fields30||(fc.Fields30={})).BASIC="BASIC",Fa.DEFAULT="DEFAULT",Fa.FULL="FULL",(Ma=fc.Fields31||(fc.Fields31={})).BASIC="BASIC",Ma.DEFAULT="DEFAULT",Ma.FULL="FULL",(Da=fc.Fields32||(fc.Fields32={})).BASIC="BASIC",Da.DEFAULT="DEFAULT",Da.FULL="FULL",(wa=fc.Fields33||(fc.Fields33={})).BASIC="BASIC",wa.DEFAULT="DEFAULT",wa.FULL="FULL",(ba=fc.Fields34||(fc.Fields34={})).BASIC="BASIC",ba.DEFAULT="DEFAULT",ba.FULL="FULL",(Oa=fc.Fields35||(fc.Fields35={})).BASIC="BASIC",Oa.DEFAULT="DEFAULT",Oa.FULL="FULL",(_a=fc.Fields36||(fc.Fields36={})).BASIC="BASIC",_a.DEFAULT="DEFAULT",_a.FULL="FULL",(La=fc.Fields37||(fc.Fields37={})).BASIC="BASIC",La.DEFAULT="DEFAULT",La.FULL="FULL",(Pa=fc.Fields38||(fc.Fields38={})).BASIC="BASIC",Pa.DEFAULT="DEFAULT",Pa.FULL="FULL",(Ua=fc.Fields39||(fc.Fields39={})).BASIC="BASIC",Ua.DEFAULT="DEFAULT",Ua.FULL="FULL",(Aa=fc.Fields40||(fc.Fields40={})).BASIC="BASIC",Aa.DEFAULT="DEFAULT",Aa.FULL="FULL",(Ta=fc.Fields41||(fc.Fields41={})).BASIC="BASIC",Ta.DEFAULT="DEFAULT",Ta.FULL="FULL",(Ra=fc.Fields42||(fc.Fields42={})).BASIC="BASIC",Ra.DEFAULT="DEFAULT",Ra.FULL="FULL",(Ia=fc.Fields43||(fc.Fields43={})).BASIC="BASIC",Ia.DEFAULT="DEFAULT",Ia.FULL="FULL",(Ea=fc.Fields44||(fc.Fields44={})).BASIC="BASIC",Ea.DEFAULT="DEFAULT",Ea.FULL="FULL",(ma=fc.Fields45||(fc.Fields45={})).BASIC="BASIC",ma.DEFAULT="DEFAULT",ma.FULL="FULL",(ga=fc.Fields46||(fc.Fields46={})).BASIC="BASIC",ga.DEFAULT="DEFAULT",ga.FULL="FULL",(Sa=fc.Fields47||(fc.Fields47={})).BASIC="BASIC",Sa.DEFAULT="DEFAULT",Sa.FULL="FULL",(Ca=fc.Fields48||(fc.Fields48={})).BASIC="BASIC",Ca.DEFAULT="DEFAULT",Ca.FULL="FULL",(va=fc.Fields49||(fc.Fields49={})).BASIC="BASIC",va.DEFAULT="DEFAULT",va.FULL="FULL",(ya=fc.Fields50||(fc.Fields50={})).BASIC="BASIC",ya.DEFAULT="DEFAULT",ya.FULL="FULL",(ha=fc.Fields51||(fc.Fields51={})).BASIC="BASIC",ha.DEFAULT="DEFAULT",ha.FULL="FULL",(fa=fc.Fields52||(fc.Fields52={})).BASIC="BASIC",fa.DEFAULT="DEFAULT",fa.FULL="FULL",(la=fc.Fields53||(fc.Fields53={})).BASIC="BASIC",la.DEFAULT="DEFAULT",la.FULL="FULL",(da=fc.Fields54||(fc.Fields54={})).BASIC="BASIC",da.DEFAULT="DEFAULT",da.FULL="FULL",(pa=fc.Fields55||(fc.Fields55={})).BASIC="BASIC",pa.DEFAULT="DEFAULT",pa.FULL="FULL",(ua=fc.Fields56||(fc.Fields56={})).BASIC="BASIC",ua.DEFAULT="DEFAULT",ua.FULL="FULL",(ca=fc.Fields57||(fc.Fields57={})).BASIC="BASIC",ca.DEFAULT="DEFAULT",ca.FULL="FULL",(aa=fc.Fields58||(fc.Fields58={})).BASIC="BASIC",aa.DEFAULT="DEFAULT",aa.FULL="FULL",(sa=fc.Fields59||(fc.Fields59={})).BASIC="BASIC",sa.DEFAULT="DEFAULT",sa.FULL="FULL",(ia=fc.Fields60||(fc.Fields60={})).BASIC="BASIC",ia.DEFAULT="DEFAULT",ia.FULL="FULL",(oa=fc.Fields61||(fc.Fields61={})).BASIC="BASIC",oa.DEFAULT="DEFAULT",oa.FULL="FULL",(na=fc.Type||(fc.Type={})).All="all",na.Product="product",na.Order="order",(ra=fc.CONSENT_STATUS||(fc.CONSENT_STATUS={})).ANONYMOUS_CONSENT_GIVEN="GIVEN",ra.ANONYMOUS_CONSENT_WITHDRAWN="WITHDRAWN",function(e){e.BACK_IN_STOCK="BACK_IN_STOCK"}(fc.NotificationType||(fc.NotificationType={}));var yc=new t.InjectionToken("ConfigurationValidator");function vc(e){return{provide:yc,useValue:e,multi:!0}}function Cc(e,t){var r,n;try{for(var o=m(t),i=o.next();!i.done;i=o.next()){var s=(0,i.value)(e);s&&console.warn(s)}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}var Sc=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:[{provide:s.HTTP_INTERCEPTORS,useExisting:hc,multi:!0},O(ea),vc(ta)]}},e=r=v([t.NgModule({imports:[go,si,Fo,Jo,Di,Vi,Qi,xs,Zs.forRoot()]})],e)}(),gc=function(){function e(e){this.config=e}return e.prototype.expand=function(e,t){var r,n,o=this.config&&this.config.backend&&this.config.backend.loadingScopes&&this.config.backend.loadingScopes[e];if(o){for(var i=I(t),s=i.length;s>0;){var a=o[i[--s]]&&o[i[s]].include;if(a)try{for(var c=(r=void 0,m(a)),u=c.next();!u.done;u=c.next()){var p=u.value;i.includes(p)||(i.splice(s,0,p),s++)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}}return i}return t},e.prototype.getMaxAge=function(e,t){var r=this.config&&this.config.backend&&this.config.backend.loadingScopes&&this.config.backend.loadingScopes[e];return 1e3*(r[t]&&r[t].maxAge)||0},e.ctorParameters=function(){return[{type:xr}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(xr))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),mc=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return h(r,e),r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root",useExisting:A})],r)}(xr),Ec=function(){function r(e,t,r,n){this.anonymousConsentsService=e,this.authService=t,this.occEndpoints=r,this.config=n}return r.prototype.intercept=function(e,t){var r=this;return this.anonymousConsentsService.getConsents().pipe(i.take(1),i.withLatestFrom(this.authService.isUserLoggedIn()),i.switchMap((function(n){var o=E(n,2),a=o[0],c=o[1];if(!r.isOccUrl(e.url))return t.handle(e);var u=r.handleRequest(a,e);return t.handle(u).pipe(i.tap((function(e){e instanceof s.HttpResponse&&e.url.startsWith(r.occEndpoints.getUrl("anonymousConsentTemplates"))&&r.handleResponse(c,e.headers.get("X-Anonymous-Consents"),a)})))})))},r.prototype.handleResponse=function(e,t,r){if(!e&&t){var n=[];n=this.anonymousConsentsService.decodeAndDeserialize(t),n=this.giveRequiredConsents(n),this.anonymousConsentsService.consentsUpdated(n,r)&&this.anonymousConsentsService.setConsents(n)}},r.prototype.handleRequest=function(e,t){var r;if(!e)return t;var n=this.anonymousConsentsService.serializeAndEncode(e);return t.clone({setHeaders:(r={},r["X-Anonymous-Consents"]=n,r)})},r.prototype.isOccUrl=function(e){return e.includes(this.occEndpoints.getBaseEndpoint())},r.prototype.giveRequiredConsents=function(t){var r,n,o=I(t);if(Boolean(this.config.anonymousConsents)&&Boolean(this.config.anonymousConsents.requiredConsents))try{for(var i=m(o),s=i.next();!s.done;s=i.next()){var a=s.value;this.config.anonymousConsents.requiredConsents.includes(a.templateCode)&&(a.consentState=e.ANONYMOUS_CONSENT_STATUS.GIVEN)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},r.ctorParameters=function(){return[{type:lo},{type:vt},{type:$r},{type:mc}]},r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(lo),t.ɵɵinject(vt),t.ɵɵinject($r),t.ɵɵinject(mc))},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root"})],r)}(),Ic=[{provide:s.HTTP_INTERCEPTORS,useExisting:Ec,multi:!0}],Rc=function(){function e(){var e=this;this.sources=[],this.subscriptionsToSources=new Map,this.output$=new o.Observable((function(t){return e.consumer=t,e.bindAllSourcesToConsumer(t),function(){e.consumer=null,e.unbindAllSourcesFromConsumer()}})).pipe(i.share()),this.consumer=null}return e.prototype.add=function(e){this.has(e)||(this.consumer&&this.bindSourceToConsumer(e,this.consumer),this.sources.push(e))},e.prototype.bindAllSourcesToConsumer=function(e){var t=this;this.sources.forEach((function(r){return t.bindSourceToConsumer(r,e)}))},e.prototype.unbindAllSourcesFromConsumer=function(){var e=this;this.sources.forEach((function(t){return e.unbindSourceFromConsumer(t)}))},e.prototype.bindSourceToConsumer=function(e,t){var r=e.subscribe((function(e){return t.next(e)}));this.subscriptionsToSources.set(e,r)},e.prototype.unbindSourceFromConsumer=function(e){var t=this.subscriptionsToSources.get(e);void 0!==t&&(t.unsubscribe(),this.subscriptionsToSources.delete(e))},e.prototype.remove=function(e){var t;this.unbindSourceFromConsumer(e),-1!==(t=this.sources.findIndex((function(t){return t===e})))&&this.sources.splice(t,1)},e.prototype.has=function(e){return this.sources.includes(e)},e}(),Tc=function(){function e(){this.eventsMeta=new Map}return e.prototype.register=function(e,r){var n=this.getEventMeta(e);return n.mergingSubject.has(r)?t.isDevMode()&&console.warn("EventService: the event source",r,"has been already registered for the type",e):n.mergingSubject.add(r),function(){return n.mergingSubject.remove(r)}},e.prototype.get=function(e){var r=this.getEventMeta(e).mergingSubject.output$;return t.isDevMode()&&(r=this.getValidatedEventStream(r,e)),r},e.prototype.dispatch=function(e){var t=e.constructor;this.getInputSubject(t).next(e)},e.prototype.getInputSubject=function(e){var t=this.getEventMeta(e);return t.inputSubject$||(t.inputSubject$=new o.Subject,this.register(e,t.inputSubject$)),t.inputSubject$},e.prototype.getEventMeta=function(e){return t.isDevMode()&&this.validateEventType(e),this.eventsMeta.get(e)||this.createEventMeta(e),this.eventsMeta.get(e)},e.prototype.createEventMeta=function(e){this.eventsMeta.set(e,{inputSubject$:null,mergingSubject:new Rc})},e.prototype.validateEventType=function(e){if(!(null==e?void 0:e.constructor))throw new Error("EventService:  "+e+" is not a valid event type. Please provide a class reference.")},e.prototype.getValidatedEventStream=function(e,t){return e.pipe(i.tap((function(r){r instanceof t||console.warn("EventService: The stream",e,"emitted the event",r,"that is not an instance of the declared type",t.name)})))},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}();function Ac(e,t){return Object.assign(new e,t)}var Uc=function(){function e(e,t){this.actionsSubject=e,this.eventService=t}return e.prototype.register=function(e){return this.eventService.register(e.event,this.getFromAction(e))},e.prototype.getFromAction=function(e){var t=this;return this.actionsSubject.pipe(c.ofType.apply(void 0,I([].concat(e.action)))).pipe(i.map((function(r){return t.createEvent(r,e.event,e.factory)})))},e.prototype.createEvent=function(e,t,r){var n;return r?r(e):Ac(t,null!==(n=e.payload)&&void 0!==n?n:{})},e.ctorParameters=function(){return[{type:n.ActionsSubject},{type:Tc}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.ActionsSubject),t.ɵɵinject(Tc))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Pc=function(){function r(e){this.winRef=e}return r.prototype.syncWithStorage=function(t){var r=this,n=t.key,s=t.state$,a=t.context$,c=void 0===a?o.of(""):a,u=t.storageType,p=void 0===u?e.StorageSyncType.LOCAL_STORAGE:u,d=t.onRead,l=void 0===d?function(){}:d,f=function(t,r){var n;switch(t){case e.StorageSyncType.LOCAL_STORAGE:n=r.localStorage;break;case e.StorageSyncType.SESSION_STORAGE:n=r.sessionStorage;break;case e.StorageSyncType.NO_STORAGE:n=void 0;break;default:n=r.sessionStorage}return n}(p,this.winRef),h=new o.Subscription;return h.add(c.pipe(i.map((function(e){return Kr(f,r.generateKeyWithContext(e,n))})),i.tap((function(e){return l(e)}))).subscribe()),h.add(s.pipe(i.withLatestFrom(c)).subscribe((function(e){var t=E(e,2),o=t[0],i=t[1];Yr(r.generateKeyWithContext(i,n),o,f)}))),h},r.prototype.generateKeyWithContext=function(e,t){return"spartacus⚿"+[].concat(e).join("⚿")+"⚿"+t},r.ctorParameters=function(){return[{type:St}]},r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(St))},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root"})],r)}();function Lc(e){return n.createSelector(n.createFeatureSelector("process"),(function(t){return de(t,e)}))}function _c(e){return n.createSelector(Lc(e),(function(e){return ce(e)}))}function Oc(e){return n.createSelector(Lc(e),(function(e){return pe(e)}))}function bc(e){return n.createSelector(Lc(e),(function(e){return ue(e)}))}var wc=Object.freeze({__proto__:null,getProcessStateFactory:Lc,getProcessLoadingFactory:_c,getProcessSuccessFactory:Oc,getProcessErrorFactory:bc}),Dc=function(){this.type="[User] Load Billing Countries"},Mc=function(e){this.payload=e,this.type="[User] Load Billing Countries Fail"},Fc=function(e){this.payload=e,this.type="[User] Load Billing Countries Success"},kc=function(e){this.payload=e,this.type="[User] Load Consignment Tracking"},Nc=function(e){this.payload=e,this.type="[User] Load Consignment Tracking Fail"},jc=function(e){this.payload=e,this.type="[User] Load Consignment Tracking Success"},xc=function(){this.type="[User] Clear Consignment Tracking"},$c=function(){this.type="[User] Load Delivery Countries"},Gc=function(e){this.payload=e,this.type="[User] Load Delivery Countries Fail"},Bc=function(e){this.payload=e,this.type="[User] Load Delivery Countries Success"},Hc=function(e){this.payload=e,this.type="[User] Forgot Password Email Request"},Vc=function(e){this.payload=e,this.type="[User] Forgot Password Email Request Fail"},Wc=function(){this.type="[User] Forgot Password Email Request Success"},qc="[User] User Consents",zc="[User] User Payment Methods",Yc="[User] User Orders",Kc="[User] User Addresses",Zc="[User] Order Return Requests",Jc="[User] User Order Details",Qc="[User] Regions",Xc="[User] Customer Coupons",eu="[User] Product Interests",tu=function(e){function t(t){var r=e.call(this,Jc)||this;return r.payload=t,r.type="[User] Load Order Details",r}return h(t,e),t}(z),ru=function(e){function t(t){var r=e.call(this,Jc,t)||this;return r.payload=t,r.type="[User] Load Order Details Fail",r}return h(t,e),t}(Y),nu=function(e){function t(t){var r=e.call(this,Jc)||this;return r.payload=t,r.type="[User] Load Order Details Success",r}return h(t,e),t}(K),ou=function(e){function t(){var t=e.call(this,Jc)||this;return t.type="[User] Clear Order Details",t}return h(t,e),t}(Z),iu=function(e){function t(t){var r=e.call(this,"process","cancelOrder")||this;return r.payload=t,r.type="[User] Cancel Order",r}return h(t,e),t}(te),su=function(e){function t(t){var r=e.call(this,"process","cancelOrder",t)||this;return r.payload=t,r.type="[User] Cancel Order Fail",r}return h(t,e),t}(re),au=function(e){function t(){var t=e.call(this,"process","cancelOrder")||this;return t.type="[User] Cancel Order Success",t}return h(t,e),t}(ne),cu=function(e){function t(){var t=e.call(this,"process","cancelOrder")||this;return t.type="[User] Reset Cancel Order Process",t}return h(t,e),t}(oe),uu=function(e){function t(t){var r=e.call(this,zc)||this;return r.payload=t,r.type="[User] Load User Payment Methods",r}return h(t,e),t}(z),pu=function(e){function t(t){var r=e.call(this,zc,t)||this;return r.payload=t,r.type="[User] Load User Payment Methods Fail",r}return h(t,e),t}(Y),du=function(e){function t(t){var r=e.call(this,zc)||this;return r.payload=t,r.type="[User] Load User Payment Methods Success",r}return h(t,e),t}(K),lu=function(e){function t(t){var r=e.call(this,zc)||this;return r.payload=t,r.type="[User] Set Default User Payment Method",r}return h(t,e),t}(z),fu=function(e){function t(t){var r=e.call(this,zc,t)||this;return r.payload=t,r.type="[User] Set Default User Payment Method Fail",r}return h(t,e),t}(Y),hu=function(e){function t(t){var r=e.call(this,zc)||this;return r.payload=t,r.type="[User] Set Default User Payment Method Success",r}return h(t,e),t}(K),yu=function(e){function t(t){var r=e.call(this,zc)||this;return r.payload=t,r.type="[User] Delete User Payment Method",r}return h(t,e),t}(z),vu=function(e){function t(t){var r=e.call(this,zc,t)||this;return r.payload=t,r.type="[User] Delete User Payment Method Fail",r}return h(t,e),t}(Y),Cu=function(e){function t(t){var r=e.call(this,zc)||this;return r.payload=t,r.type="[User] Delete User  Payment Method Success",r}return h(t,e),t}(K),Su=function(e){function t(t){var r=e.call(this,Qc)||this;return r.payload=t,r.type="[User] Load Regions",r}return h(t,e),t}(z),gu=function(e){function t(t){var r=e.call(this,Qc,t)||this;return r.payload=t,r.type="[User] Load Regions Fail",r}return h(t,e),t}(Y),mu=function(e){function t(t){var r=e.call(this,Qc)||this;return r.payload=t,r.type="[User] Load Regions Success",r}return h(t,e),t}(K),Eu=function(){this.type="[User] Clear Regions"},Iu=function(e){this.payload=e,this.type="[User] Reset Password"},Ru=function(e){this.payload=e,this.type="[User] Reset Password Fail"},Tu=function(){this.type="[User] Reset Password Success"},Au=function(){this.type="[User] Load Tiltes"},Uu=function(e){this.payload=e,this.type="[User] Load Titles Fail"},Pu=function(e){this.payload=e,this.type="[User] Load Titles Success"},Lu=function(e){function t(t){var r=e.call(this,"process","updateEmail")||this;return r.payload=t,r.type="[User] Update Email",r}return h(t,e),t}(te),_u=function(e){function t(t){var r=e.call(this,"process","updateEmail")||this;return r.newUid=t,r.type="[User] Update Email Success",r}return h(t,e),t}(ne),Ou=function(e){function t(t){var r=e.call(this,"process","updateEmail",t)||this;return r.payload=t,r.type="[User] Update Email Error",r}return h(t,e),t}(re),bu=function(e){function t(){var t=e.call(this,"process","updateEmail")||this;return t.type="[User] Reset Email",t}return h(t,e),t}(oe),wu=function(e){function t(t){var r=e.call(this,"process","updatePassword")||this;return r.payload=t,r.type="[User] Update Password",r}return h(t,e),t}(te),Du=function(e){function t(t){var r=e.call(this,"process","updatePassword",t)||this;return r.payload=t,r.type="[User] Update Password Fail",r}return h(t,e),t}(re),Mu=function(e){function t(){var t=e.call(this,"process","updatePassword")||this;return t.type="[User] Update Password Success",t}return h(t,e),t}(ne),Fu=function(e){function t(){var t=e.call(this,"process","updatePassword")||this;return t.type="[User] Reset Update Password Process State",t}return h(t,e),t}(oe),ku=function(e){function t(t){var r=e.call(this,Kc)||this;return r.payload=t,r.type="[User] Load User Addresses",r}return h(t,e),t}(z),Nu=function(e){function t(t){var r=e.call(this,Kc,t)||this;return r.payload=t,r.type="[User] Load User Addresses Fail",r}return h(t,e),t}(Y),ju=function(e){function t(t){var r=e.call(this,Kc)||this;return r.payload=t,r.type="[User] Load User Addresses Success",r}return h(t,e),t}(K),xu=function(e){function t(t){var r=e.call(this,Kc)||this;return r.payload=t,r.type="[User] Add User Address",r}return h(t,e),t}(z),$u=function(e){function t(t){var r=e.call(this,Kc,t)||this;return r.payload=t,r.type="[User] Add User Address Fail",r}return h(t,e),t}(Y),Gu=function(e){function t(t){var r=e.call(this,Kc)||this;return r.payload=t,r.type="[User] Add User Address Success",r}return h(t,e),t}(K),Bu=function(e){function t(t){var r=e.call(this,Kc)||this;return r.payload=t,r.type="[User] Update User Address",r}return h(t,e),t}(z),Hu=function(e){function t(t){var r=e.call(this,Kc,t)||this;return r.payload=t,r.type="[User] Update User Address Fail",r}return h(t,e),t}(Y),Vu=function(e){function t(t){var r=e.call(this,Kc)||this;return r.payload=t,r.type="[User] Update User Address Success",r}return h(t,e),t}(K),Wu=function(e){function t(t){var r=e.call(this,Kc)||this;return r.payload=t,r.type="[User] Delete User Address",r}return h(t,e),t}(z),qu=function(e){function t(t){var r=e.call(this,Kc,t)||this;return r.payload=t,r.type="[User] Delete User Address Fail",r}return h(t,e),t}(Y),zu=function(e){function t(t){var r=e.call(this,Kc)||this;return r.payload=t,r.type="[User] Delete User Address Success",r}return h(t,e),t}(K),Yu=function(e){function t(t){var r=e.call(this,qc)||this;return r.payload=t,r.type="[User] Load User Consents",r}return h(t,e),t}(z),Ku=function(e){function t(t){var r=e.call(this,qc,t)||this;return r.payload=t,r.type="[User] Load User Consents Fail",r}return h(t,e),t}(Y),Zu=function(e){function t(t){var r=e.call(this,qc)||this;return r.payload=t,r.type="[User] Load User Consents Success",r}return h(t,e),t}(K),Ju=function(e){function t(){var t=e.call(this,qc)||this;return t.type="[User] Reset Load User Consents",t}return h(t,e),t}(Z),Qu=function(e){function t(t){var r=e.call(this,"process","giveConsent")||this;return r.payload=t,r.type="[User] Give User Consent",r}return h(t,e),t}(te),Xu=function(e){function t(t){var r=e.call(this,"process","giveConsent",t)||this;return r.type="[User] Give User Consent Fail",r}return h(t,e),t}(re),ep=function(e){function t(t){var r=e.call(this,"process","giveConsent")||this;return r.consentTemplate=t,r.type="[User] Give User Consent Success",r}return h(t,e),t}(ne),tp=function(e){function t(){var t=e.call(this,"process","giveConsent")||this;return t.type="[User] Reset Give User Consent Process",t}return h(t,e),t}(oe),rp=function(e){this.payload=e,this.type="[User] Transfer Anonymous Consent"},np=function(e){function t(t){var r=e.call(this,"process","withdrawConsent")||this;return r.payload=t,r.type="[User] Withdraw User Consent",r}return h(t,e),t}(te),op=function(e){function t(t){var r=e.call(this,"process","withdrawConsent",t)||this;return r.type="[User] Withdraw User Consent Fail",r}return h(t,e),t}(re),ip=function(e){function t(){var t=e.call(this,"process","withdrawConsent")||this;return t.type="[User] Withdraw User Consent Success",t}return h(t,e),t}(ne),sp=function(e){function t(){var t=e.call(this,"process","withdrawConsent")||this;return t.type="[User] Reset Withdraw User Consent Process",t}return h(t,e),t}(oe),ap=function(e){this.payload=e,this.type="[User] Load User Details"},cp=function(e){this.payload=e,this.type="[User] Load User Details Fail"},up=function(e){this.payload=e,this.type="[User] Load User Details Success"},pp=function(e){function t(t){var r=e.call(this,"process","updateUserDetails")||this;return r.payload=t,r.type="[User] Update User Details",r}return h(t,e),t}(te),dp=function(e){function t(t){var r=e.call(this,"process","updateUserDetails",t)||this;return r.payload=t,r.type="[User] Update User Details Fail",r}return h(t,e),t}(re),lp=function(e){function t(t){var r=e.call(this,"process","updateUserDetails")||this;return r.userUpdates=t,r.type="[User] Update User Details Success",r}return h(t,e),t}(ne),fp=function(e){function t(){var t=e.call(this,"process","updateUserDetails")||this;return t.type="[User] Reset User Details",t}return h(t,e),t}(oe),hp=function(){this.type="[User] Clear User Misc Data"},yp=function(e){function t(t){var r=e.call(this,Yc)||this;return r.payload=t,r.type="[User] Load User Orders",r}return h(t,e),t}(z),vp=function(e){function t(t){var r=e.call(this,Yc,t)||this;return r.payload=t,r.type="[User] Load User Orders Fail",r}return h(t,e),t}(Y),Cp=function(e){function t(t){var r=e.call(this,Yc)||this;return r.payload=t,r.type="[User] Load User Orders Success",r}return h(t,e),t}(K),Sp=function(e){function t(){var t=e.call(this,Yc)||this;return t.type="[User] Clear User Orders",t}return h(t,e),t}(Z),gp=function(e){function t(t){var r=e.call(this,"process","registerUser")||this;return r.payload=t,r.type="[User] Register User",r}return h(t,e),t}(te),mp=function(e){function t(t){var r=e.call(this,"process","registerUser",t)||this;return r.payload=t,r.type="[User] Register User Fail",r}return h(t,e),t}(re),Ep=function(e){function t(){var t=e.call(this,"process","registerUser")||this;return t.type="[User] Register User Success",t}return h(t,e),t}(ne),Ip=function(e){function t(){var t=e.call(this,"process","registerUser")||this;return t.type="[User] Reset Register User Process",t}return h(t,e),t}(oe),Rp=function(e){this.payload=e,this.type="[User] Register Guest"},Tp=function(e){this.payload=e,this.type="[User] Register Guest Fail"},Ap=function(){this.type="[User] Register Guest Success"},Up=function(e){function t(t){var r=e.call(this,"process","removeUser")||this;return r.payload=t,r.type="[User] Remove User",r}return h(t,e),t}(te),Pp=function(e){function t(t){var r=e.call(this,"process","removeUser",t)||this;return r.payload=t,r.type="[User] Remove User Fail",r}return h(t,e),t}(re),Lp=function(e){function t(){var t=e.call(this,"process","removeUser")||this;return t.type="[User] Remove User Success",t}return h(t,e),t}(ne),_p=function(e){function t(){var t=e.call(this,"process","removeUser")||this;return t.type="[User] Reset Remove User Process State",t}return h(t,e),t}(oe),Op=function(e){function t(t){var r=e.call(this,Xc)||this;return r.payload=t,r.type="[User] Load Customer Coupons",r}return h(t,e),t}(z),bp=function(e){function t(t){var r=e.call(this,Xc,t)||this;return r.payload=t,r.type="[User] Load Customer Coupons Fail",r}return h(t,e),t}(Y),wp=function(e){function t(t){var r=e.call(this,Xc)||this;return r.payload=t,r.type="[User] Load Customer Coupons Success",r}return h(t,e),t}(K),Dp=function(e){function t(){var t=e.call(this,Xc)||this;return t.type="[User] Reset Load Customer Coupons",t}return h(t,e),t}(Z),Mp=function(e){function t(t){var r=e.call(this,"process","subscribeCustomerCoupon")||this;return r.payload=t,r.type="[User] Subscribe Customer Notification Coupon",r}return h(t,e),t}(te),Fp=function(e){function t(t){var r=e.call(this,"process","subscribeCustomerCoupon",t)||this;return r.payload=t,r.type="[User] Subscribe Customer Coupon Notification Fail",r}return h(t,e),t}(re),kp=function(e){function t(t){var r=e.call(this,"process","subscribeCustomerCoupon",t)||this;return r.payload=t,r.type="[User] Subscribe Customer Coupon Notification Success",r}return h(t,e),t}(ne),Np=function(e){function t(){var t=e.call(this,"process","subscribeCustomerCoupon")||this;return t.type="[User] Reset Subscribe Customer Coupon Process",t}return h(t,e),t}(oe),jp=function(e){function t(t){var r=e.call(this,"process","unsubscribeCustomerCoupon")||this;return r.payload=t,r.type="[User] Unsubscribe Customer Notification Coupon",r}return h(t,e),t}(te),xp=function(e){function t(t){var r=e.call(this,"process","unsubscribeCustomerCoupon",t)||this;return r.payload=t,r.type="[User] Unsubscribe Customer Coupon Notification Fail",r}return h(t,e),t}(re),$p=function(e){function t(t){var r=e.call(this,"process","unsubscribeCustomerCoupon",t)||this;return r.payload=t,r.type="[User] Unsubscribe Customer Coupon Notification Success",r}return h(t,e),t}(ne),Gp=function(e){function t(){var t=e.call(this,"process","unsubscribeCustomerCoupon")||this;return t.type="[User] Reset Unsubscribe Customer Coupon Process",t}return h(t,e),t}(oe),Bp=function(e){function t(t){var r=e.call(this,"process","claimCustomerCoupon")||this;return r.payload=t,r.type="[User] Claim Customer",r}return h(t,e),t}(te),Hp=function(e){function t(t){var r=e.call(this,"process","claimCustomerCoupon",t)||this;return r.payload=t,r.type="[User] Claim Customer Fail",r}return h(t,e),t}(re),Vp=function(e){function t(t){var r=e.call(this,"process","claimCustomerCoupon",t)||this;return r.payload=t,r.type="[User] Claim Customer Success",r}return h(t,e),t}(ne),Wp=function(e){function t(t){var r=e.call(this,"[User] Notification Preferences")||this;return r.payload=t,r.type="[User] Load Notification Preferences",r}return h(t,e),t}(z),qp=function(e){function t(t){var r=e.call(this,"[User] Notification Preferences",t)||this;return r.payload=t,r.type="[User] Load Notification Preferences Fail",r}return h(t,e),t}(Y),zp=function(e){function t(t){var r=e.call(this,"[User] Notification Preferences")||this;return r.payload=t,r.type="[User] Load Notification Preferences Success",r}return h(t,e),t}(K),Yp=function(e){function t(t){var r=e.call(this,"process","updateNotificationPreferences")||this;return r.payload=t,r.type="[User] Update Notification Preferences",r}return h(t,e),t}(te),Kp=function(e){function t(t){var r=e.call(this,"process","updateNotificationPreferences",t)||this;return r.payload=t,r.type="[User] Update Notification Preferences Fail",r}return h(t,e),t}(re),Zp=function(e){function t(t){var r=e.call(this,"process","updateNotificationPreferences")||this;return r.payload=t,r.type="[User] Update Notification Preferences Success",r}return h(t,e),t}(ne),Jp=function(e){function t(){var t=e.call(this,"process","updateNotificationPreferences")||this;return t.type="[User] Reset Notification Preferences",t}return h(t,e),t}(oe),Qp=function(e){function t(){var t=e.call(this,"[User] Notification Preferences")||this;return t.type="[User] Clear Notification Preferences",t}return h(t,e),t}(Z),Xp=function(e){function t(t){var r=e.call(this,eu)||this;return r.payload=t,r.type="Load Product Interests",r}return h(t,e),t}(z),ed=function(e){function t(t){var r=e.call(this,eu,t)||this;return r.payload=t,r.type="Load Product Interests Fail",r}return h(t,e),t}(Y),td=function(e){function t(t){var r=e.call(this,eu)||this;return r.payload=t,r.type="Load Product Interests Success",r}return h(t,e),t}(K),rd=function(e){function t(t){var r=e.call(this,"process","removeProductInterests")||this;return r.payload=t,r.type="Remove Product Interest",r}return h(t,e),t}(te),nd=function(e){function t(t){var r=e.call(this,"process","removeProductInterests")||this;return r.payload=t,r.type="Remove Product Interest Success",r}return h(t,e),t}(ne),od=function(e){function t(t){var r=e.call(this,"process","removeProductInterests",t)||this;return r.payload=t,r.type="Remove Product Interest Fail",r}return h(t,e),t}(re),id=function(e){function t(t){var r=e.call(this,"process","addProductInterests")||this;return r.payload=t,r.type="Add Product Interest",r}return h(t,e),t}(te),sd=function(e){function t(t){var r=e.call(this,"process","addProductInterests")||this;return r.payload=t,r.type="Add Product Interest Success",r}return h(t,e),t}(ne),ad=function(e){function t(t){var r=e.call(this,"process","addProductInterests",t)||this;return r.payload=t,r.type="Add Product Interest Fail",r}return h(t,e),t}(re),cd=function(e){function t(){var t=e.call(this,"process","addProductInterests")||this;return t.type="Add Product Interest Reset",t}return h(t,e),t}(oe),ud=function(e){function t(){var t=e.call(this,"process","removeProductInterests")||this;return t.type="Remove Product Interest Reset",t}return h(t,e),t}(oe),pd=function(e){function t(){var t=e.call(this,eu)||this;return t.type="Clear Product Interests",t}return h(t,e),t}(Z),dd=function(e){function t(t){var r=e.call(this,"[User] Return Request Details")||this;return r.payload=t,r.type="[User] Create Order Return Request",r}return h(t,e),t}(z),ld=function(e){function t(t){var r=e.call(this,"[User] Return Request Details",t)||this;return r.payload=t,r.type="[User] Create Order Return Request Fail",r}return h(t,e),t}(Y),fd=function(e){function t(t){var r=e.call(this,"[User] Return Request Details")||this;return r.payload=t,r.type="[User] Create Order Return Request Success",r}return h(t,e),t}(K),hd=function(e){function t(t){var r=e.call(this,"[User] Return Request Details")||this;return r.payload=t,r.type="[User] Load Order Return Request details",r}return h(t,e),t}(z),yd=function(e){function t(t){var r=e.call(this,"[User] Return Request Details",t)||this;return r.payload=t,r.type="[User] Load Order Return Request details Fail",r}return h(t,e),t}(Y),vd=function(e){function t(t){var r=e.call(this,"[User] Return Request Details")||this;return r.payload=t,r.type="[User] Load Order Return Request details Success",r}return h(t,e),t}(K),Cd=function(e){function t(t){var r=e.call(this,"process","cancelReturn")||this;return r.payload=t,r.type="[User] Cancel Order Return Request",r}return h(t,e),t}(te),Sd=function(e){function t(t){var r=e.call(this,"process","cancelReturn",t)||this;return r.payload=t,r.type="[User] Cancel Order Return Request Fail",r}return h(t,e),t}(re),gd=function(e){function t(){var t=e.call(this,"process","cancelReturn")||this;return t.type="[User] Cancel Order Return Request Success",t}return h(t,e),t}(ne),md=function(e){function t(t){var r=e.call(this,Zc)||this;return r.payload=t,r.type="[User] Load User Order Return Request List",r}return h(t,e),t}(z),Ed=function(e){function t(t){var r=e.call(this,Zc,t)||this;return r.payload=t,r.type="[User] Load User Order Return Request List Fail",r}return h(t,e),t}(Y),Id=function(e){function t(t){var r=e.call(this,Zc)||this;return r.payload=t,r.type="[User] Load User Order Return Request List Success",r}return h(t,e),t}(K),Rd=function(e){function t(){var t=e.call(this,"[User] Return Request Details")||this;return t.type="[User] Clear Order Return Request Details",t}return h(t,e),t}(Z),Td=function(e){function t(){var t=e.call(this,Zc)||this;return t.type="[User] Clear Order Return Request List",t}return h(t,e),t}(Z),Ad=function(e){function t(){var t=e.call(this,"process","cancelReturn")||this;return t.type="[User] Reset Cancel Return Request Process",t}return h(t,e),t}(oe),Ud=Object.freeze({__proto__:null,LOAD_BILLING_COUNTRIES:"[User] Load Billing Countries",LOAD_BILLING_COUNTRIES_FAIL:"[User] Load Billing Countries Fail",LOAD_BILLING_COUNTRIES_SUCCESS:"[User] Load Billing Countries Success",LoadBillingCountries:Dc,LoadBillingCountriesFail:Mc,LoadBillingCountriesSuccess:Fc,LOAD_CONSIGNMENT_TRACKING:"[User] Load Consignment Tracking",LOAD_CONSIGNMENT_TRACKING_FAIL:"[User] Load Consignment Tracking Fail",LOAD_CONSIGNMENT_TRACKING_SUCCESS:"[User] Load Consignment Tracking Success",CLEAR_CONSIGNMENT_TRACKING:"[User] Clear Consignment Tracking",LoadConsignmentTracking:kc,LoadConsignmentTrackingFail:Nc,LoadConsignmentTrackingSuccess:jc,ClearConsignmentTracking:xc,LOAD_DELIVERY_COUNTRIES:"[User] Load Delivery Countries",LOAD_DELIVERY_COUNTRIES_FAIL:"[User] Load Delivery Countries Fail",LOAD_DELIVERY_COUNTRIES_SUCCESS:"[User] Load Delivery Countries Success",LoadDeliveryCountries:$c,LoadDeliveryCountriesFail:Gc,LoadDeliveryCountriesSuccess:Bc,FORGOT_PASSWORD_EMAIL_REQUEST:"[User] Forgot Password Email Request",FORGOT_PASSWORD_EMAIL_REQUEST_SUCCESS:"[User] Forgot Password Email Request Success",FORGOT_PASSWORD_EMAIL_REQUEST_FAIL:"[User] Forgot Password Email Request Fail",ForgotPasswordEmailRequest:Hc,ForgotPasswordEmailRequestFail:Vc,ForgotPasswordEmailRequestSuccess:Wc,LOAD_ORDER_DETAILS:"[User] Load Order Details",LOAD_ORDER_DETAILS_FAIL:"[User] Load Order Details Fail",LOAD_ORDER_DETAILS_SUCCESS:"[User] Load Order Details Success",CLEAR_ORDER_DETAILS:"[User] Clear Order Details",CANCEL_ORDER:"[User] Cancel Order",CANCEL_ORDER_FAIL:"[User] Cancel Order Fail",CANCEL_ORDER_SUCCESS:"[User] Cancel Order Success",RESET_CANCEL_ORDER_PROCESS:"[User] Reset Cancel Order Process",LoadOrderDetails:tu,LoadOrderDetailsFail:ru,LoadOrderDetailsSuccess:nu,ClearOrderDetails:ou,CancelOrder:iu,CancelOrderFail:su,CancelOrderSuccess:au,ResetCancelOrderProcess:cu,LOAD_USER_PAYMENT_METHODS:"[User] Load User Payment Methods",LOAD_USER_PAYMENT_METHODS_FAIL:"[User] Load User Payment Methods Fail",LOAD_USER_PAYMENT_METHODS_SUCCESS:"[User] Load User Payment Methods Success",SET_DEFAULT_USER_PAYMENT_METHOD:"[User] Set Default User Payment Method",SET_DEFAULT_USER_PAYMENT_METHOD_FAIL:"[User] Set Default User Payment Method Fail",SET_DEFAULT_USER_PAYMENT_METHOD_SUCCESS:"[User] Set Default User Payment Method Success",DELETE_USER_PAYMENT_METHOD:"[User] Delete User Payment Method",DELETE_USER_PAYMENT_METHOD_FAIL:"[User] Delete User Payment Method Fail",DELETE_USER_PAYMENT_METHOD_SUCCESS:"[User] Delete User  Payment Method Success",LoadUserPaymentMethods:uu,LoadUserPaymentMethodsFail:pu,LoadUserPaymentMethodsSuccess:du,SetDefaultUserPaymentMethod:lu,SetDefaultUserPaymentMethodFail:fu,SetDefaultUserPaymentMethodSuccess:hu,DeleteUserPaymentMethod:yu,DeleteUserPaymentMethodFail:vu,DeleteUserPaymentMethodSuccess:Cu,LOAD_REGIONS:"[User] Load Regions",LOAD_REGIONS_SUCCESS:"[User] Load Regions Success",LOAD_REGIONS_FAIL:"[User] Load Regions Fail",CLEAR_REGIONS:"[User] Clear Regions",LoadRegions:Su,LoadRegionsFail:gu,LoadRegionsSuccess:mu,ClearRegions:Eu,RESET_PASSWORD:"[User] Reset Password",RESET_PASSWORD_SUCCESS:"[User] Reset Password Success",RESET_PASSWORD_FAIL:"[User] Reset Password Fail",ResetPassword:Iu,ResetPasswordFail:Ru,ResetPasswordSuccess:Tu,LOAD_TITLES:"[User] Load Tiltes",LOAD_TITLES_FAIL:"[User] Load Titles Fail",LOAD_TITLES_SUCCESS:"[User] Load Titles Success",LoadTitles:Au,LoadTitlesFail:Uu,LoadTitlesSuccess:Pu,UPDATE_EMAIL:"[User] Update Email",UPDATE_EMAIL_ERROR:"[User] Update Email Error",UPDATE_EMAIL_SUCCESS:"[User] Update Email Success",RESET_EMAIL:"[User] Reset Email",UpdateEmailAction:Lu,UpdateEmailSuccessAction:_u,UpdateEmailErrorAction:Ou,ResetUpdateEmailAction:bu,UPDATE_PASSWORD:"[User] Update Password",UPDATE_PASSWORD_FAIL:"[User] Update Password Fail",UPDATE_PASSWORD_SUCCESS:"[User] Update Password Success",UPDATE_PASSWORD_RESET:"[User] Reset Update Password Process State",UpdatePassword:wu,UpdatePasswordFail:Du,UpdatePasswordSuccess:Mu,UpdatePasswordReset:Fu,LOAD_USER_ADDRESSES:"[User] Load User Addresses",LOAD_USER_ADDRESSES_FAIL:"[User] Load User Addresses Fail",LOAD_USER_ADDRESSES_SUCCESS:"[User] Load User Addresses Success",ADD_USER_ADDRESS:"[User] Add User Address",ADD_USER_ADDRESS_FAIL:"[User] Add User Address Fail",ADD_USER_ADDRESS_SUCCESS:"[User] Add User Address Success",UPDATE_USER_ADDRESS:"[User] Update User Address",UPDATE_USER_ADDRESS_FAIL:"[User] Update User Address Fail",UPDATE_USER_ADDRESS_SUCCESS:"[User] Update User Address Success",DELETE_USER_ADDRESS:"[User] Delete User Address",DELETE_USER_ADDRESS_FAIL:"[User] Delete User Address Fail",DELETE_USER_ADDRESS_SUCCESS:"[User] Delete User Address Success",LoadUserAddresses:ku,LoadUserAddressesFail:Nu,LoadUserAddressesSuccess:ju,AddUserAddress:xu,AddUserAddressFail:$u,AddUserAddressSuccess:Gu,UpdateUserAddress:Bu,UpdateUserAddressFail:Hu,UpdateUserAddressSuccess:Vu,DeleteUserAddress:Wu,DeleteUserAddressFail:qu,DeleteUserAddressSuccess:zu,LOAD_USER_CONSENTS:"[User] Load User Consents",LOAD_USER_CONSENTS_SUCCESS:"[User] Load User Consents Success",LOAD_USER_CONSENTS_FAIL:"[User] Load User Consents Fail",RESET_LOAD_USER_CONSENTS:"[User] Reset Load User Consents",GIVE_USER_CONSENT:"[User] Give User Consent",GIVE_USER_CONSENT_FAIL:"[User] Give User Consent Fail",GIVE_USER_CONSENT_SUCCESS:"[User] Give User Consent Success",RESET_GIVE_USER_CONSENT_PROCESS:"[User] Reset Give User Consent Process",TRANSFER_ANONYMOUS_CONSENT:"[User] Transfer Anonymous Consent",WITHDRAW_USER_CONSENT:"[User] Withdraw User Consent",WITHDRAW_USER_CONSENT_FAIL:"[User] Withdraw User Consent Fail",WITHDRAW_USER_CONSENT_SUCCESS:"[User] Withdraw User Consent Success",RESET_WITHDRAW_USER_CONSENT_PROCESS:"[User] Reset Withdraw User Consent Process",LoadUserConsents:Yu,LoadUserConsentsFail:Ku,LoadUserConsentsSuccess:Zu,ResetLoadUserConsents:Ju,GiveUserConsent:Qu,GiveUserConsentFail:Xu,GiveUserConsentSuccess:ep,ResetGiveUserConsentProcess:tp,TransferAnonymousConsent:rp,WithdrawUserConsent:np,WithdrawUserConsentFail:op,WithdrawUserConsentSuccess:ip,ResetWithdrawUserConsentProcess:sp,LOAD_USER_DETAILS:"[User] Load User Details",LOAD_USER_DETAILS_FAIL:"[User] Load User Details Fail",LOAD_USER_DETAILS_SUCCESS:"[User] Load User Details Success",UPDATE_USER_DETAILS:"[User] Update User Details",UPDATE_USER_DETAILS_FAIL:"[User] Update User Details Fail",UPDATE_USER_DETAILS_SUCCESS:"[User] Update User Details Success",RESET_USER_DETAILS:"[User] Reset User Details",LoadUserDetails:ap,LoadUserDetailsFail:cp,LoadUserDetailsSuccess:up,UpdateUserDetails:pp,UpdateUserDetailsFail:dp,UpdateUserDetailsSuccess:lp,ResetUpdateUserDetails:fp,CLEAR_USER_MISCS_DATA:"[User] Clear User Misc Data",ClearUserMiscsData:hp,LOAD_USER_ORDERS:"[User] Load User Orders",LOAD_USER_ORDERS_FAIL:"[User] Load User Orders Fail",LOAD_USER_ORDERS_SUCCESS:"[User] Load User Orders Success",CLEAR_USER_ORDERS:"[User] Clear User Orders",LoadUserOrders:yp,LoadUserOrdersFail:vp,LoadUserOrdersSuccess:Cp,ClearUserOrders:Sp,REGISTER_USER:"[User] Register User",REGISTER_USER_FAIL:"[User] Register User Fail",REGISTER_USER_SUCCESS:"[User] Register User Success",RESET_REGISTER_USER_PROCESS:"[User] Reset Register User Process",REGISTER_GUEST:"[User] Register Guest",REGISTER_GUEST_FAIL:"[User] Register Guest Fail",REGISTER_GUEST_SUCCESS:"[User] Register Guest Success",REMOVE_USER:"[User] Remove User",REMOVE_USER_FAIL:"[User] Remove User Fail",REMOVE_USER_SUCCESS:"[User] Remove User Success",REMOVE_USER_RESET:"[User] Reset Remove User Process State",RegisterUser:gp,RegisterUserFail:mp,RegisterUserSuccess:Ep,ResetRegisterUserProcess:Ip,RegisterGuest:Rp,RegisterGuestFail:Tp,RegisterGuestSuccess:Ap,RemoveUser:Up,RemoveUserFail:Pp,RemoveUserSuccess:Lp,RemoveUserReset:_p,LOAD_CUSTOMER_COUPONS:"[User] Load Customer Coupons",LOAD_CUSTOMER_COUPONS_FAIL:"[User] Load Customer Coupons Fail",LOAD_CUSTOMER_COUPONS_SUCCESS:"[User] Load Customer Coupons Success",RESET_LOAD_CUSTOMER_COUPONS:"[User] Reset Load Customer Coupons",SUBSCRIBE_CUSTOMER_COUPON:"[User] Subscribe Customer Notification Coupon",SUBSCRIBE_CUSTOMER_COUPON_FAIL:"[User] Subscribe Customer Coupon Notification Fail",SUBSCRIBE_CUSTOMER_COUPON_SUCCESS:"[User] Subscribe Customer Coupon Notification Success",RESET_SUBSCRIBE_CUSTOMER_COUPON_PROCESS:"[User] Reset Subscribe Customer Coupon Process",UNSUBSCRIBE_CUSTOMER_COUPON:"[User] Unsubscribe Customer Notification Coupon",UNSUBSCRIBE_CUSTOMER_COUPON_FAIL:"[User] Unsubscribe Customer Coupon Notification Fail",UNSUBSCRIBE_CUSTOMER_COUPON_SUCCESS:"[User] Unsubscribe Customer Coupon Notification Success",RESET_UNSUBSCRIBE_CUSTOMER_COUPON_PROCESS:"[User] Reset Unsubscribe Customer Coupon Process",CLAIM_CUSTOMER_COUPON:"[User] Claim Customer",CLAIM_CUSTOMER_COUPON_FAIL:"[User] Claim Customer Fail",CLAIM_CUSTOMER_COUPON_SUCCESS:"[User] Claim Customer Success",LoadCustomerCoupons:Op,LoadCustomerCouponsFail:bp,LoadCustomerCouponsSuccess:wp,ResetLoadCustomerCoupons:Dp,SubscribeCustomerCoupon:Mp,SubscribeCustomerCouponFail:Fp,SubscribeCustomerCouponSuccess:kp,ResetSubscribeCustomerCouponProcess:Np,UnsubscribeCustomerCoupon:jp,UnsubscribeCustomerCouponFail:xp,UnsubscribeCustomerCouponSuccess:$p,ResetUnsubscribeCustomerCouponProcess:Gp,ClaimCustomerCoupon:Bp,ClaimCustomerCouponFail:Hp,ClaimCustomerCouponSuccess:Vp,LOAD_NOTIFICATION_PREFERENCES:"[User] Load Notification Preferences",LOAD_NOTIFICATION_PREFERENCES_FAIL:"[User] Load Notification Preferences Fail",LOAD_NOTIFICATION_PREFERENCES_SUCCESS:"[User] Load Notification Preferences Success",UPDATE_NOTIFICATION_PREFERENCES:"[User] Update Notification Preferences",UPDATE_NOTIFICATION_PREFERENCES_FAIL:"[User] Update Notification Preferences Fail",UPDATE_NOTIFICATION_PREFERENCES_SUCCESS:"[User] Update Notification Preferences Success",RESET_NOTIFICATION_PREFERENCES:"[User] Reset Notification Preferences",CLEAR_NOTIFICATION_PREFERENCES:"[User] Clear Notification Preferences",LoadNotificationPreferences:Wp,LoadNotificationPreferencesFail:qp,LoadNotificationPreferencesSuccess:zp,UpdateNotificationPreferences:Yp,UpdateNotificationPreferencesFail:Kp,UpdateNotificationPreferencesSuccess:Zp,ResetNotificationPreferences:Jp,ClearNotificationPreferences:Qp,LOAD_PRODUCT_INTERESTS:"Load Product Interests",LOAD_PRODUCT_INTERESTS_FAIL:"Load Product Interests Fail",LOAD_PRODUCT_INTERESTS_SUCCESS:"Load Product Interests Success",REMOVE_PRODUCT_INTEREST:"Remove Product Interest",REMOVE_PRODUCT_INTEREST_SUCCESS:"Remove Product Interest Success",REMOVE_PRODUCT_INTEREST_FAIL:"Remove Product Interest Fail",ADD_PRODUCT_INTEREST:"Add Product Interest",ADD_PRODUCT_INTEREST_FAIL:"Add Product Interest Fail",ADD_PRODUCT_INTEREST_SUCCESS:"Add Product Interest Success",ADD_PRODUCT_INTEREST_RESET:"Add Product Interest Reset",REMOVE_PRODUCT_INTEREST_RESET:"Remove Product Interest Reset",CLEAR_PRODUCT_INTERESTS:"Clear Product Interests",LoadProductInterests:Xp,LoadProductInterestsFail:ed,LoadProductInterestsSuccess:td,RemoveProductInterest:rd,RemoveProductInterestSuccess:nd,RemoveProductInterestFail:od,AddProductInterest:id,AddProductInterestSuccess:sd,AddProductInterestFail:ad,ResetAddInterestState:cd,ResetRemoveInterestState:ud,ClearProductInterests:pd,CREATE_ORDER_RETURN_REQUEST:"[User] Create Order Return Request",CREATE_ORDER_RETURN_REQUEST_FAIL:"[User] Create Order Return Request Fail",CREATE_ORDER_RETURN_REQUEST_SUCCESS:"[User] Create Order Return Request Success",LOAD_ORDER_RETURN_REQUEST:"[User] Load Order Return Request details",LOAD_ORDER_RETURN_REQUEST_FAIL:"[User] Load Order Return Request details Fail",LOAD_ORDER_RETURN_REQUEST_SUCCESS:"[User] Load Order Return Request details Success",CANCEL_ORDER_RETURN_REQUEST:"[User] Cancel Order Return Request",CANCEL_ORDER_RETURN_REQUEST_FAIL:"[User] Cancel Order Return Request Fail",CANCEL_ORDER_RETURN_REQUEST_SUCCESS:"[User] Cancel Order Return Request Success",LOAD_ORDER_RETURN_REQUEST_LIST:"[User] Load User Order Return Request List",LOAD_ORDER_RETURN_REQUEST_LIST_FAIL:"[User] Load User Order Return Request List Fail",LOAD_ORDER_RETURN_REQUEST_LIST_SUCCESS:"[User] Load User Order Return Request List Success",CLEAR_ORDER_RETURN_REQUEST:"[User] Clear Order Return Request Details",CLEAR_ORDER_RETURN_REQUEST_LIST:"[User] Clear Order Return Request List",RESET_CANCEL_RETURN_PROCESS:"[User] Reset Cancel Return Request Process",CreateOrderReturnRequest:dd,CreateOrderReturnRequestFail:ld,CreateOrderReturnRequestSuccess:fd,LoadOrderReturnRequest:hd,LoadOrderReturnRequestFail:yd,LoadOrderReturnRequestSuccess:vd,CancelOrderReturnRequest:Cd,CancelOrderReturnRequestFail:Sd,CancelOrderReturnRequestSuccess:gd,LoadOrderReturnRequestList:md,LoadOrderReturnRequestListFail:Ed,LoadOrderReturnRequestListSuccess:Id,ClearOrderReturnRequest:Rd,ClearOrderReturnRequestList:Td,ResetCancelReturnProcess:Ad}),Pd=n.createFeatureSelector("user"),Ld=function(e){return e.billingCountries},_d=n.createSelector(Pd,Ld),Od=function(e){return e.entities},bd=n.createSelector(_d,Od),wd=function(e){return Object.keys(e).map((function(t){return e[t]}))},Dd=n.createSelector(bd,wd),Md=n.createSelector(Pd,(function(e){return e.consignmentTracking})),Fd=n.createSelector(Md,(function(e){return e.tracking})),kd=n.createSelector(Pd,(function(e){return e.countries})),Nd=n.createSelector(kd,(function(e){return e.entities})),jd=n.createSelector(Nd,(function(e){return Object.keys(e).map((function(t){return e[t]}))})),xd=function(e){return n.createSelector(Nd,(function(t){return 0!==Object.keys(t).length?t[e]:null}))},$d=n.createSelector(Pd,(function(e){return e.order})),Gd=n.createSelector($d,(function(e){return ae(e)})),Bd=n.createSelector(Pd,(function(e){return e.orderReturn})),Hd=n.createSelector(Bd,(function(e){return ae(e)})),Vd=n.createSelector(Bd,(function(e){return ce(e)})),Wd=function(e){return pe(e)&&!ce(e)},qd=n.createSelector(Bd,Wd),zd=function(e){return e.orderReturnList},Yd=n.createSelector(Pd,zd),Kd=function(e){return ae(e)},Zd=n.createSelector(Yd,Kd),Jd=n.createSelector(Pd,(function(e){return e.payments})),Qd=n.createSelector(Jd,(function(e){return ae(e)})),Xd=n.createSelector(Jd,(function(e){return ce(e)})),el=n.createSelector(Jd,(function(e){return pe(e)&&!ce(e)})),tl=n.createSelector(Pd,(function(e){return e.regions})),rl=n.createSelector(tl,(function(e){return ae(e).entities})),nl=n.createSelector(tl,(function(e){return{loaded:pe(e),loading:ce(e),regions:ae(e).entities,country:ae(e).country}})),ol=n.createSelector(tl,(function(e){return ae(e).country})),il=n.createSelector(tl,(function(e){return ce(e)})),sl=n.createSelector(tl,(function(e){return pe(e)})),al=n.createSelector(Pd,(function(e){return e.resetPassword})),cl=n.createSelector(Pd,(function(e){return e.titles})),ul=n.createSelector(cl,(function(e){return e.entities})),pl=n.createSelector(ul,(function(e){return Object.keys(e).map((function(t){return e[t]}))})),dl=n.createSelector(Pd,(function(e){return e.addresses})),ll=n.createSelector(dl,(function(e){return ae(e)})),fl=n.createSelector(dl,(function(e){return ce(e)})),hl=n.createSelector(dl,(function(e){return pe(e)&&!ce(e)})),yl=n.createSelector(Pd,(function(e){return e.consents})),vl=n.createSelector(yl,ae),Cl=function(e){return n.createSelector(vl,(function(t){return t.find((function(t){return t.id===e}))}))},Sl=n.createSelector(yl,ce),gl=n.createSelector(yl,pe),ml=n.createSelector(yl,ue),El=n.createSelector(Pd,(function(e){return e.account})),Il=n.createSelector(El,(function(e){return e.details})),Rl=n.createSelector(Pd,(function(e){return e.orders})),Tl=n.createSelector(Rl,(function(e){return pe(e)})),Al=n.createSelector(Rl,(function(e){return ae(e)})),Ul=n.createSelector(Pd,(function(e){return e.customerCoupons})),Pl=n.createSelector(Ul,(function(e){return pe(e)})),Ll=n.createSelector(Ul,(function(e){return ce(e)})),_l=n.createSelector(Ul,(function(e){return ae(e)})),Ol=n.createSelector(Pd,(function(e){return e.notificationPreferences})),bl=n.createSelector(Ol,(function(e){return ae(e)})),wl=n.createSelector(Ol,(function(e){return ae(e).filter((function(e){return e.enabled}))})),Dl=n.createSelector(Ol,(function(e){return ce(e)})),Ml=n.createSelector(Pd,(function(e){return e.productInterests})),Fl=n.createSelector(Ml,(function(e){return ae(e)})),kl=n.createSelector(Ml,(function(e){return ce(e)})),Nl=Object.freeze({__proto__:null,getBillingCountriesState:_d,getBillingCountriesEntites:bd,getAllBillingCountries:Dd,"ɵ0":Ld,"ɵ1":Od,"ɵ2":wd,getConsignmentTrackingState:Md,getConsignmentTracking:Fd,getDeliveryCountriesState:kd,getDeliveryCountriesEntites:Nd,getAllDeliveryCountries:jd,countrySelectorFactory:xd,getUserState:Pd,getOrderState:$d,getOrderDetails:Gd,getOrderReturnRequestState:Bd,getOrderReturnRequest:Hd,getOrderReturnRequestLoading:Vd,getOrderReturnRequestSuccess:qd,getOrderReturnRequestListState:Yd,getOrderReturnRequestList:Zd,"ɵ3":Wd,"ɵ4":zd,"ɵ5":Kd,getPaymentMethodsState:Jd,getPaymentMethods:Qd,getPaymentMethodsLoading:Xd,getPaymentMethodsLoadedSuccess:el,getRegionsLoaderState:tl,getAllRegions:rl,getRegionsDataAndLoading:nl,getRegionsCountry:ol,getRegionsLoading:il,getRegionsLoaded:sl,getResetPassword:al,getTitlesState:cl,getTitlesEntites:ul,getAllTitles:pl,titleSelectorFactory:function(e){return n.createSelector(ul,(function(t){return 0!==Object.keys(t).length?t[e]:null}))},getAddressesLoaderState:dl,getAddresses:ll,getAddressesLoading:fl,getAddressesLoadedSuccess:hl,getConsentsState:yl,getConsentsValue:vl,getConsentByTemplateId:Cl,getConsentsLoading:Sl,getConsentsSuccess:gl,getConsentsError:ml,getDetailsState:El,getDetails:Il,getOrdersState:Rl,getOrdersLoaded:Tl,getOrders:Al,getCustomerCouponsState:Ul,getCustomerCouponsLoaded:Pl,getCustomerCouponsLoading:Ll,getCustomerCoupons:_l,getPreferencesLoaderState:Ol,getPreferences:bl,getEnabledPreferences:wl,getPreferencesLoading:Dl,getInterestsState:Ml,getInterests:Fl,getInterestsLoading:kl}),jl=function(){function e(e,t){this.store=e,this.authService=t}return e.prototype.loadConsents=function(){var e=this;this.authService.invokeWithUserId((function(t){e.store.dispatch(new Yu(t))}))},e.prototype.getConsents=function(e){var t=this;return void 0===e&&(e=!1),o.iif((function(){return e}),this.store.pipe(n.select(vl),i.withLatestFrom(this.getConsentsResultLoading(),this.getConsentsResultSuccess()),i.filter((function(e){var t=E(e,3),r=(t[0],t[1]);t[2];return!r})),i.tap((function(e){var r=E(e,3),n=r[0],o=(r[1],r[2]);n&&0!==n.length||o||t.loadConsents()})),i.filter((function(e){var t=E(e,2),r=t[0];t[1];return Boolean(r)})),i.map((function(e){var t=E(e,2),r=t[0];t[1];return r}))),this.store.pipe(n.select(vl)))},e.prototype.getConsentsResultLoading=function(){return this.store.pipe(n.select(Sl))},e.prototype.getConsentsResultSuccess=function(){return this.store.pipe(n.select(gl))},e.prototype.getConsentsResultError=function(){return this.store.pipe(n.select(ml))},e.prototype.resetConsentsProcessState=function(){this.store.dispatch(new Ju)},e.prototype.getConsent=function(e){var t=this;return this.authService.isUserLoggedIn().pipe(i.filter(Boolean),i.tap((function(){return t.getConsents(!0)})),i.switchMap((function(){return t.store.pipe(n.select(Cl(e)))})),i.filter((function(e){return Boolean(e)})),i.map((function(e){return e.currentConsent})))},e.prototype.isConsentGiven=function(e){return Boolean(e)&&Boolean(e.consentGivenDate)&&!Boolean(e.consentWithdrawnDate)},e.prototype.isConsentWithdrawn=function(e){return!Boolean(e)||Boolean(e.consentWithdrawnDate)},e.prototype.giveConsent=function(e,t){var r=this;this.authService.invokeWithUserId((function(n){r.store.dispatch(new Qu({userId:n,consentTemplateId:e,consentTemplateVersion:t}))}))},e.prototype.getGiveConsentResultLoading=function(){return this.store.pipe(n.select(_c("giveConsent")))},e.prototype.getGiveConsentResultSuccess=function(){return this.store.pipe(n.select(Oc("giveConsent")))},e.prototype.getGiveConsentResultError=function(){return this.store.pipe(n.select(bc("giveConsent")))},e.prototype.resetGiveConsentProcessState=function(){return this.store.dispatch(new tp)},e.prototype.withdrawConsent=function(e){var t=this;this.authService.invokeWithUserId((function(r){t.store.dispatch(new np({userId:r,consentCode:e}))}))},e.prototype.getWithdrawConsentResultLoading=function(){return this.store.pipe(n.select(_c("withdrawConsent")))},e.prototype.getWithdrawConsentResultSuccess=function(){return this.store.pipe(n.select(Oc("withdrawConsent")))},e.prototype.getWithdrawConsentResultError=function(){return this.store.pipe(n.select(bc("withdrawConsent")))},e.prototype.resetWithdrawConsentProcessState=function(){return this.store.dispatch(new sp)},e.prototype.filterConsentTemplates=function(e,t){var r,n;if(void 0===t&&(t=[]),0===t.length)return e;var o=[];try{for(var i=m(e),s=i.next();!s.done;s=i.next()){var a=s.value;!t.includes(a.id)&&o.push(a)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},e.ctorParameters=function(){return[{type:n.Store},{type:vt}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),xl=function(){function e(e){this.adapter=e}return e.prototype.loadAnonymousConsentTemplates=function(){return this.adapter.loadAnonymousConsentTemplates()},e.prototype.loadAnonymousConsents=function(){return this.adapter.loadAnonymousConsents?this.adapter.loadAnonymousConsents():null},e.ctorParameters=function(){return[{type:vs}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(vs))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),$l=function(){function e(e,t,r,n,s,a){var u=this;this.actions$=e,this.anonymousConsentTemplatesConnector=t,this.authService=r,this.anonymousConsentsConfig=n,this.anonymousConsentService=s,this.userConsentService=a,this.checkConsentVersions$=this.actions$.pipe(c.ofType("[Anonymous Consents] Check Updated Versions"),i.withLatestFrom(this.anonymousConsentService.getConsents()),i.concatMap((function(e){var t=E(e,2),r=(t[0],t[1]);return u.anonymousConsentTemplatesConnector.loadAnonymousConsents()?u.anonymousConsentTemplatesConnector.loadAnonymousConsents().pipe(i.map((function(e){var t=r.map((function(e){return e.templateVersion})),n=e.map((function(e){return e.templateVersion}));return u.detectUpdatedVersion(t,n)})),i.switchMap((function(e){return e?o.of(new jn):o.EMPTY})),i.catchError((function(e){return o.of(new $n(an(e)))}))):o.of(new jn)}))),this.loadAnonymousConsentTemplates$=this.actions$.pipe(c.ofType("[Anonymous Consents] Load Anonymous Consent Templates"),i.withLatestFrom(this.anonymousConsentService.getTemplates()),i.concatMap((function(e){var t=E(e,2),r=(t[0],t[1]);return u.anonymousConsentTemplatesConnector.loadAnonymousConsentTemplates().pipe(i.mergeMap((function(e){var t=!1;return r&&0!==r.length&&(t=u.anonymousConsentService.detectUpdatedTemplates(r,e)),[new xn(e),new Yn(t)]})),i.catchError((function(e){return o.of(new $n(an(e)))})))}))),this.transferAnonymousConsentsToUser$=this.actions$.pipe(c.ofType(Je),i.filter((function(){return Boolean(u.anonymousConsentsConfig.anonymousConsents)})),i.withLatestFrom(this.actions$.pipe(c.ofType("[User] Register User Success"))),i.filter((function(e){var t=E(e,2)[1];return Boolean(t)})),i.switchMap((function(){return u.anonymousConsentService.getConsents().pipe(i.withLatestFrom(u.authService.getOccUserId(),u.anonymousConsentService.getTemplates(),u.authService.isUserLoggedIn()),i.filter((function(e){return E(e,4)[3]})),i.concatMap((function(e){var t,r,n,i,s=E(e,4),a=s[0],c=s[1],p=s[2],d=(s[3],[]);try{for(var l=m(a),f=l.next();!f.done;f=l.next()){var h=f.value;if(u.anonymousConsentService.isConsentGiven(h)&&(!u.anonymousConsentsConfig.anonymousConsents.requiredConsents||!u.anonymousConsentsConfig.anonymousConsents.requiredConsents.includes(h.templateCode)))try{for(var y=(n=void 0,m(p)),v=y.next();!v.done;v=y.next()){var C=v.value;if(C.id===h.templateCode){d.push(new rp({userId:c,consentTemplateId:C.id,consentTemplateVersion:C.version}));break}}}catch(e){n={error:e}}finally{try{v&&!v.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return d.length>0?d:o.EMPTY})))}))),this.giveRequiredConsentsToUser$=this.actions$.pipe(c.ofType(Je),i.filter((function(e){return Boolean(u.anonymousConsentsConfig.anonymousConsents)&&Boolean(u.anonymousConsentsConfig.anonymousConsents.requiredConsents)&&Boolean(e)})),i.concatMap((function(){return u.userConsentService.getConsentsResultSuccess().pipe(i.withLatestFrom(u.authService.getOccUserId(),u.userConsentService.getConsents(),u.authService.isUserLoggedIn()),i.filter((function(e){return E(e,4)[3]})),i.tap((function(e){var t=E(e,4),r=t[0];t[1],t[2],t[3];r||u.userConsentService.loadConsents()})),i.map((function(e){var t=E(e,4),r=(t[0],t[1]),n=t[2];t[3];return{userId:r,templates:n}})),i.concatMap((function(e){var t,r,n=e.userId,i=e.templates,s=[];try{for(var a=m(i),c=a.next();!c.done;c=a.next()){var p=c.value;u.userConsentService.isConsentWithdrawn(p.currentConsent)&&u.anonymousConsentsConfig.anonymousConsents.requiredConsents.includes(p.id)&&s.push(new Qu({userId:n,consentTemplateId:p.id,consentTemplateVersion:p.version}))}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s.length>0?s:o.EMPTY})))})))}return e.prototype.detectUpdatedVersion=function(e,t){if(e.length!==t.length)return!0;for(var r=0;r<t.length;r++)if(e[r]!==t[r])return!0;return!1},e.ctorParameters=function(){return[{type:c.Actions},{type:xl},{type:vt},{type:mc},{type:lo},{type:jl}]},v([c.Effect()],e.prototype,"checkConsentVersions$",void 0),v([c.Effect()],e.prototype,"loadAnonymousConsentTemplates$",void 0),v([c.Effect()],e.prototype,"transferAnonymousConsentsToUser$",void 0),v([c.Effect()],e.prototype,"giveRequiredConsentsToUser$",void 0),e=v([t.Injectable()],e)}(),Gl=[$l],Bl=function(){function e(e){this.adapter=e}return e.prototype.getLanguages=function(){return this.adapter.loadLanguages()},e.prototype.getCurrencies=function(){return this.adapter.loadCurrencies()},e.prototype.getCountries=function(e){return this.adapter.loadCountries(e)},e.prototype.getRegions=function(e){return this.adapter.loadRegions(e)},e.prototype.getBaseSite=function(){return this.adapter.loadBaseSite()},e.ctorParameters=function(){return[{type:xi}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(xi))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Hl=function(){};function Vl(){var e;return(e={}).language=Bi,e.currency=Gi,e.baseSite=Nr,e}var Wl={provide:Hl,useFactory:Vl};function ql(e){if(void 0===Wt(e,"baseSite"))return"Please configure context.parameters.baseSite before using storefront library!"}function zl(){var e;return{context:(e={},e.language=["en","de","ja","zh","ru","fr","tr","it","es","uk","pl","nl","hi","ar","pt","bn","pa"],e.currency=["USD","EUR","JPY","GBP","AUD","CAD","CHF","CNY","SEK","NZD","MXN","SGD","HKD","NOK","KRW","TRY","RUB","INR","BRL","ZAR"],e)}}var Yl=function(){function e(e,t){this.config=e,this.initializerGuard=t,this.ongoingScopes$=new o.BehaviorSubject(void 0)}return Object.defineProperty(e.prototype,"isStable",{get:function(){return!this.initializerGuard||this.ongoingScopes$.value&&0===this.ongoingScopes$.value.length},enumerable:!0,configurable:!0}),e.prototype.getStableConfig=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return S(this,void 0,void 0,(function(){var t=this;return g(this,(function(r){return this.isStable?[2,this.config]:[2,this.ongoingScopes$.pipe(i.filter((function(r){return r&&t.areReady(e,r)})),i.take(1),i.mapTo(this.config)).toPromise()]}))}))},e.prototype.finishScopes=function(e){var t,r,n=I(this.ongoingScopes$.value);try{for(var o=m(e),i=o.next();!i.done;i=o.next()){var s=i.value;n.splice(n.indexOf(s),1)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}this.ongoingScopes$.next(n)},e.prototype.areReady=function(e,t){var r,n,o,i;if(!e.length)return!t.length;try{for(var s=m(e),a=s.next();!a.done;a=s.next()){var c=a.value;try{for(var u=(o=void 0,m(t)),p=u.next();!p.done;p=u.next()){var d=p.value;if(this.scopesOverlap(c,d))return!1}}catch(e){o={error:e}}finally{try{p&&!p.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!0},e.prototype.scopesOverlap=function(e,t){var r;return t.length>e.length&&(e=(r=E([t,e],2))[0],t=r[1]),e.startsWith(t)&&"."===(e[t.length]||".")},e.prototype.initialize=function(e){return S(this,void 0,void 0,(function(){var r,n,o,i,s,a,c,u,p,d=this;return g(this,(function(l){switch(l.label){case 0:if(this.ongoingScopes$.value)return[2];r=[],n=[],o=function(e){if(!e)return"continue";if(!e.scopes||!e.scopes.length)throw new Error("CONFIG_INITIALIZER should provide scope!");t.isDevMode()&&!i.areReady(e.scopes,r)&&console.warn("More than one CONFIG_INITIALIZER is initializing the same config scope."),r.push.apply(r,I(e.scopes)),n.push(S(d,void 0,void 0,(function(){var t,r;return g(this,(function(n){switch(n.label){case 0:return t=T,r=[this.config],[4,e.configFactory()];case 1:return t.apply(void 0,r.concat([n.sent()])),this.finishScopes(e.scopes),[2]}}))})))},i=this;try{for(s=m(e||[]),a=s.next();!a.done;a=s.next())c=a.value,o(c)}catch(e){u={error:e}}finally{try{a&&!a.done&&(p=s.return)&&p.call(s)}finally{if(u)throw u.error}}return this.ongoingScopes$.next(r),n.length?[4,Promise.all(n)]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}}))}))},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[A]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[Bs]}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(A),t.ɵɵinject(Bs,8))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"}),C(0,t.Inject(A)),C(1,t.Optional()),C(1,t.Inject(Bs))],e)}(),Kl=function(){function e(e,t,r){this.config=e,this.injector=t,this.serviceMap=r}return e.prototype.getContextParameters=function(){return this.config.context?Object.keys(this.config.context).filter((function(e){return"urlParameters"!==e})):[]},e.prototype.getUrlEncodingParameters=function(){return this.config.context&&this.config.context.urlParameters||[]},e.prototype.getParamValues=function(e){return Vt(this.config,e)},e.prototype.getParamDefaultValue=function(e){return Wt(this.config,e)},e.prototype.getSiteContextService=function(e){if(this.serviceMap[e])return this.injector.get(this.serviceMap[e],null)},e.prototype.getValue=function(e){var t,r=this.getSiteContextService(e);return r&&r.getActive().subscribe((function(e){return t=e})).unsubscribe(),void 0!==t?t:this.getParamDefaultValue(e)},e.prototype.setValue=function(e,t){var r=this.getSiteContextService(e);r&&r.setActive(t)},e.prototype.getValues=function(e){var t=this;return 0===e.length?o.of([]):o.combineLatest(e.map((function(e){return t.getSiteContextService(e).getActive().pipe(i.distinctUntilChanged())}))).pipe(i.filter((function(e){return e.every((function(e){return!!e}))})))},e.ctorParameters=function(){return[{type:zt},{type:t.Injector},{type:Hl}]},e=v([t.Injectable()],e)}(),Zl=/(^[^#?]*)(.*)/,Jl=function(e){function r(t){var r=e.call(this)||this;return r.siteContextParams=t,r}return h(r,e),Object.defineProperty(r.prototype,"urlEncodingParameters",{get:function(){return this.siteContextParams.getUrlEncodingParameters()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasContextInRoutes",{get:function(){return this.urlEncodingParameters.length>0},enumerable:!0,configurable:!0}),r.prototype.parse=function(t){if(this.hasContextInRoutes){var r=this.urlExtractContextParameters(t),n=e.prototype.parse.call(this,r.url);return this.urlTreeIncludeContextParameters(n,r.params),n}return e.prototype.parse.call(this,t)},r.prototype.urlExtractContextParameters=function(e){var t=E(e.match(Zl),3),r=t[1],n=t[2],o=r.split("/");""===o[0]&&o.shift();for(var i={},s=0,a=0;s<this.urlEncodingParameters.length&&a<o.length;){var c=this.urlEncodingParameters[s];this.siteContextParams.getParamValues(c).includes(o[a])&&(i[c]=o[a],a++),s++}return{url:e=o.slice(Object.keys(i).length).join("/")+n,params:i}},r.prototype.urlTreeIncludeContextParameters=function(e,t){e.siteContext=t},r.prototype.serialize=function(t){var r=this.urlTreeExtractContextParameters(t),n=e.prototype.serialize.call(this,t);return this.urlIncludeContextParameters(n,r)},r.prototype.urlTreeExtractContextParameters=function(e){return e.siteContext?e.siteContext:{}},r.prototype.urlIncludeContextParameters=function(e,t){var r=this;return this.urlEncodingParameters.map((function(e){return t[e]?t[e]:r.siteContextParams.getValue(e)})).join("/")+e},r.ctorParameters=function(){return[{type:Kl}]},r=v([t.Injectable()],r)}(a.DefaultUrlSerializer),Ql=function(){function e(e,t,r){this.siteContextParams=e,this.serializer=t,this.injector=r,this.subscription=new o.Subscription,this.contextValues={},this.isNavigating=!1}return e.prototype.init=function(){var e=this;return new Promise((function(t){e.router=e.injector.get(a.Router),e.location=e.injector.get(r.Location);var n=e.siteContextParams.getUrlEncodingParameters();n.length?(e.subscribeChanges(n),e.subscribeRouting(t)):t()}))},e.prototype.subscribeChanges=function(e){var t=this;e.forEach((function(e){var r=t.siteContextParams.getSiteContextService(e);r&&t.subscription.add(r.getActive().subscribe((function(r){if(!t.isNavigating&&t.contextValues[e]&&t.contextValues[e]!==r){var n=t.router.parseUrl(t.router.url),o=t.router.serializeUrl(n);t.location.replaceState(o)}t.contextValues[e]=r})))}))},e.prototype.subscribeRouting=function(e){var t=this,r=!1;this.subscription.add(this.router.events.pipe(i.filter((function(e){return e instanceof a.NavigationStart||e instanceof a.NavigationEnd||e instanceof a.NavigationError||e instanceof a.NavigationCancel}))).subscribe((function(n){t.isNavigating=n instanceof a.NavigationStart,t.isNavigating&&(t.setContextParamsFromRoute(n.url),r||(r=!0,e()))})))},e.prototype.setContextParamsFromRoute=function(e){var t=this,r=this.serializer.urlExtractContextParameters(e).params;Object.keys(r).forEach((function(e){return t.siteContextParams.setValue(e,r[e])}))},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.ctorParameters=function(){return[{type:Kl},{type:Jl},{type:t.Injector}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Kl),t.ɵɵinject(Jl),t.ɵɵinject(t.INJECTOR))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}();function Xl(e,t,r,n,o){return function(){n.getStableConfig("context").then((function(){o.init().then((function(){e.initialize(),t.initialize(),r.initialize()}))}))}}var ef=[Nr,Bi,Gi,{provide:t.APP_INITIALIZER,useFactory:Xl,deps:[Nr,Bi,Gi,Yl,Ql],multi:!0}],tf=[Kl,Jl,{provide:a.UrlSerializer,useExisting:Jl}],rf=function(){function e(e,t,r,n){var s=this;this.actions$=e,this.siteConnector=t,this.winRef=r,this.state=n,this.loadLanguages$=this.actions$.pipe(c.ofType(cr),i.exhaustMap((function(){return s.siteConnector.getLanguages().pipe(i.map((function(e){return new fr(e)})),i.catchError((function(e){return o.of(new lr(an(e)))})))}))),this.persist$=this.actions$.pipe(c.ofType(ur),i.tap((function(e){s.winRef.sessionStorage&&s.winRef.sessionStorage.setItem("language",e.payload)})),i.switchMapTo(o.NEVER)),this.activateLanguage$=this.state.select(Mr).pipe(i.bufferCount(2,1),i.filter((function(e){return!!E(e,1)[0]})),i.map((function(e){var t=E(e,2),r=t[0],n=t[1];return new yr({previous:r,current:n})})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:Bl},{type:St},{type:n.Store}]},v([c.Effect()],e.prototype,"loadLanguages$",void 0),v([c.Effect()],e.prototype,"persist$",void 0),v([c.Effect()],e.prototype,"activateLanguage$",void 0),e=v([t.Injectable()],e)}(),nf=function(){function e(e,t,r,n){var s=this;this.actions$=e,this.siteConnector=t,this.winRef=r,this.state=n,this.loadCurrencies$=this.actions$.pipe(c.ofType(er),i.exhaustMap((function(){return s.siteConnector.getCurrencies().pipe(i.map((function(e){return new ir(e)})),i.catchError((function(e){return o.of(new or(an(e)))})))}))),this.persist$=this.actions$.pipe(c.ofType(tr),i.tap((function(e){s.winRef.sessionStorage&&s.winRef.sessionStorage.setItem("currency",e.payload)})),i.switchMapTo(o.NEVER)),this.activateCurrency$=this.state.select(Pr).pipe(i.bufferCount(2,1),i.filter((function(e){return!!E(e,1)[0]})),i.map((function(e){var t=E(e,2),r=t[0],n=t[1];return new ar({previous:r,current:n})})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:Bl},{type:St},{type:n.Store}]},v([c.Effect()],e.prototype,"loadCurrencies$",void 0),v([c.Effect()],e.prototype,"persist$",void 0),v([c.Effect()],e.prototype,"activateCurrency$",void 0),e=v([t.Injectable()],e)}(),of=function(){function e(e,t){var r=this;this.actions$=e,this.siteConnector=t,this.loadBaseSite$=this.actions$.pipe(c.ofType(Yt),i.exhaustMap((function(){return r.siteConnector.getBaseSite().pipe(i.map((function(e){return new Jt(e)})),i.catchError((function(e){return o.of(new Zt(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:Bl}]},v([c.Effect()],e.prototype,"loadBaseSite$",void 0),e=v([t.Injectable()],e)}(),sf=[rf,nf,of],af={details:{},activeSite:""};function cf(e,t){switch(void 0===e&&(e=af),t.type){case"[Site-context] Load BaseSite Success":return y(y({},e),{details:t.payload});case"[Site-context] Set Active BaseSite":return y(y({},e),{activeSite:t.payload})}return e}var uf={entities:null,activeCurrency:null};function pf(e,t){switch(void 0===e&&(e=uf),t.type){case"[Site-context] Load Currencies Success":var r=t.payload.reduce((function(e,t){var r;return y(y({},e),((r={})[t.isocode]=t,r))}),y({},e.entities));return y(y({},e),{entities:r});case tr:var n=t.payload;return y(y({},e),{activeCurrency:n})}return e}var df={entities:null,activeLanguage:null};function lf(e,t){switch(void 0===e&&(e=df),t.type){case"[Site-context] Load Languages Success":var r=t.payload.reduce((function(e,t){var r;return y(y({},e),((r={})[t.isocode]=t,r))}),y({},e.entities));return y(y({},e),{entities:r});case ur:var n=t.payload;return y(y({},e),{activeLanguage:n})}return e}function ff(){return{languages:lf,currencies:pf,baseSite:cf}}var hf=new t.InjectionToken("SiteContextReducers"),yf={provide:hf,useFactory:ff};function vf(){var t;return{state:{ssrTransfer:{keys:(t={},t.siteContext=e.StateTransferType.TRANSFER_STATE,t)}}}}var Cf=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule,n.StoreModule.forFeature("siteContext",hf),c.EffectsModule.forFeature(sf)],providers:[b(vf),yf]})],e)}(),Sf=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:I([b(zl),Wl],ef,tf,[vc(ql)])}},e=r=v([t.NgModule({imports:[nn,Cf]})],e)}();function gf(e,t){switch(void 0===e&&(e=!1),t.type){case"[Anonymous Consents] Toggle Anonymous Consents Banner Dismissed":return t.dismissed}return e}function mf(e,t){switch(void 0===e&&(e=!1),t.type){case"[Anonymous Consents] Anonymous Consent Templates Updated":return t.updated}return e}var Ef=[];function If(e,t,r){return e?e.map((function(e){return e.templateCode===t&&(e=y(y({},e),{consentState:r})),e})):[]}function Rf(t,r){switch(void 0===t&&(t=Ef),r.type){case"[Anonymous Consents] Give Anonymous Consent":return If(t,r.templateCode,e.ANONYMOUS_CONSENT_STATUS.GIVEN);case"[Anonymous Consents] Withdraw Anonymous Consent":return If(t,r.templateCode,e.ANONYMOUS_CONSENT_STATUS.WITHDRAWN);case"[Anonymous Consents] Set Anonymous Consents":return r.payload}return t}function Tf(){return{templates:se(Nn),consents:Rf,ui:n.combineReducers({bannerDismissed:gf,updated:mf})}}var Af=new t.InjectionToken("AnonymousConsentsReducers"),Uf={provide:Af,useFactory:Tf};function Pf(e){return function(t,r){return r.type!==ze&&r.type!==pr||(t=y(y({},t),{templates:void 0})),e(t,r)}}var Lf=[Pf];function _f(){var t;return{state:{storageSync:{keys:(t={},t["anonymous-consents"]=e.StorageSyncType.LOCAL_STORAGE,t)}}}}var Of=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,nn,n.StoreModule.forFeature("anonymous-consents",Af,{metaReducers:Lf}),c.EffectsModule.forFeature(Gl)],providers:[b(_f),Uf]})],e)}(),bf=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:I(Ic,[lo,O(M)])}},e=r=v([t.NgModule({imports:[Of]})],e)}(),wf={asm:{agentSessionTimer:{startingDelayInSeconds:600},customerSearch:{maxResults:20}}},Df="[Auth] Customer Support Agent Token Data",Mf=function(){function e(e){this.asmAdapter=e}return e.prototype.customerSearch=function(e){return this.asmAdapter.customerSearch(e)},e.ctorParameters=function(){return[{type:fo}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(fo))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Ff=function(e){this.payload=e,this.type="[Asm] UI Update"},kf=function(e){function t(t){var r=e.call(this,"[asm] Customer search data")||this;return r.payload=t,r.type="[Asm] Customer Search",r}return h(t,e),t}(z),Nf=function(e){function t(t){var r=e.call(this,"[asm] Customer search data")||this;return r.payload=t,r.type="[Asm] Customer Search Fail",r}return h(t,e),t}(Y),jf=function(e){function t(t){var r=e.call(this,"[asm] Customer search data")||this;return r.payload=t,r.type="[Asm] Customer Search Success",r}return h(t,e),t}(K),xf=function(e){function t(){var t=e.call(this,"[asm] Customer search data")||this;return t.type="[Asm] Customer Search Reset",t}return h(t,e),t}(Z),$f=function(e){function t(t){var r=e.call(this,Df)||this;return r.payload=t,r.type="[Auth] Load Customer Service Agent Token",r}return h(t,e),t}(z),Gf=function(e){function t(t){var r=e.call(this,Df)||this;return r.payload=t,r.type="[Auth] Load Customer Service Agent Token Fail",r}return h(t,e),t}(Y),Bf=function(e){function t(t){var r=e.call(this,Df)||this;return r.payload=t,r.type="[Auth] Load Customer Service Agent Token Success",r}return h(t,e),t}(K),Hf=function(){this.type="[Auth] Logout Customer Support Agent"},Vf=Object.freeze({__proto__:null,ASM_UI_UPDATE:"[Asm] UI Update",AsmUiUpdate:Ff,CUSTOMER_SEARCH:"[Asm] Customer Search",CUSTOMER_SEARCH_FAIL:"[Asm] Customer Search Fail",CUSTOMER_SEARCH_SUCCESS:"[Asm] Customer Search Success",CUSTOMER_SEARCH_RESET:"[Asm] Customer Search Reset",CustomerSearch:kf,CustomerSearchFail:Nf,CustomerSearchSuccess:jf,CustomerSearchReset:xf,LOAD_CUSTOMER_SUPPORT_AGENT_TOKEN:"[Auth] Load Customer Service Agent Token",LOAD_CUSTOMER_SUPPORT_AGENT_TOKEN_FAIL:"[Auth] Load Customer Service Agent Token Fail",LOAD_CUSTOMER_SUPPORT_AGENT_TOKEN_SUCCESS:"[Auth] Load Customer Service Agent Token Success",LoadCustomerSupportAgentToken:$f,LoadCustomerSupportAgentTokenFail:Gf,LoadCustomerSupportAgentTokenSuccess:Bf,LogoutCustomerSupportAgent:Hf}),Wf=function(){function e(e,t){var r=this;this.actions$=e,this.asmConnector=t,this.customerSearch$=this.actions$.pipe(c.ofType("[Asm] Customer Search"),i.map((function(e){return e.payload})),i.switchMap((function(e){return r.asmConnector.customerSearch(e).pipe(i.map((function(e){return new jf(e)})),i.catchError((function(e){return o.of(new Nf(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:Mf}]},v([c.Effect()],e.prototype,"customerSearch$",void 0),e=v([t.Injectable()],e)}(),qf=function(){function e(e,t){var r=this;this.actions$=e,this.userTokenService=t,this.loadCustomerSupportAgentToken$=this.actions$.pipe(c.ofType("[Auth] Load Customer Service Agent Token"),i.map((function(e){return e.payload})),i.switchMap((function(e){var t=e.userId,n=e.password;return r.userTokenService.loadToken(t,n).pipe(i.map((function(e){var t=new Date;return t.setSeconds(t.getSeconds()+e.expires_in),e.expiration_time=t.toJSON(),new Bf(e)})),i.catchError((function(e){return o.of(new Gf(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:dn}]},v([c.Effect()],e.prototype,"loadCustomerSupportAgentToken$",void 0),e=v([t.Injectable()],e)}(),zf=[Wf,qf],Yf={collapsed:!1};function Kf(e,t){switch(void 0===e&&(e=Yf),t.type){case"[Asm] UI Update":return y(y({},e),t.payload);default:return e}}function Zf(){return{customerSearchResult:se("[asm] Customer search data"),asmUi:Kf,csagentToken:se(Df)}}var Jf=new t.InjectionToken("AsmReducers"),Qf={provide:Jf,useFactory:Zf};function Xf(e){return function(t,r){return"[Auth] Logout Customer Support Agent"===r.type&&(t=y(y({},t),{customerSearchResult:void 0,csagentToken:void 0})),e(t,r)}}var eh=[Xf];function th(){return{state:{storageSync:{keys:{"asm.asmUi":e.StorageSyncType.LOCAL_STORAGE,"asm.csagentToken.value.access_token":e.StorageSyncType.LOCAL_STORAGE,"asm.csagentToken.value.token_type":e.StorageSyncType.LOCAL_STORAGE,"asm.csagentToken.value.expires_in":e.StorageSyncType.LOCAL_STORAGE,"asm.csagentToken.value.expiration_time":e.StorageSyncType.LOCAL_STORAGE,"asm.csagentToken.value.scope":e.StorageSyncType.LOCAL_STORAGE,"asm.csagentToken.value.userId":e.StorageSyncType.LOCAL_STORAGE}}}}}var rh,nh=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule,nn,n.StoreModule.forFeature("asm",Jf,{metaReducers:eh}),c.EffectsModule.forFeature(zf)],providers:[b(th),Qf]})],e)}();(rh=e.GlobalMessageType||(e.GlobalMessageType={})).MSG_TYPE_CONFIRMATION="[GlobalMessage] Confirmation",rh.MSG_TYPE_ERROR="[GlobalMessage] Error",rh.MSG_TYPE_INFO="[GlobalMessage] Information",rh.MSG_TYPE_WARNING="[GlobalMessage] Warning";var oh,ih=function(){function e(){}return e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root",useExisting:A})],e)}(),sh="[Global-message] Add a Message",ah="[Global-message] Remove a Message",ch=function(e){this.payload=e,this.type=sh},uh=function(e){this.payload=e,this.type=ah},ph=function(e){this.payload=e,this.type="[Global-message] Remove messages by type"},dh=Object.freeze({__proto__:null,ADD_MESSAGE:sh,REMOVE_MESSAGE:ah,REMOVE_MESSAGES_BY_TYPE:"[Global-message] Remove messages by type",AddMessage:ch,RemoveMessage:uh,RemoveMessagesByType:ph}),lh=n.createFeatureSelector("global-message"),fh=function(e){return e.entities},hh=n.createSelector(lh,fh),yh=function(e){return n.createSelector(hh,(function(t){return t&&t[e]}))},vh=function(e){return n.createSelector(yh(e),(function(e){return e&&e.length}))},Ch=Object.freeze({__proto__:null,getGlobalMessageState:lh,getGlobalMessageEntities:hh,getGlobalMessageEntitiesByType:yh,getGlobalMessageCountByType:vh,"ɵ0":fh}),Sh=function(){function e(e){this.store=e}return e.prototype.get=function(){return this.store.pipe(n.select(hh),i.filter((function(e){return void 0!==e})))},e.prototype.add=function(e,t,r){this.store.dispatch(new ch({text:"string"==typeof e?{raw:e}:e,type:t,timeout:r}))},e.prototype.remove=function(e,t){this.store.dispatch(void 0!==t?new uh({type:e,index:t}):new ph(e))},e.ctorParameters=function(){return[{type:n.Store}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}();!function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.CONFLICT=409]="CONFLICT",e[e.BAD_GATEWAY=502]="BAD_GATEWAY",e[e.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR"}(oh||(oh={}));var gh=function(){function e(e){this.globalMessageService=e}return e.prototype.hasMatch=function(e){return e.status===this.responseStatus},e.ctorParameters=function(){return[{type:Sh}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Sh))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),mh=function(r){function n(){var e=null!==r&&r.apply(this,arguments)||this;return e.responseStatus=oh.BAD_GATEWAY,e}return h(n,r),n.prototype.handleError=function(){this.globalMessageService.add({key:"httpHandlers.badGateway"},e.GlobalMessageType.MSG_TYPE_ERROR)},n.prototype.getPriority=function(){return-10},n.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new n(t.ɵɵinject(Sh))},token:n,providedIn:"root"}),n=v([t.Injectable({providedIn:"root"})],n)}(gh);function Eh(e,t){return"anonymous"===t?e.guid:e.code}function Ih(e){return"notFound"===e.reason&&"cart"===e.subjectType&&(void 0===(t=e.subject)&&(t=""),!t.startsWith("selectivecart"));var t}function Rh(e){return"wishlist"+e}function Th(e){return e.startsWith("temp-")}var Ah=function(r){function n(){var e=null!==r&&r.apply(this,arguments)||this;return e.responseStatus=oh.BAD_REQUEST,e}return h(n,r),n.prototype.handleError=function(e,t){this.handleBadPassword(e,t),this.handleBadLoginResponse(e,t),this.handleBadCartRequest(e,t),this.handleValidationError(e,t),this.handleVoucherOperationError(e,t)},n.prototype.handleBadPassword=function(t,r){var n,o,i;(null===(n=r.url)||void 0===n?void 0:n.includes("/authorizationserver/oauth/token"))&&"invalid_grant"===(null===(o=r.error)||void 0===o?void 0:o.error)&&"password"===(null===(i=t.body)||void 0===i?void 0:i.get("grant_type"))&&(this.globalMessageService.add({key:"httpHandlers.badRequestPleaseLoginAgain",params:{errorMessage:r.error.error_description||r.message||""}},e.GlobalMessageType.MSG_TYPE_ERROR),this.globalMessageService.remove(e.GlobalMessageType.MSG_TYPE_CONFIRMATION))},n.prototype.handleBadLoginResponse=function(t,r){var n=this;this.getErrors(r).filter((function(e){return"PasswordMismatchError"===e.type})).forEach((function(){n.globalMessageService.add({key:"httpHandlers.badRequestOldPasswordIncorrect"},e.GlobalMessageType.MSG_TYPE_ERROR)}))},n.prototype.handleValidationError=function(t,r){var n=this;this.getErrors(r).filter((function(e){return"ValidationError"===e.type})).forEach((function(t){n.globalMessageService.add({key:"httpHandlers.validationErrors."+t.reason+"."+t.subject},e.GlobalMessageType.MSG_TYPE_ERROR)}))},n.prototype.handleBadCartRequest=function(t,r){var n=this;this.getErrors(r).filter((function(e){return Ih(e)})).forEach((function(){n.globalMessageService.add({key:"httpHandlers.cartNotFound"},e.GlobalMessageType.MSG_TYPE_ERROR)}))},n.prototype.handleVoucherOperationError=function(t,r){var n=this;this.getErrors(r).filter((function(e){return"coupon.invalid.code.provided"===e.message&&"VoucherOperationError"===e.type})).forEach((function(){n.globalMessageService.add({key:"httpHandlers.invalidCodeProvided"},e.GlobalMessageType.MSG_TYPE_ERROR)}))},n.prototype.getErrors=function(e){var t;return((null===(t=e.error)||void 0===t?void 0:t.errors)||[]).filter((function(e){return"JaloObjectNoLongerValidError"!==e.type}))},n.prototype.getPriority=function(){return-10},n.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new n(t.ɵɵinject(Sh))},token:n,providedIn:"root"}),n=v([t.Injectable({providedIn:"root"})],n)}(gh),Uh=function(r){function n(){var e=null!==r&&r.apply(this,arguments)||this;return e.responseStatus=oh.CONFLICT,e}return h(n,r),n.prototype.handleError=function(){this.globalMessageService.add({key:"httpHandlers.conflict"},e.GlobalMessageType.MSG_TYPE_ERROR)},n.prototype.getPriority=function(){return-10},n.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new n(t.ɵɵinject(Sh))},token:n,providedIn:"root"}),n=v([t.Injectable({providedIn:"root"})],n)}(gh),Ph=function(r){function n(){var e=null!==r&&r.apply(this,arguments)||this;return e.responseStatus=oh.FORBIDDEN,e}return h(n,r),n.prototype.handleError=function(){this.globalMessageService.add({key:"httpHandlers.forbidden"},e.GlobalMessageType.MSG_TYPE_ERROR)},n.prototype.getPriority=function(){return-10},n.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new n(t.ɵɵinject(Sh))},token:n,providedIn:"root"}),n=v([t.Injectable({providedIn:"root"})],n)}(gh),Lh=function(r){function n(){var e=null!==r&&r.apply(this,arguments)||this;return e.responseStatus=oh.GATEWAY_TIMEOUT,e}return h(n,r),n.prototype.handleError=function(){this.globalMessageService.add({key:"httpHandlers.gatewayTimeout"},e.GlobalMessageType.MSG_TYPE_ERROR)},n.prototype.getPriority=function(){return-10},n.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new n(t.ɵɵinject(Sh))},token:n,providedIn:"root"}),n=v([t.Injectable({providedIn:"root"})],n)}(gh),_h=function(r){function n(){var e=null!==r&&r.apply(this,arguments)||this;return e.responseStatus=oh.INTERNAL_SERVER_ERROR,e}return h(n,r),n.prototype.handleError=function(){this.globalMessageService.add({key:"httpHandlers.internalServerError"},e.GlobalMessageType.MSG_TYPE_ERROR)},n.prototype.getPriority=function(){return-10},n.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new n(t.ɵɵinject(Sh))},token:n,providedIn:"root"}),n=v([t.Injectable({providedIn:"root"})],n)}(gh),Oh=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.responseStatus=oh.NOT_FOUND,t}return h(r,e),r.prototype.handleError=function(){},r.prototype.getPriority=function(){return-10},r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(Sh))},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root"})],r)}(gh),bh=function(r){function n(e){var t=r.call(this,e)||this;return t.globalMessageService=e,t.responseStatus=oh.UNAUTHORIZED,t}return h(n,r),n.prototype.handleError=function(r,n){var o,i;t.isDevMode()&&console.warn('There\'s a problem with the "Oauth client" configuration. You must configure a matching Oauth client in the backend and Spartacus.'),"invalid_client"===(null===(o=n.error)||void 0===o?void 0:o.error)?this.globalMessageService.add((null===(i=n.error)||void 0===i?void 0:i.error_description)||{key:"httpHandlers.unauthorized.invalid_client"},e.GlobalMessageType.MSG_TYPE_ERROR):this.globalMessageService.add({key:"httpHandlers.unauthorized.common"},e.GlobalMessageType.MSG_TYPE_ERROR)},n.prototype.getPriority=function(){return-10},n.ctorParameters=function(){return[{type:Sh}]},n.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new n(t.ɵɵinject(Sh))},token:n,providedIn:"root"}),n=v([t.Injectable({providedIn:"root"})],n)}(gh),wh=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.responseStatus=oh.UNKNOWN,t}return h(r,e),r.prototype.hasMatch=function(e){return!0},r.prototype.handleError=function(){t.isDevMode()&&console.warn("Unknown http response error: "+this.responseStatus)},r.prototype.getPriority=function(){return-50},r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(Sh))},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root"})],r)}(gh);function Dh(e,t,r){void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===r&&(r=[]);var n=e.filter((function(e){return!e.hasMatch||e.hasMatch.apply(e,I(t))}));if(n.length<2)return n[0];var o=-1/0;return n.reduce((function(e,t){var n=t.getPriority?t.getPriority.apply(t,I(r)):0;return o>n?e:(o=n,t)}),void 0)}var Mh=function(){function e(e){this.handlers=e}return e.prototype.intercept=function(e,t){var r=this;return t.handle(e).pipe(i.catchError((function(t){if(t instanceof s.HttpErrorResponse)return r.handleErrorResponse(e,t),o.throwError(t)})))},e.prototype.handleErrorResponse=function(e,t){var r=this.getResponseHandler(t);r&&r.handleError(e,t)},e.prototype.getResponseHandler=function(e){return Dh(this.handlers,[e])},e.ctorParameters=function(){return[{type:Array,decorators:[{type:t.Inject,args:[gh]}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(gh))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"}),C(0,t.Inject(gh))],e)}(),Fh=[{provide:gh,useExisting:wh,multi:!0},{provide:gh,useExisting:mh,multi:!0},{provide:gh,useExisting:Ah,multi:!0},{provide:gh,useExisting:Uh,multi:!0},{provide:gh,useExisting:Ph,multi:!0},{provide:gh,useExisting:Lh,multi:!0},{provide:gh,useExisting:_h,multi:!0},{provide:gh,useExisting:Oh,multi:!0},{provide:gh,useExisting:bh,multi:!0}],kh=[{provide:s.HTTP_INTERCEPTORS,useExisting:Mh,multi:!0}],Nh={entities:{}};function jh(e,t){var r,n,o,i;switch(void 0===e&&(e=Nh),t.type){case sh:var s=t.payload;if(void 0===e.entities[s.type])return y(y({},e),{entities:y(y({},e.entities),(r={},r[s.type]=[s.text],r))});var a=e.entities[s.type];return y(y({},e),{entities:y(y({},e.entities),(n={},n[s.type]=I(a,[s.text]),n))});case ah:var c=t.payload.type,u=t.payload.index;if(0===Object.keys(e.entities).length||!e.entities[c])return e;var p=I(e.entities[c]);return p.splice(u,1),y(y({},e),{entities:y(y({},e.entities),(o={},o[c]=p,o))});case"[Global-message] Remove messages by type":var d=y(y({},e.entities),((i={})[t.payload]=[],i));return y(y({},e),{entities:d})}return e}function xh(){return jh}var $h=new t.InjectionToken("GlobalMessageReducers"),Gh={provide:$h,useFactory:xh},Bh=function(){function e(){}return e=v([t.NgModule({imports:[nn,n.StoreModule.forFeature("global-message",$h)],providers:[Gh]})],e)}();function Hh(e,t){if(e===t)return!0;if(e instanceof Object&&t instanceof Object){if(e.constructor!==t.constructor)return!1;for(var r in e)if(e.hasOwnProperty(r)){if(!t.hasOwnProperty(r))return!1;if(e[r]!==t[r]){if("object"!=typeof e[r])return!1;if(!Hh(e[r],t[r]))return!1}}for(var r in t)if(t.hasOwnProperty(r)&&!e.hasOwnProperty(r))return!1;return!0}return!1}function Vh(e,t){for(var r=0;r<t.length;r++)if(Hh(t[r],e))return r}var Wh=function(){function e(e,t,s,a){var u=this;this.actions$=e,this.store=t,this.config=s,this.platformId=a,this.removeDuplicated$=this.actions$.pipe(c.ofType(sh),i.pluck("payload"),i.switchMap((function(e){return o.of(e.text).pipe(i.withLatestFrom(u.store.pipe(n.select(yh(e.type)))),i.filter((function(e){var t,r=E(e,2),n=r[0],o=r[1];return t=n,o.reduce((function(e,r){return Hh(t,r)&&e++,e}),0)>1})),i.map((function(t){var r=E(t,2),n=r[0],o=r[1];return new uh({type:e.type,index:Vh(n,o)})})))}))),this.hideAfterDelay$=r.isPlatformBrowser(this.platformId)?this.actions$.pipe(c.ofType(sh),i.pluck("payload"),i.concatMap((function(e){var t=u.config.globalMessages[e.type];return u.store.pipe(n.select(vh(e.type)),i.take(1),i.filter((function(r){return(t&&void 0!==t.timeout||e.timeout)&&r&&r>0})),i.delay(e.timeout||t.timeout),i.switchMap((function(){return o.of(new uh({type:e.type,index:0}))})))}))):o.EMPTY}return e.ctorParameters=function(){return[{type:c.Actions},{type:n.Store},{type:ih},{type:void 0,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]},v([c.Effect()],e.prototype,"removeDuplicated$",void 0),v([c.Effect()],e.prototype,"hideAfterDelay$",void 0),e=v([t.Injectable(),C(3,t.Inject(t.PLATFORM_ID))],e)}();function qh(){var t;return{globalMessages:(t={},t[e.GlobalMessageType.MSG_TYPE_CONFIRMATION]={timeout:3e3},t[e.GlobalMessageType.MSG_TYPE_INFO]={timeout:3e3},t[e.GlobalMessageType.MSG_TYPE_ERROR]={timeout:7e3},t[e.GlobalMessageType.MSG_TYPE_WARNING]={timeout:7e3},t)}}var zh=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:I(Fh,kh)}},e=r=v([t.NgModule({imports:[Bh,c.EffectsModule.forFeature([Wh])],providers:[b(qh)]})],e)}(),Yh=n.createFeatureSelector("asm"),Kh=function(e){return e.asmUi},Zh=n.createSelector(Yh,Kh),Jh=n.createSelector(Yh,(function(e){return e.customerSearchResult})),Qh=function(e){return ae(e)},Xh=n.createSelector(Jh,Qh),ey=function(e){return ce(e)},ty=n.createSelector(Jh,ey),ry=n.createSelector(Yh,(function(e){return e.csagentToken})),ny=n.createSelector(ry,(function(e){return ae(e)})),oy=n.createSelector(ry,(function(e){return ce(e)})),iy=Object.freeze({__proto__:null,getAsmUi:Zh,"ɵ0":Kh,getCustomerSearchResultsLoaderState:Jh,getCustomerSearchResults:Xh,getCustomerSearchResultsLoading:ty,"ɵ1":Qh,"ɵ2":ey,getAsmState:Yh,getCustomerSupportAgentTokenState:ry,getCustomerSupportAgentToken:ny,getCustomerSupportAgentTokenLoading:oy}),sy=function(){function e(e,t){this.store=e,this.authService=t}return e.prototype.authorizeCustomerSupportAgent=function(e,t){this.store.dispatch(new $f({userId:e,password:t}))},e.prototype.startCustomerEmulationSession=function(e,t){this.authService.authorizeWithToken(y(y({},e),{userId:t}))},e.prototype.isCustomerEmulationToken=function(e){return Boolean(e)&&Boolean(e.userId)&&"current"!==e.userId},e.prototype.getCustomerSupportAgentToken=function(){return this.store.pipe(n.select(ny))},e.prototype.getCustomerSupportAgentTokenLoading=function(){return this.store.pipe(n.select(oy))},e.prototype.logoutCustomerSupportAgent=function(){var e=this;this.getCustomerSupportAgentToken().pipe(i.take(1)).subscribe((function(t){e.store.dispatch(new Hf),e.store.dispatch(new ot(t))}))},e.ctorParameters=function(){return[{type:n.Store},{type:vt}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),ay=function(){function r(e,t){this.asmAuthService=e,this.globalMessageService=t}return r.prototype.terminateCustomerSupportAgentExpiredSession=function(){this.asmAuthService.logoutCustomerSupportAgent(),this.globalMessageService.add({key:"asm.csagentTokenExpired"},e.GlobalMessageType.MSG_TYPE_ERROR)},r.ctorParameters=function(){return[{type:sy},{type:Sh}]},r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(sy),t.ɵɵinject(Sh))},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root"})],r)}(),cy=function(){function e(e){this.csagentErrorHandlingService=e}return e.prototype.intercept=function(e,t){var r=this,n=this.isCustomerSupportAgentRequest(e);return n&&(e=N.removeHeader("cx-use-csagent-token",e)),t.handle(e).pipe(i.catchError((function(e){return e instanceof s.HttpErrorResponse&&n&&401===e.status?(r.csagentErrorHandlingService.terminateCustomerSupportAgentExpiredSession(),o.of(void 0)):o.throwError(e)})))},e.prototype.isCustomerSupportAgentRequest=function(e){var t=N.getInterceptorParam("cx-use-csagent-token",e.headers);return Boolean(t)},e.ctorParameters=function(){return[{type:ay}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(ay))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),uy=function(){function e(e){this.asmAuthService=e}return e.prototype.intercept=function(e,t){return this.getCustomerSupportAgentToken(e).pipe(i.take(1),i.switchMap((function(r){return r&&(e=e.clone({setHeaders:{Authorization:r.token_type+" "+r.access_token}})),t.handle(e)})))},e.prototype.getCustomerSupportAgentToken=function(e){return N.getInterceptorParam("cx-use-csagent-token",e.headers)?this.asmAuthService.getCustomerSupportAgentToken():o.of(null)},e.ctorParameters=function(){return[{type:sy}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(sy))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),py=[{provide:s.HTTP_INTERCEPTORS,useExisting:uy,multi:!0},{provide:s.HTTP_INTERCEPTORS,useExisting:cy,multi:!0}],dy=function(){function e(){}var n;return n=e,e.forRoot=function(){return{ngModule:n,providers:I(py,[O(wf)])}},e=n=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule,nh]})],e)}(),ly=function(){function e(e){this.store=e}return e.prototype.customerSearch=function(e){this.store.dispatch(new kf(e))},e.prototype.customerSearchReset=function(){this.store.dispatch(new xf)},e.prototype.getCustomerSearchResults=function(){return this.store.pipe(n.select(Xh))},e.prototype.getCustomerSearchResultsLoading=function(){return this.store.pipe(n.select(ty))},e.prototype.updateAsmUiState=function(e){this.store.dispatch(new Ff(e))},e.prototype.getAsmUiState=function(){return this.store.pipe(n.select(Zh))},e.ctorParameters=function(){return[{type:n.Store}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),fy=function(){function e(){}return e.prototype.getScore=function(e){var t=0;return this.pageType&&(t+=e.type===this.pageType?1:-1),this.pageTemplate&&(t+=e.template===this.pageTemplate?1:-1),t},e.prototype.hasMatch=function(e){return this.getScore(e)>0},e.prototype.getPriority=function(e){return this.getScore(e)},e}(),hy=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,yy="[Multi Cart] Multi Cart Data",vy=n.createFeatureSelector("cart"),Cy=function(e){return e.carts},Sy=n.createSelector(vy,Cy),gy=function(e){return n.createSelector(Sy,(function(t){return Fe(t,e)}))},my=function(e){return n.createSelector(Sy,(function(t){return le(t,e)}))},Ey=function(e){return n.createSelector(Sy,(function(t){return Me(t,e)}))},Iy=function(e){return n.createSelector(Sy,(function(t){return De(t,e)}))},Ry=function(e){return n.createSelector(my(e),(function(e){return e&&e.entries?e.entries:[]}))},Ty=function(e,t){return n.createSelector(Ry(e),(function(e){return e?e.find((function(e){return e.product.code===t})):void 0}))},Ay=function(e){return e.active},Uy=n.createSelector(vy,Ay),Py=function(e){return e.wishList},Ly=n.createSelector(vy,Py),_y=Object.freeze({__proto__:null,getMultiCartState:vy,getMultiCartEntities:Sy,getCartEntitySelectorFactory:gy,getCartSelectorFactory:my,getCartIsStableSelectorFactory:Ey,getCartHasPendingProcessesSelectorFactory:Iy,getCartEntriesSelectorFactory:Ry,getCartEntrySelectorFactory:Ty,getActiveCartId:Uy,getWishListId:Ly,"ɵ0":Cy,"ɵ1":Ay,"ɵ2":Py}),Oy=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart-entry] Add Entry",r}return h(t,e),t}(Ue),by=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart-entry] Add Entry Success",r}return h(t,e),t}(Pe),wy=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart-entry] Add Entry Fail",r}return h(t,e),t}(Pe),Dy=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart-entry] Remove Entry",r}return h(t,e),t}(Ue),My=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart-entry] Remove Entry Success",r}return h(t,e),t}(Pe),Fy=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart-entry] Remove Entry Fail",r}return h(t,e),t}(Pe),ky=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart-entry] Update Entry",r}return h(t,e),t}(Ue),Ny=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart-entry] Update Entry Success",r}return h(t,e),t}(Pe),jy=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart-entry] Update Entry Fail",r}return h(t,e),t}(Pe),xy="[Cart-voucher] Add Cart Vouchers",$y=function(e){function t(t){var r=e.call(this,"process","addVoucher")||this;return r.payload=t,r.type=xy,r}return h(t,e),t}(te),Gy=function(e){function t(t){var r=e.call(this,"process","addVoucher",t.error)||this;return r.payload=t,r.type="[Cart-voucher] Add Cart Voucher Fail",r}return h(t,e),t}(re),By=function(e){function t(t){var r=e.call(this,"process","addVoucher")||this;return r.payload=t,r.type="[Cart-voucher] Add Cart Voucher Success",r}return h(t,e),t}(ne),Hy=function(e){function t(){var t=e.call(this,"process","addVoucher")||this;return t.type="[Cart-voucher] Reset Add Cart Voucher",t}return h(t,e),t}(oe),Vy=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart-voucher] Remove Cart Voucher",r}return h(t,e),t}(Ue),Wy=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart-voucher] Remove Cart Voucher Fail",r}return h(t,e),t}(Pe),qy=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart-voucher] Remove Cart Voucher Success",r}return h(t,e),t}(Pe),zy="[Cart] Create Cart",Yy=function(e){function t(t){var r=e.call(this,yy,t.tempCartId)||this;return r.payload=t,r.type=zy,r}return h(t,e),t}(te),Ky=function(e){function t(t){var r=e.call(this,yy,t.tempCartId)||this;return r.payload=t,r.type="[Cart] Create Cart Fail",r}return h(t,e),t}(re),Zy=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart] Create Cart Success",r}return h(t,e),t}(ne),Jy=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart] Add Email to Cart",r}return h(t,e),t}(Ue),Qy=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart] Add Email to Cart Fail",r}return h(t,e),t}(Pe),Xy=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart] Add Email to Cart Success",r}return h(t,e),t}(Pe),ev=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart] Load Cart",r}return h(t,e),t}(te),tv=function(e){function t(t){var r=e.call(this,yy,t.cartId,t.error)||this;return r.payload=t,r.type="[Cart] Load Cart Fail",r}return h(t,e),t}(re),rv=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart] Load Cart Success",r}return h(t,e),t}(ne),nv=function(e){this.payload=e,this.type="[Cart] Merge Cart"},ov=function(e){function t(t){var r=e.call(this,yy,t.oldCartId)||this;return r.payload=t,r.type="[Cart] Merge Cart Success",r}return h(t,e),t}(G),iv=function(e){function t(){var t=e.call(this,yy)||this;return t.type="[Cart] Reset Cart Details",t}return h(t,e),t}(ge),sv=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart] Remove Cart",r}return h(t,e),t}(G),av=function(e){this.payload=e,this.type="[Cart] Delete Cart"},cv=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Cart] Delete Cart Success",r}return h(t,e),t}(G),uv=function(e){this.payload=e,this.type="[Cart] Delete Cart Fail"},pv=function(e){function t(t){var r=e.call(this,yy,t.tempCartId,t.cart)||this;return r.payload=t,r.type="[Cart] Set Temp Cart",r}return h(t,e),t}(ne),dv=function(e){function t(t){var r=e.call(this,yy,t)||this;return r.payload=t,r.type="[Cart] Cart Processes Increment",r}return h(t,e),t}(Ue),lv=function(e){function t(t){var r=e.call(this,yy,t)||this;return r.payload=t,r.type="[Cart] Cart Processes Decrement",r}return h(t,e),t}(Pe),fv=function(e){this.payload=e,this.type="[Cart] Set Active Cart Id"},hv=function(e){function t(){var t=e.call(this,yy)||this;return t.type="[Cart] Clear Cart State",t}return h(t,e),t}(B),yv=function(e){this.payload=e,this.type="[Wish List] Create Wish List"},vv=function(e){function t(t){var r=e.call(this,yy,Eh(t.cart,t.userId))||this;return r.payload=t,r.type="[Wish List] Create Wish List Success",r}return h(t,e),t}(ne),Cv=function(e){function t(t){var r=e.call(this,yy,t.cartId,t.error)||this;return r.payload=t,r.type="[Wish List] Create Wish List Fail",r}return h(t,e),t}(re),Sv=function(e){function t(t){var r=e.call(this,yy,t.tempCartId)||this;return r.payload=t,r.type="[Wish List] Load Wish List",r}return h(t,e),t}(te),gv=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Wish List] Load Wish List Success",r}return h(t,e),t}(ne),mv=function(e){function t(t){var r=e.call(this,yy,t.cartId,t.error)||this;return r.payload=t,r.type="[Wish List] Load Wish List Fail",r}return h(t,e),t}(re),Ev=Object.freeze({__proto__:null,CART_ADD_ENTRY:"[Cart-entry] Add Entry",CART_ADD_ENTRY_SUCCESS:"[Cart-entry] Add Entry Success",CART_ADD_ENTRY_FAIL:"[Cart-entry] Add Entry Fail",CART_REMOVE_ENTRY:"[Cart-entry] Remove Entry",CART_REMOVE_ENTRY_SUCCESS:"[Cart-entry] Remove Entry Success",CART_REMOVE_ENTRY_FAIL:"[Cart-entry] Remove Entry Fail",CART_UPDATE_ENTRY:"[Cart-entry] Update Entry",CART_UPDATE_ENTRY_SUCCESS:"[Cart-entry] Update Entry Success",CART_UPDATE_ENTRY_FAIL:"[Cart-entry] Update Entry Fail",CartAddEntry:Oy,CartAddEntrySuccess:by,CartAddEntryFail:wy,CartRemoveEntry:Dy,CartRemoveEntrySuccess:My,CartRemoveEntryFail:Fy,CartUpdateEntry:ky,CartUpdateEntrySuccess:Ny,CartUpdateEntryFail:jy,CART_ADD_VOUCHER:xy,CART_ADD_VOUCHER_FAIL:"[Cart-voucher] Add Cart Voucher Fail",CART_ADD_VOUCHER_SUCCESS:"[Cart-voucher] Add Cart Voucher Success",CART_RESET_ADD_VOUCHER:"[Cart-voucher] Reset Add Cart Voucher",CART_REMOVE_VOUCHER:"[Cart-voucher] Remove Cart Voucher",CART_REMOVE_VOUCHER_FAIL:"[Cart-voucher] Remove Cart Voucher Fail",CART_REMOVE_VOUCHER_SUCCESS:"[Cart-voucher] Remove Cart Voucher Success",CartAddVoucher:$y,CartAddVoucherFail:Gy,CartAddVoucherSuccess:By,CartResetAddVoucher:Hy,CartRemoveVoucher:Vy,CartRemoveVoucherFail:Wy,CartRemoveVoucherSuccess:qy,CREATE_CART:zy,CREATE_CART_FAIL:"[Cart] Create Cart Fail",CREATE_CART_SUCCESS:"[Cart] Create Cart Success",LOAD_CART:"[Cart] Load Cart",LOAD_CART_FAIL:"[Cart] Load Cart Fail",LOAD_CART_SUCCESS:"[Cart] Load Cart Success",ADD_EMAIL_TO_CART:"[Cart] Add Email to Cart",ADD_EMAIL_TO_CART_FAIL:"[Cart] Add Email to Cart Fail",ADD_EMAIL_TO_CART_SUCCESS:"[Cart] Add Email to Cart Success",MERGE_CART:"[Cart] Merge Cart",MERGE_CART_SUCCESS:"[Cart] Merge Cart Success",RESET_CART_DETAILS:"[Cart] Reset Cart Details",REMOVE_CART:"[Cart] Remove Cart",DELETE_CART:"[Cart] Delete Cart",DELETE_CART_SUCCESS:"[Cart] Delete Cart Success",DELETE_CART_FAIL:"[Cart] Delete Cart Fail",CreateCart:Yy,CreateCartFail:Ky,CreateCartSuccess:Zy,AddEmailToCart:Jy,AddEmailToCartFail:Qy,AddEmailToCartSuccess:Xy,LoadCart:ev,LoadCartFail:tv,LoadCartSuccess:rv,MergeCart:nv,MergeCartSuccess:ov,ResetCartDetails:iv,RemoveCart:sv,DeleteCart:av,DeleteCartSuccess:cv,DeleteCartFail:uv,SET_TEMP_CART:"[Cart] Set Temp Cart",CART_PROCESSES_INCREMENT:"[Cart] Cart Processes Increment",CART_PROCESSES_DECREMENT:"[Cart] Cart Processes Decrement",SET_ACTIVE_CART_ID:"[Cart] Set Active Cart Id",CLEAR_CART_STATE:"[Cart] Clear Cart State",SetTempCart:pv,CartProcessesIncrement:dv,CartProcessesDecrement:lv,SetActiveCartId:fv,ClearCartState:hv,CREATE_WISH_LIST:"[Wish List] Create Wish List",CREATE_WISH_LIST_FAIL:"[Wish List] Create Wish List Fail",CREATE_WISH_LIST_SUCCESS:"[Wish List] Create Wish List Success",LOAD_WISH_LIST:"[Wish List] Load Wish List",LOAD_WISH_LIST_SUCCESS:"[Wish List] Load Wish List Success",LOAD_WISH_LIST_FAIL:"[Wish List] Load Wish List Fail",RESET_WISH_LIST_DETAILS:"[Wish List] Reset Wish List",CreateWishList:yv,CreateWishListSuccess:vv,CreateWishListFail:Cv,LoadWishList:Sv,LoadWishListSuccess:gv,LoadWishListFail:mv}),Iv=function(){function e(e){this.store=e}return e.prototype.getCart=function(e){return this.store.pipe(n.select(my(e)))},e.prototype.getCartEntity=function(e){return this.store.pipe(n.select(gy(e)))},e.prototype.isStable=function(e){return this.store.pipe(n.select(Ey(e)),i.debounce((function(e){return e?o.timer(0):o.EMPTY})),i.distinctUntilChanged())},e.prototype.generateTempCartId=function(){return"temp-"+Math.random().toString(36).substr(2,9)},e.prototype.createCart=function(e){var t=e.userId,r=e.oldCartId,n=e.toMergeCartGuid,o=e.extraData,i=this.generateTempCartId();return this.store.dispatch(new Yy({extraData:o,userId:t,oldCartId:r,toMergeCartGuid:n,tempCartId:i})),this.getCartEntity(i)},e.prototype.mergeToCurrentCart=function(e){var t=e.userId,r=e.cartId,n=e.extraData,o=this.generateTempCartId();this.store.dispatch(new nv({userId:t,cartId:r,extraData:n,tempCartId:o}))},e.prototype.loadCart=function(e){var t=e.cartId,r=e.userId,n=e.extraData;this.store.dispatch(new ev({userId:r,cartId:t,extraData:n}))},e.prototype.getEntries=function(e){return this.store.pipe(n.select(Ry(e)))},e.prototype.addEntry=function(e,t,r,n){this.store.dispatch(new Oy({userId:e,cartId:t,productCode:r,quantity:n}))},e.prototype.addEntries=function(e,t,r){var n=this;r.forEach((function(r){n.store.dispatch(new Oy({userId:e,cartId:t,productCode:r.productCode,quantity:r.quantity}))}))},e.prototype.removeEntry=function(e,t,r){this.store.dispatch(new Dy({userId:e,cartId:t,entryNumber:""+r}))},e.prototype.updateEntry=function(e,t,r,n){n>0?this.store.dispatch(new ky({userId:e,cartId:t,entryNumber:""+r,quantity:n})):this.removeEntry(e,t,r)},e.prototype.getEntry=function(e,t){return this.store.pipe(n.select(Ty(e,t)))},e.prototype.assignEmail=function(e,t,r){this.store.dispatch(new Jy({userId:t,cartId:e,email:r}))},e.prototype.deleteCart=function(e,t){this.store.dispatch(new av({userId:t,cartId:e}))},e.ctorParameters=function(){return[{type:n.Store}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Rv=function(){function e(e,t,r){var o=this;this.store=e,this.authService=t,this.multiCartService=r,this.PREVIOUS_USER_ID_INITIAL_VALUE="PREVIOUS_USER_ID_INITIAL_VALUE",this.previousUserId=this.PREVIOUS_USER_ID_INITIAL_VALUE,this.userId="anonymous",this.activeCartId$=this.store.pipe(n.select(Uy),i.map((function(e){return e||"current"}))),this.cartSelector$=this.activeCartId$.pipe(i.switchMap((function(e){return o.multiCartService.getCartEntity(e)}))),this.authService.getOccUserId().subscribe((function(e){o.userId=e,"anonymous"!==o.userId&&o.isJustLoggedIn(e)&&o.loadOrMerge(o.cartId),o.previousUserId=e})),this.activeCartId$.subscribe((function(e){o.cartId=e})),this.initActiveCart()}return e.prototype.initActiveCart=function(){var e=this;this.activeCart$=this.cartSelector$.pipe(i.withLatestFrom(this.activeCartId$),i.map((function(e){var t=E(e,2),r=t[0],n=t[1];return{cart:r.value,cartId:n,isStable:!r.loading&&0===r.processesCount,loaded:(r.error||r.success)&&!r.loading}})),i.filter((function(t){var r=t.isStable,n=t.cart;return r||e.isEmpty(n)})),i.tap((function(t){var r=t.cart,n=t.cartId,o=t.loaded;t.isStable&&e.isEmpty(r)&&!o&&!Th(n)&&e.load(n)})),i.map((function(e){var t=e.cart;return t||{}})),i.tap((function(t){t&&(e.cartUser=t.user)})),i.distinctUntilChanged(),i.shareReplay({bufferSize:1,refCount:!0}))},e.prototype.getActive=function(){return this.activeCart$},e.prototype.getActiveCartId=function(){var e=this;return this.activeCart$.pipe(i.map((function(t){return Eh(t,e.userId)})),i.distinctUntilChanged())},e.prototype.getEntries=function(){var e=this;return this.activeCartId$.pipe(i.switchMap((function(t){return e.multiCartService.getEntries(t)})),i.distinctUntilChanged())},e.prototype.getLoading=function(){return this.cartSelector$.pipe(i.map((function(e){return e.loading})),i.distinctUntilChanged())},e.prototype.isStable=function(){var e=this;return this.activeCartId$.pipe(i.switchMap((function(t){return e.multiCartService.isStable(t)})),i.debounce((function(e){return e?o.timer(0):o.EMPTY})),i.distinctUntilChanged())},e.prototype.loadOrMerge=function(e){e&&"current"!==e?this.isGuestCart()?this.guestCartMerge(e):this.multiCartService.mergeToCurrentCart({userId:this.userId,cartId:e,extraData:{active:!0}}):this.multiCartService.loadCart({userId:this.userId,cartId:"current",extraData:{active:!0}})},e.prototype.load=function(e){"anonymous"!==this.userId?this.multiCartService.loadCart({userId:this.userId,cartId:e||"current",extraData:{active:!0}}):e&&"current"!==e&&this.multiCartService.loadCart({userId:this.userId,cartId:e,extraData:{active:!0}})},e.prototype.addEntriesGuestMerge=function(e){var t=this,r=e.map((function(e){return{productCode:e.product.code,quantity:e.quantity}}));this.requireLoadedCartForGuestMerge().subscribe((function(e){t.multiCartService.addEntries(t.userId,Eh(e.value,t.userId),r)}))},e.prototype.requireLoadedCartForGuestMerge=function(){var e=this;return this.requireLoadedCart(this.cartSelector$.pipe(i.filter((function(){return!e.isGuestCart()}))))},e.prototype.isCartCreating=function(e){return Th(this.cartId)&&(e.loading||e.success||e.error)},e.prototype.requireLoadedCart=function(e){var t=this,r=e||this.cartSelector$;return r.pipe(i.filter((function(e){return!e.loading})),i.filter((function(e){return!t.isCartCreating(e)})),i.take(1),i.switchMap((function(e){return t.isEmpty(e.value)&&"anonymous"!==t.userId&&t.load(void 0),r})),i.filter((function(e){return!e.loading})),i.filter((function(e){return"anonymous"===t.userId||e.success||e.error})),i.take(1),i.switchMap((function(e){return t.isEmpty(e.value)&&t.multiCartService.createCart({userId:t.userId,extraData:{active:!0}}),r})),i.filter((function(e){return!e.loading})),i.filter((function(e){return e.success||e.error})),i.filter((function(e){return!t.isCartCreating(e)})),i.filter((function(e){return!t.isEmpty(e.value)})),i.take(1))},e.prototype.addEntry=function(e,t){var r=this;this.requireLoadedCart().subscribe((function(n){r.multiCartService.addEntry(r.userId,Eh(n.value,r.userId),e,t)}))},e.prototype.removeEntry=function(e){this.multiCartService.removeEntry(this.userId,this.cartId,e.entryNumber)},e.prototype.updateEntry=function(e,t){this.multiCartService.updateEntry(this.userId,this.cartId,e,t)},e.prototype.getEntry=function(e){var t=this;return this.activeCartId$.pipe(i.switchMap((function(r){return t.multiCartService.getEntry(r,e)})),i.distinctUntilChanged())},e.prototype.addEmail=function(e){this.multiCartService.assignEmail(this.cartId,this.userId,e)},e.prototype.getAssignedUser=function(){return this.getActive().pipe(i.map((function(e){return e.user})))},e.prototype.isGuestCart=function(){return this.cartUser&&("guest"===this.cartUser.name||this.isEmail(this.cartUser.uid.split("|").slice(1).join("|")))},e.prototype.addEntries=function(e){var t=this;e.forEach((function(e){t.addEntry(e.product.code,e.quantity)}))},e.prototype.isEmail=function(e){return!!e&&!!e.match(hy)},e.prototype.guestCartMerge=function(e){var t;this.getEntries().pipe(i.take(1)).subscribe((function(e){t=e})),this.multiCartService.deleteCart(e,"anonymous"),this.addEntriesGuestMerge(t)},e.prototype.isEmpty=function(e){return!e||"object"==typeof e&&0===Object.keys(e).length},e.prototype.isJustLoggedIn=function(e){return this.previousUserId!==e&&this.previousUserId!==this.PREVIOUS_USER_ID_INITIAL_VALUE},e.ctorParameters=function(){return[{type:n.Store},{type:vt},{type:Iv}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt),t.ɵɵinject(Iv))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}();function Tv(e){return function(t){return e.pipe(i.startWith(void 0),i.switchMapTo(t))}}var Av=function(){function e(e){this.adapter=e}return e.prototype.add=function(e,t,r,n){return this.adapter.add(e,t,r,n)},e.prototype.update=function(e,t,r,n,o){return this.adapter.update(e,t,r,n,o)},e.prototype.remove=function(e,t,r){return this.adapter.remove(e,t,r)},e.ctorParameters=function(){return[{type:Io}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Io))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Uv=function(){function e(e,t){var r=this;this.actions$=e,this.cartEntryConnector=t,this.contextChange$=this.actions$.pipe(c.ofType(rr,pr)),this.addEntry$=this.actions$.pipe(c.ofType("[Cart-entry] Add Entry"),i.map((function(e){return e.payload})),i.concatMap((function(e){return r.cartEntryConnector.add(e.userId,e.cartId,e.productCode,e.quantity).pipe(i.map((function(t){return new by(y(y({},e),t))})),i.catchError((function(t){return o.from([new wy(y(y({},e),{error:an(t)})),new ev({cartId:e.cartId,userId:e.userId})])})))})),Tv(this.contextChange$)),this.removeEntry$=this.actions$.pipe(c.ofType("[Cart-entry] Remove Entry"),i.map((function(e){return e.payload})),i.concatMap((function(e){return r.cartEntryConnector.remove(e.userId,e.cartId,e.entryNumber).pipe(i.map((function(){return new My(y({},e))})),i.catchError((function(t){return o.from([new Fy(y(y({},e),{error:an(t)})),new ev({cartId:e.cartId,userId:e.userId})])})))})),Tv(this.contextChange$)),this.updateEntry$=this.actions$.pipe(c.ofType("[Cart-entry] Update Entry"),i.map((function(e){return e.payload})),i.concatMap((function(e){return r.cartEntryConnector.update(e.userId,e.cartId,e.entryNumber,e.quantity).pipe(i.map((function(){return new Ny(y({},e))})),i.catchError((function(t){return o.from([new jy(y(y({},e),{error:an(t)})),new ev({cartId:e.cartId,userId:e.userId})])})))})),Tv(this.contextChange$))}return e.ctorParameters=function(){return[{type:c.Actions},{type:Av}]},v([c.Effect()],e.prototype,"addEntry$",void 0),v([c.Effect()],e.prototype,"removeEntry$",void 0),v([c.Effect()],e.prototype,"updateEntry$",void 0),e=v([t.Injectable()],e)}(),Pv=function(){function e(e){this.adapter=e}return e.prototype.add=function(e,t,r){return this.adapter.add(e,t,r)},e.prototype.remove=function(e,t,r){return this.adapter.remove(e,t,r)},e.ctorParameters=function(){return[{type:To}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(To))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Lv=function(){function r(t,r,n){var s=this;this.actions$=t,this.cartVoucherConnector=r,this.messageService=n,this.addCartVoucher$=this.actions$.pipe(c.ofType(xy),i.map((function(e){return e.payload})),i.mergeMap((function(t){return s.cartVoucherConnector.add(t.userId,t.cartId,t.voucherId).pipe(i.map((function(){return s.showGlobalMessage("voucher.applyVoucherSuccess",t.voucherId,e.GlobalMessageType.MSG_TYPE_CONFIRMATION),new By(y({},t))})),i.catchError((function(e){return o.from([new Gy(y(y({},t),{error:an(e)})),new lv(t.cartId),new ev({userId:t.userId,cartId:t.cartId})])})))}))),this.removeCartVoucher$=this.actions$.pipe(c.ofType("[Cart-voucher] Remove Cart Voucher"),i.map((function(e){return e.payload})),i.mergeMap((function(t){return s.cartVoucherConnector.remove(t.userId,t.cartId,t.voucherId).pipe(i.map((function(){return s.showGlobalMessage("voucher.removeVoucherSuccess",t.voucherId,e.GlobalMessageType.MSG_TYPE_INFO),new qy({userId:t.userId,cartId:t.cartId,voucherId:t.voucherId})})),i.catchError((function(e){return o.from([new Wy({error:an(e),cartId:t.cartId,userId:t.userId,voucherId:t.voucherId}),new ev({userId:t.userId,cartId:t.cartId})])})))})))}return r.prototype.showGlobalMessage=function(e,t,r){this.messageService.add({key:e,params:{voucherCode:t}},r)},r.ctorParameters=function(){return[{type:c.Actions},{type:Pv},{type:Sh}]},v([c.Effect()],r.prototype,"addCartVoucher$",void 0),v([c.Effect()],r.prototype,"removeCartVoucher$",void 0),r=v([t.Injectable()],r)}(),_v=function(e){this.payload=e,this.type="[Checkout] Verify Address"},Ov=function(e){this.payload=e,this.type="[Checkout] Verify Address Fail"},bv=function(e){this.payload=e,this.type="[Checkout] Verify Address Success"},wv=function(){this.type="[Checkout] Clear Address Verification Results"},Dv=function(){this.type="[Checkout] Load Card Types"},Mv=function(e){this.payload=e,this.type="[Checkout] Load Card Fail"},Fv=function(e){this.payload=e,this.type="[Checkout] Load Card Success"},kv="[Checkout] Checkout Details",Nv="[Checkout] Place Order",jv=function(e){this.payload=e,this.type="[Checkout] Add Delivery Address"},xv=function(e){this.payload=e,this.type="[Checkout] Add Delivery Address Fail"},$v=function(e){this.payload=e,this.type="[Checkout] Add Delivery Address Success"},Gv=function(e){function t(t){var r=e.call(this,"process","setDeliveryAddress")||this;return r.payload=t,r.type="[Checkout] Set Delivery Address",r}return h(t,e),t}(te),Bv=function(e){function t(t){var r=e.call(this,"process","setDeliveryAddress",t)||this;return r.payload=t,r.type="[Checkout] Set Delivery Address Fail",r}return h(t,e),t}(re),Hv=function(e){function t(t){var r=e.call(this,"process","setDeliveryAddress")||this;return r.payload=t,r.type="[Checkout] Set Delivery Address Success",r}return h(t,e),t}(ne),Vv=function(e){function t(){var t=e.call(this,"process","setDeliveryAddress")||this;return t.type="[Checkout] Reset Set Delivery Address Process",t}return h(t,e),t}(oe),Wv=function(e){function t(t){var r=e.call(this,"process","setSupportedDeliveryMode")||this;return r.payload=t,r.type="[Checkout] Load Supported Delivery Modes",r}return h(t,e),t}(te),qv=function(e){function t(t){var r=e.call(this,"process","setSupportedDeliveryMode")||this;return r.payload=t,r.type="[Checkout] Load Supported Delivery Modes Fail",r}return h(t,e),t}(re),zv=function(e){function t(t){var r=e.call(this,"process","setSupportedDeliveryMode")||this;return r.payload=t,r.type="[Checkout] Load Supported Delivery Modes Success",r}return h(t,e),t}(ne),Yv=function(e){function t(){var t=e.call(this,"process","setSupportedDeliveryMode")||this;return t.type="[Checkout] Reset Set Supported Delivery Modes Process",t}return h(t,e),t}(oe),Kv=function(e){function t(t){var r=e.call(this,"process","setDeliveryMode")||this;return r.payload=t,r.type="[Checkout] Set Delivery Mode",r}return h(t,e),t}(te),Zv=function(e){function t(t){var r=e.call(this,"process","setDeliveryMode",t)||this;return r.payload=t,r.type="[Checkout] Set Delivery Mode Fail",r}return h(t,e),t}(re),Jv=function(e){function t(t){var r=e.call(this,"process","setDeliveryMode")||this;return r.payload=t,r.type="[Checkout] Set Delivery Mode Success",r}return h(t,e),t}(ne),Qv=function(e){function t(){var t=e.call(this,"process","setDeliveryMode")||this;return t.type="[Checkout] Reset Set Delivery Mode Process",t}return h(t,e),t}(oe),Xv=function(e){function t(t){var r=e.call(this,"process","setPaymentDetails")||this;return r.payload=t,r.type="[Checkout] Create Payment Details",r}return h(t,e),t}(te),eC=function(e){function t(t){var r=e.call(this,"process","setPaymentDetails")||this;return r.payload=t,r.type="[Checkout] Create Payment Details Fail",r}return h(t,e),t}(re),tC=function(e){this.payload=e,this.type="[Checkout] Create Payment Details Success"},rC=function(e){function t(){var t=e.call(this,"process","setPaymentDetails")||this;return t.type="[Checkout] Payment Process Success",t}return h(t,e),t}(ne),nC=function(e){function t(t){var r=e.call(this,"process","setPaymentDetails")||this;return r.payload=t,r.type="[Checkout] Set Payment Details",r}return h(t,e),t}(te),oC=function(e){function t(t){var r=e.call(this,"process","setPaymentDetails",t)||this;return r.payload=t,r.type="[Checkout] Set Payment Details Fail",r}return h(t,e),t}(re),iC=function(e){function t(t){var r=e.call(this,"process","setPaymentDetails")||this;return r.payload=t,r.type="[Checkout] Set Payment Details Success",r}return h(t,e),t}(ne),sC=function(e){function t(){var t=e.call(this,"process","setPaymentDetails")||this;return t.type="[Checkout] Reset Set Payment Details Process",t}return h(t,e),t}(oe),aC=function(e){this.payload=e,this.type=Nv},cC=function(e){this.payload=e,this.type="[Checkout] Place Order Fail"},uC=function(e){this.payload=e,this.type="[Checkout] Place Order Success"},pC=function(){this.type="[Checkout] Clear Supported Delivery Modes"},dC=function(e){this.payload=e,this.type="[Checkout] Clear One Checkout Step"},lC=function(){this.type="[Checkout] Clear Checkout Data"},fC=function(e){function t(t){var r=e.call(this,kv)||this;return r.payload=t,r.type="[Checkout] Load Checkout Details",r}return h(t,e),t}(z),hC=function(e){function t(t){var r=e.call(this,kv,t)||this;return r.payload=t,r.type="[Checkout] Load Checkout Details Fail",r}return h(t,e),t}(Y),yC=function(e){function t(t){var r=e.call(this,kv)||this;return r.payload=t,r.type="[Checkout] Load Checkout Details Success",r}return h(t,e),t}(K),vC=function(){this.type="[Checkout] Clear Miscs Data"},CC=function(e){this.payload=e,this.type="[Checkout] Clear Checkout Delivery Address"},SC=function(){this.type="[Checkout] Clear Checkout Delivery Address Success"},gC=function(e){this.payload=e,this.type="[Checkout] Clear Checkout Delivery Address Fail"},mC=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Checkout] Clear Checkout Delivery Mode",r}return h(t,e),t}(Ue),EC=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Checkout] Clear Checkout Delivery Mode Success",r}return h(t,e),t}(Pe),IC=function(e){function t(t){var r=e.call(this,yy,t.cartId)||this;return r.payload=t,r.type="[Checkout] Clear Checkout Delivery Mode Fail",r}return h(t,e),t}(Pe),RC=Object.freeze({__proto__:null,VERIFY_ADDRESS:"[Checkout] Verify Address",VERIFY_ADDRESS_FAIL:"[Checkout] Verify Address Fail",VERIFY_ADDRESS_SUCCESS:"[Checkout] Verify Address Success",CLEAR_ADDRESS_VERIFICATION_RESULTS:"[Checkout] Clear Address Verification Results",VerifyAddress:_v,VerifyAddressFail:Ov,VerifyAddressSuccess:bv,ClearAddressVerificationResults:wv,LOAD_CARD_TYPES:"[Checkout] Load Card Types",LOAD_CARD_TYPES_FAIL:"[Checkout] Load Card Fail",LOAD_CARD_TYPES_SUCCESS:"[Checkout] Load Card Success",LoadCardTypes:Dv,LoadCardTypesFail:Mv,LoadCardTypesSuccess:Fv,CLEAR_CHECKOUT_DELIVERY_ADDRESS:"[Checkout] Clear Checkout Delivery Address",CLEAR_CHECKOUT_DELIVERY_ADDRESS_SUCCESS:"[Checkout] Clear Checkout Delivery Address Success",CLEAR_CHECKOUT_DELIVERY_ADDRESS_FAIL:"[Checkout] Clear Checkout Delivery Address Fail",CLEAR_CHECKOUT_DELIVERY_MODE:"[Checkout] Clear Checkout Delivery Mode",CLEAR_CHECKOUT_DELIVERY_MODE_SUCCESS:"[Checkout] Clear Checkout Delivery Mode Success",CLEAR_CHECKOUT_DELIVERY_MODE_FAIL:"[Checkout] Clear Checkout Delivery Mode Fail",ADD_DELIVERY_ADDRESS:"[Checkout] Add Delivery Address",ADD_DELIVERY_ADDRESS_FAIL:"[Checkout] Add Delivery Address Fail",ADD_DELIVERY_ADDRESS_SUCCESS:"[Checkout] Add Delivery Address Success",SET_DELIVERY_ADDRESS:"[Checkout] Set Delivery Address",SET_DELIVERY_ADDRESS_FAIL:"[Checkout] Set Delivery Address Fail",SET_DELIVERY_ADDRESS_SUCCESS:"[Checkout] Set Delivery Address Success",RESET_SET_DELIVERY_ADDRESS_PROCESS:"[Checkout] Reset Set Delivery Address Process",LOAD_SUPPORTED_DELIVERY_MODES:"[Checkout] Load Supported Delivery Modes",LOAD_SUPPORTED_DELIVERY_MODES_FAIL:"[Checkout] Load Supported Delivery Modes Fail",LOAD_SUPPORTED_DELIVERY_MODES_SUCCESS:"[Checkout] Load Supported Delivery Modes Success",CLEAR_SUPPORTED_DELIVERY_MODES:"[Checkout] Clear Supported Delivery Modes",SET_DELIVERY_MODE:"[Checkout] Set Delivery Mode",SET_DELIVERY_MODE_FAIL:"[Checkout] Set Delivery Mode Fail",SET_DELIVERY_MODE_SUCCESS:"[Checkout] Set Delivery Mode Success",RESET_SET_DELIVERY_MODE_PROCESS:"[Checkout] Reset Set Delivery Mode Process",SET_SUPPORTED_DELIVERY_MODES:"[Checkout] Set Supported Delivery Modes",SET_SUPPORTED_DELIVERY_MODES_FAIL:"[Checkout] Set Supported Delivery Modes Fail",SET_SUPPORTED_DELIVERY_MODES_SUCCESS:"[Checkout] Set Supported Delivery Modes Success",RESET_SUPPORTED_SET_DELIVERY_MODES_PROCESS:"[Checkout] Reset Set Supported Delivery Modes Process",CREATE_PAYMENT_DETAILS:"[Checkout] Create Payment Details",CREATE_PAYMENT_DETAILS_FAIL:"[Checkout] Create Payment Details Fail",CREATE_PAYMENT_DETAILS_SUCCESS:"[Checkout] Create Payment Details Success",SET_PAYMENT_DETAILS:"[Checkout] Set Payment Details",SET_PAYMENT_DETAILS_FAIL:"[Checkout] Set Payment Details Fail",SET_PAYMENT_DETAILS_SUCCESS:"[Checkout] Set Payment Details Success",RESET_SET_PAYMENT_DETAILS_PROCESS:"[Checkout] Reset Set Payment Details Process",PLACE_ORDER:Nv,PLACE_ORDER_FAIL:"[Checkout] Place Order Fail",PLACE_ORDER_SUCCESS:"[Checkout] Place Order Success",CLEAR_CHECKOUT_STEP:"[Checkout] Clear One Checkout Step",CLEAR_CHECKOUT_DATA:"[Checkout] Clear Checkout Data",LOAD_CHECKOUT_DETAILS:"[Checkout] Load Checkout Details",LOAD_CHECKOUT_DETAILS_FAIL:"[Checkout] Load Checkout Details Fail",LOAD_CHECKOUT_DETAILS_SUCCESS:"[Checkout] Load Checkout Details Success",CHECKOUT_CLEAR_MISCS_DATA:"[Checkout] Clear Miscs Data",PAYMENT_PROCESS_SUCCESS:"[Checkout] Payment Process Success",AddDeliveryAddress:jv,AddDeliveryAddressFail:xv,AddDeliveryAddressSuccess:$v,SetDeliveryAddress:Gv,SetDeliveryAddressFail:Bv,SetDeliveryAddressSuccess:Hv,ResetSetDeliveryAddressProcess:Vv,LoadSupportedDeliveryModes:Wv,LoadSupportedDeliveryModesFail:qv,LoadSupportedDeliveryModesSuccess:zv,ResetLoadSupportedDeliveryModesProcess:Yv,SetDeliveryMode:Kv,SetDeliveryModeFail:Zv,SetDeliveryModeSuccess:Jv,ResetSetDeliveryModeProcess:Qv,CreatePaymentDetails:Xv,CreatePaymentDetailsFail:eC,CreatePaymentDetailsSuccess:tC,PaymentProcessSuccess:rC,SetPaymentDetails:nC,SetPaymentDetailsFail:oC,SetPaymentDetailsSuccess:iC,ResetSetPaymentDetailsProcess:sC,PlaceOrder:aC,PlaceOrderFail:cC,PlaceOrderSuccess:uC,ClearSupportedDeliveryModes:pC,ClearCheckoutStep:dC,ClearCheckoutData:lC,LoadCheckoutDetails:fC,LoadCheckoutDetailsFail:hC,LoadCheckoutDetailsSuccess:yC,CheckoutClearMiscsData:vC,ClearCheckoutDeliveryAddress:CC,ClearCheckoutDeliveryAddressSuccess:SC,ClearCheckoutDeliveryAddressFail:gC,ClearCheckoutDeliveryMode:mC,ClearCheckoutDeliveryModeSuccess:EC,ClearCheckoutDeliveryModeFail:IC}),TC=function(){function e(e){this.adapter=e}return e.prototype.loadAll=function(e){return this.adapter.loadAll(e)},e.prototype.load=function(e,t){return this.adapter.load(e,t)},e.prototype.create=function(e,t,r){return this.adapter.create(e,t,r)},e.prototype.delete=function(e,t){return this.adapter.delete(e,t)},e.prototype.addEmail=function(e,t,r){return this.adapter.addEmail(e,t,r)},e.ctorParameters=function(){return[{type:mo}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(mo))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),AC=function(){function e(e,t,r){var s=this;this.actions$=e,this.cartConnector=t,this.store=r,this.contextChange$=this.actions$.pipe(c.ofType(rr,pr)),this.loadCart$=this.actions$.pipe(c.ofType("[Cart] Load Cart"),i.map((function(e){return e.payload})),i.groupBy((function(e){return e.cartId})),i.mergeMap((function(e){return e.pipe(i.switchMap((function(e){return o.of(e).pipe(i.withLatestFrom(s.store.pipe(n.select(Iy(e.cartId)))))})),i.filter((function(e){var t=E(e,2);t[0];return!t[1]})),i.map((function(e){return E(e,1)[0]})),i.switchMap((function(e){return s.cartConnector.load(e.userId,e.cartId).pipe(i.mergeMap((function(t){var r=[];return t?(r.push(new rv(y(y({},e),{cart:t,cartId:Eh(t,e.userId)}))),"current"===e.cartId&&r.push(new sv({cartId:"current"}))):r=[new tv(y(y({},e),{error:{}}))],r})),i.catchError((function(t){var r;if(null===(r=null==t?void 0:t.error)||void 0===r?void 0:r.errors){if(t.error.errors.filter((function(e){return"invalid"===e.reason})).length>0)return o.of(new ev(y({},e)));if(t.error.errors.filter((function(e){return Ih(e)||"UnknownResourceError"===e.reason})).length>0)return o.of(new sv({cartId:e.cartId}))}return o.of(new tv(y(y({},e),{error:an(t)})))})))})))})),Tv(this.contextChange$)),this.createCart$=this.actions$.pipe(c.ofType(zy),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.cartConnector.create(e.userId,e.oldCartId,e.toMergeCartGuid).pipe(i.switchMap((function(t){var r=[];return e.oldCartId&&r.push(new ov({extraData:e.extraData,userId:e.userId,tempCartId:e.tempCartId,cartId:Eh(t,e.userId),oldCartId:e.oldCartId})),I([new Zy(y(y({},e),{cart:t,cartId:Eh(t,e.userId)})),new pv({cart:t,tempCartId:e.tempCartId})],r)})),i.catchError((function(t){return o.of(new Ky(y(y({},e),{error:an(t)})))})))})),Tv(this.contextChange$)),this.mergeCart$=this.actions$.pipe(c.ofType("[Cart] Merge Cart"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.cartConnector.load(e.userId,"current").pipe(i.mergeMap((function(t){return[new Yy({userId:e.userId,oldCartId:e.cartId,toMergeCartGuid:t?t.guid:void 0,extraData:e.extraData,tempCartId:e.tempCartId})]})))})),Tv(this.contextChange$)),this.refresh$=this.actions$.pipe(c.ofType("[Cart-voucher] Add Cart Voucher Success"),i.map((function(e){return e.payload})),i.concatMap((function(e){return o.from([new lv(e.cartId),new ev({userId:e.userId,cartId:e.cartId})])}))),this.refreshWithoutProcesses$=this.actions$.pipe(c.ofType("[Cart-entry] Add Entry Success","[Cart-entry] Remove Entry Success","[Cart-entry] Update Entry Success","[Cart-voucher] Remove Cart Voucher Success","[Checkout] Clear Checkout Delivery Mode Success"),i.map((function(e){return e.payload})),i.map((function(e){return new ev({userId:e.userId,cartId:e.cartId})}))),this.resetCartDetailsOnSiteContextChange$=this.actions$.pipe(c.ofType(pr,rr),i.mergeMap((function(){return[new iv]}))),this.addEmail$=this.actions$.pipe(c.ofType("[Cart] Add Email to Cart"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.cartConnector.addEmail(e.userId,e.cartId,e.email).pipe(i.mergeMap((function(){return[new Xy(y({},e)),new ev({userId:e.userId,cartId:e.cartId})]})),i.catchError((function(t){return o.from([new Qy(y(y({},e),{error:an(t)})),new ev({userId:e.userId,cartId:e.cartId})])})))})),Tv(this.contextChange$)),this.deleteCart$=this.actions$.pipe(c.ofType("[Cart] Delete Cart"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.cartConnector.delete(e.userId,e.cartId).pipe(i.map((function(){return new cv(y({},e))})),i.catchError((function(t){return o.from([new uv(y(y({},e),{error:an(t)})),new ev(y({},e))])})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:TC},{type:n.Store}]},v([c.Effect()],e.prototype,"loadCart$",void 0),v([c.Effect()],e.prototype,"createCart$",void 0),v([c.Effect()],e.prototype,"mergeCart$",void 0),v([c.Effect()],e.prototype,"refresh$",void 0),v([c.Effect()],e.prototype,"refreshWithoutProcesses$",void 0),v([c.Effect()],e.prototype,"resetCartDetailsOnSiteContextChange$",void 0),v([c.Effect()],e.prototype,"addEmail$",void 0),v([c.Effect()],e.prototype,"deleteCart$",void 0),e=v([t.Injectable()],e)}(),UC=function(){function e(e){this.adapter=e}return e.prototype.saveCart=function(e,t,r,n){return this.adapter.saveCart(e,t,r,n)},e.ctorParameters=function(){return[{type:Ro}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Ro))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),PC=function(){function e(e,t,r,s,a){var u=this;this.actions$=e,this.cartConnector=t,this.saveCartConnector=r,this.authService=s,this.store=a,this.createWishList$=this.actions$.pipe(c.ofType("[Wish List] Create Wish List"),i.map((function(e){return e.payload})),i.switchMap((function(e){return u.cartConnector.create(e.userId).pipe(i.switchMap((function(t){return u.saveCartConnector.saveCart(e.userId,t.code,e.name,e.description).pipe(i.switchMap((function(t){return[new vv({cart:t.savedCartData,userId:e.userId})]})),i.catchError((function(e){return o.from([new Cv({cartId:t.code,error:an(e)})])})))})))}))),this.loadWishList$=this.actions$.pipe(c.ofType("[Wish List] Load Wish List"),i.map((function(e){return e.payload})),i.concatMap((function(e){var t=e.userId,r=e.customerId,n=e.tempCartId;return u.cartConnector.loadAll(t).pipe(i.switchMap((function(e){if(e){var o=e.find((function(e){return e.name===Rh(r)}));return Boolean(o)?[new gv({cart:o,userId:t,tempCartId:n,customerId:r,cartId:Eh(o,t)}),new sv({cartId:n})]:[new yv({userId:t,name:Rh(r)})]}})),i.catchError((function(e){return o.from([new mv({userId:t,cartId:n,customerId:r,error:an(e)})])})))}))),this.resetWishList$=this.actions$.pipe(c.ofType(pr,rr),i.withLatestFrom(this.authService.getOccUserId(),this.store.pipe(n.select(Ly))),i.switchMap((function(e){var t=E(e,3),r=t[1],n=t[2];return Boolean(n)?u.cartConnector.load(r,n).pipe(i.switchMap((function(e){return[new gv({cart:e,userId:r,cartId:Eh(e,r)})]})),i.catchError((function(e){return o.from([new mv({userId:r,cartId:n,error:an(e)})])}))):o.EMPTY})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:TC},{type:UC},{type:vt},{type:n.Store}]},v([c.Effect()],e.prototype,"createWishList$",void 0),v([c.Effect()],e.prototype,"loadWishList$",void 0),v([c.Effect()],e.prototype,"resetWishList$",void 0),e=v([t.Injectable()],e)}();function LC(e,t){var r,n,o;switch(void 0===e&&(e=""),t.type){case"[Cart] Load Cart Success":case"[Cart] Create Cart Success":case zy:return(null===(n=null===(r=null==t?void 0:t.payload)||void 0===r?void 0:r.extraData)||void 0===n?void 0:n.active)?t.meta.entityId:e;case"[Cart] Set Active Cart Id":return t.payload;case"[Cart] Remove Cart":case"[Cart] Delete Cart Success":return(null===(o=t.payload)||void 0===o?void 0:o.cartId)===e?"":e;case"[Cart] Clear Cart State":return""}return e}function _C(e,t){switch(void 0===e&&(e=void 0),t.type){case"[Cart] Load Cart Success":case"[Cart] Create Cart Success":case"[Wish List] Create Wish List Success":case"[Wish List] Load Wish List Success":case"[Cart] Set Temp Cart":return t.payload.cart}return e}function OC(e,t){switch(void 0===e&&(e=""),t.type){case"[Wish List] Create Wish List Success":case"[Wish List] Load Wish List Success":return t.meta.entityId;case"[Cart] Clear Cart State":return""}return e}function bC(e){return function(t,r){return r.type===ze&&(t=void 0),e(t,r)}}var wC=[bC],DC=new t.InjectionToken("MultiCartReducers");function MC(){return{carts:ke(yy,_C),active:LC,wishList:OC}}var FC={provide:DC,useFactory:MC},kC=function(){},NC=function(){},jC=function(){},xC=function(){function e(e,t,r){this.actionsSubject=e,this.event=t,this.activeCartService=r,this.register()}return e.prototype.register=function(){this.registerAddEntry()},e.prototype.registerAddEntry=function(){this.registerMapped({action:"[Cart-entry] Add Entry",event:kC}),this.registerMapped({action:"[Cart-entry] Add Entry Success",event:NC}),this.registerMapped({action:"[Cart-entry] Add Entry Fail",event:jC})},e.prototype.registerMapped=function(e){var t=this.getAction(e.action).pipe(i.withLatestFrom(this.activeCartService.getActiveCartId()),i.filter((function(e){var t=E(e,2),r=t[0],n=t[1];return r.payload.cartId===n})),i.map((function(t){var r=E(t,1)[0];return Ac(e.event,r.payload)})));return this.event.register(e.event,t)},e.prototype.getAction=function(e){return this.actionsSubject.pipe(c.ofType.apply(void 0,I([].concat(e))))},e.ctorParameters=function(){return[{type:n.ActionsSubject},{type:Tc},{type:Rv}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.ActionsSubject),t.ɵɵinject(Tc),t.ɵɵinject(Rv))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),$C=function(){function e(e){}return e.ctorParameters=function(){return[{type:xC}]},e=v([t.NgModule({})],e)}(),GC="[Cms] Component Entity",BC=function(e){function t(t){var r=e.call(this,GC,t.uid)||this;return r.payload=t,r.type="[Cms] Load Component",r}return h(t,e),t}(te),HC=function(e){function t(t){var r=e.call(this,GC,t.uid,t.error)||this;return r.payload=t,r.type="[Cms] Load Component Fail",r}return h(t,e),t}(re),VC=function(e){function t(t){var r=e.call(this,GC,t.uid||t.component.uid||"")||this;return r.payload=t,r.type="[Cms] Load Component Success",r}return h(t,e),t}(ne),WC=function(e){function t(t){var r=e.call(this,GC,[].concat(t).map((function(e){return e.component.uid})))||this;return r.payload=t,r.type="[Cms] Get Component from Page",r}return h(t,e),t}(ne),qC=function(e){function t(t){var r=e.call(this,"[Cms] Navigation Entity",t.nodeId)||this;return r.payload=t,r.type="[Cms] Load NavigationEntry items",r}return h(t,e),t}(te),zC=function(e){function t(t,r){var n=e.call(this,"[Cms] Navigation Entity",t,r)||this;return n.payload=r,n.type="[Cms] Load NavigationEntry items Fail",n}return h(t,e),t}(re),YC=function(e){function t(t){var r=e.call(this,"[Cms] Navigation Entity",t.nodeId)||this;return r.payload=t,r.type="[Cms] Load NavigationEntry items Success",r}return h(t,e),t}(ne),KC=function(e){function t(t){var r=e.call(this,t.type,t.id)||this;return r.payload=t,r.type="[Cms] Load Page Data",r}return h(t,e),t}(te),ZC=function(e){function t(t,r){var n=e.call(this,t.type,t.id,r)||this;return n.type="[Cms] Load Page Data Fail",n}return h(t,e),t}(re),JC=function(e){function t(t,r){var n=e.call(this,t.type,t.id,r)||this;return n.type="[Cms] Load Page Data Success",n}return h(t,e),t}(ne),QC=function(e){function t(t,r){var n=e.call(this,t.type,t.id,r)||this;return n.type="[Cms] Set Page Success Index",n}return h(t,e),t}(ne),XC=function(e){function t(t,r){var n=e.call(this,t.type,t.id)||this;return n.payload=r,n.type="[Cms] Set Page Fail Index",n}return h(t,e),t}(re),eS=Object.freeze({__proto__:null,LOAD_CMS_COMPONENT:"[Cms] Load Component",LOAD_CMS_COMPONENT_FAIL:"[Cms] Load Component Fail",LOAD_CMS_COMPONENT_SUCCESS:"[Cms] Load Component Success",CMS_GET_COMPONENT_FROM_PAGE:"[Cms] Get Component from Page",LoadCmsComponent:BC,LoadCmsComponentFail:HC,LoadCmsComponentSuccess:VC,CmsGetComponentFromPage:WC,LOAD_CMS_NAVIGATION_ITEMS:"[Cms] Load NavigationEntry items",LOAD_CMS_NAVIGATION_ITEMS_FAIL:"[Cms] Load NavigationEntry items Fail",LOAD_CMS_NAVIGATION_ITEMS_SUCCESS:"[Cms] Load NavigationEntry items Success",LoadCmsNavigationItems:qC,LoadCmsNavigationItemsFail:zC,LoadCmsNavigationItemsSuccess:YC,LOAD_CMS_PAGE_DATA:"[Cms] Load Page Data",LOAD_CMS_PAGE_DATA_FAIL:"[Cms] Load Page Data Fail",LOAD_CMS_PAGE_DATA_SUCCESS:"[Cms] Load Page Data Success",CMS_SET_PAGE_SUCCESS_INDEX:"[Cms] Set Page Success Index",CMS_SET_PAGE_FAIL_INDEX:"[Cms] Set Page Fail Index",LoadCmsPageData:KC,LoadCmsPageDataFail:ZC,LoadCmsPageDataSuccess:JC,CmsSetPageSuccessIndex:QC,CmsSetPageFailIndex:XC}),tS=n.createFeatureSelector("cms"),rS=function(e){return e.components},nS=n.createSelector(tS,rS),oS=function(e){return n.createSelector(nS,(function(t){return Ne(t,e)}))},iS=function(e,t){return n.createSelector(oS(e),(function(e){return e&&e.pageContext&&e.pageContext[t]||ie}))},sS=function(e,t){return n.createSelector(iS(e,t),(function(e){return ae(e)}))},aS=function(e){return n.createSelector(oS(e),(function(e){return e?e.component:void 0}))},cS=function(e,t){return n.createSelector(aS(e),sS(e,t),(function(e,t){switch(t){case!0:return e;case!1:return null;case void 0:return}}))},uS=n.createSelector(tS,(function(e){return e.navigation})),pS=function(e){return n.createSelector(uS,(function(t){return de(t,e)}))},dS=function(e){return n.createSelector(pS(e),(function(e){return ae(e)}))},lS=function(e){return e.pageData.entities},fS=function(t,r){switch(r){case e.PageType.CONTENT_PAGE:return t.content;case e.PageType.PRODUCT_PAGE:return t.product;case e.PageType.CATEGORY_PAGE:return t.category;case e.PageType.CATALOG_PAGE:return t.catalog}return{entities:{}}},hS=fS,yS=function(e){var t,r,n,o,i=new Set;if(e&&e.slots)try{for(var s=m(Object.keys(e.slots)),a=s.next();!a.done;a=s.next()){var c=a.value;try{for(var u=(n=void 0,m(e.slots[c].components||[])),p=u.next();!p.done;p=u.next()){var d=p.value;i.add(d.flexType)}}catch(e){n={error:e}}finally{try{p&&!p.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return Array.from(i)},vS=yS,CS=function(e){return e.page},SS=n.createSelector(tS,CS),gS=function(e){return e.index},mS=n.createSelector(SS,gS),ES=function(e){return n.createSelector(mS,(function(t){return fS(t,e.type)}))},IS=function(e){return n.createSelector(ES(e),(function(t){return de(t,e.id)}))},RS=function(e){return n.createSelector(IS(e),(function(e){return ae(e)}))},TS=n.createSelector(SS,lS),AS=function(e){return n.createSelector(TS,RS(e),(function(e,t){return e[t]}))},US=function(e){return n.createSelector(AS(e),(function(e){return yS(e)}))},PS=function(e,t){return n.createSelector(AS(e),(function(e){if(e)return e.slots[t]||{components:[]}}))},LS=Object.freeze({__proto__:null,getComponentsState:nS,componentsContextSelectorFactory:oS,componentsLoaderStateSelectorFactory:iS,componentsContextExistsSelectorFactory:sS,componentsDataSelectorFactory:aS,componentsSelectorFactory:cS,"ɵ0":rS,getCmsState:tS,getNavigationEntryItemState:uS,getSelectedNavigationEntryItemState:pS,getNavigationEntryItems:dS,getPageState:SS,getPageStateIndex:mS,getPageStateIndexEntityLoaderState:ES,getPageStateIndexLoaderState:IS,getPageStateIndexValue:RS,getPageEntities:TS,getPageData:AS,getPageComponentTypes:US,getCurrentSlotSelectorFactory:PS,"ɵ1":hS,"ɵ2":vS,"ɵ3":CS,"ɵ4":gS});function _S(t,r){return t?r&&t.type===e.PageType.CONTENT_PAGE?""+t.type:t.type+"-"+t.id:"current"}var OS,bS=function(){function e(e,t){this.store=e,this.routingService=t,this.components={}}return e.prototype.getCurrentPage=function(){var e=this;return this.routingService.getPageContext().pipe(i.switchMap((function(t){return e.store.select(AS(t))})))},e.prototype.getComponentData=function(e,t){var r=_S(t,!0);this.components[e]||(this.components[e]={});var n=this.components[e];return n[r]||(n[r]=this.createComponentData(e,t)),n[r]},e.prototype.createComponentData=function(e,t){var r=this;if(!t)return this.routingService.getPageContext().pipe(i.filter((function(e){return!!e})),i.switchMap((function(t){return r.getComponentData(e,t)})));var s=_S(t,!0),a=o.combineLatest([this.routingService.getNextPageContext(),this.store.pipe(n.select(iS(e,s)))]).pipe(i.observeOn(o.queueScheduler),i.tap((function(n){var o=E(n,2),i=o[0],a=o[1],c=a.loading||a.success||a.error,u=!!i&&_S(i,!0)===s;c||u||r.store.dispatch(new BC({uid:e,pageContext:t}))}))),c=this.store.pipe(n.select(cS(e,s)),i.filter((function(e){return void 0!==e})));return o.using((function(){return a.subscribe()}),(function(){return c})).pipe(i.shareReplay({bufferSize:1,refCount:!0}))},e.prototype.getContentSlot=function(e){var t=this;return this.routingService.getPageContext().pipe(i.switchMap((function(r){return t.store.pipe(n.select(PS(r,e)),i.filter(Boolean))})))},e.prototype.getNavigationEntryItems=function(e){return this.store.pipe(n.select(dS(e)))},e.prototype.loadNavigationItems=function(e,t){this.store.dispatch(new qC({nodeId:e,items:t}))},e.prototype.refreshLatestPage=function(){var e=this;this.routingService.getPageContext().pipe(i.take(1)).subscribe((function(t){return e.store.dispatch(new KC(t))}))},e.prototype.refreshPageById=function(e){var t={id:e};this.store.dispatch(new KC(t))},e.prototype.refreshComponent=function(e,t){this.store.dispatch(new BC({uid:e,pageContext:t}))},e.prototype.getPageState=function(e){return this.store.pipe(n.select(AS(e)))},e.prototype.getPageComponentTypes=function(e){return this.store.pipe(n.select(US(e)))},e.prototype.hasPage=function(e,t){var r=this;return void 0===t&&(t=!1),this.store.pipe(n.select(IS(e)),i.tap((function(n){var o=n.loading||n.success||n.error,i=t&&!n.loading;o&&!i||(r.store.dispatch(new KC(e)),t=!1)})),i.filter((function(e){return!!e.hasOwnProperty("value")&&(e.success||e.error&&!e.loading)})),i.pluck("success"),i.catchError((function(){return o.of(!1)})))},e.prototype.getPage=function(e,t){var r=this;return void 0===t&&(t=!1),this.hasPage(e,t).pipe(i.switchMap((function(t){return t?r.getPageState(e):o.of(null)})))},e.prototype.getPageIndex=function(e){return this.store.pipe(n.select(RS(e)))},e.prototype.setPageFailIndex=function(e,t){this.store.dispatch(new XC(e,t))},e.ctorParameters=function(){return[{type:n.Store},{type:$t}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject($t))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}();(OS=e.PageRobotsMeta||(e.PageRobotsMeta={})).INDEX="INDEX",OS.NOINDEX="NOINDEX",OS.FOLLOW="FOLLOW",OS.NOFOLLOW="NOFOLLOW";var wS=function(r){function n(t){var n=r.call(this)||this;return n.cms=t,n.cms$=n.cms.getCurrentPage().pipe(i.filter((function(e){return!!e}))),n.pageType=e.PageType.CONTENT_PAGE,n.pageTemplate="CartPageTemplate",n}return h(n,r),n.prototype.resolveTitle=function(){return this.cms$.pipe(i.map((function(e){return e.title})))},n.prototype.resolveRobots=function(){return o.of([e.PageRobotsMeta.NOFOLLOW,e.PageRobotsMeta.NOINDEX])},n.ctorParameters=function(){return[{type:bS}]},n.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new n(t.ɵɵinject(bS))},token:n,providedIn:"root"}),n=v([t.Injectable({providedIn:"root"})],n)}(fy),DS=function(){function e(e,t,r){this.statePersistenceService=e,this.store=t,this.siteContextParamsService=r}return e.prototype.sync=function(){var e=this;this.statePersistenceService.syncWithStorage({key:"cart",state$:this.getCartState(),context$:this.siteContextParamsService.getValues(["baseSite"]),onRead:function(t){return e.onRead(t)}})},e.prototype.getCartState=function(){return this.store.pipe(n.select(vy),i.filter((function(e){return!!e})),i.distinctUntilKeyChanged("active"),i.map((function(e){return{active:e.active}})))},e.prototype.onRead=function(e){this.store.dispatch(new hv),e&&this.store.dispatch(new fv(e.active))},e.ctorParameters=function(){return[{type:Pc},{type:n.Store},{type:Kl}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Pc),t.ɵɵinject(n.Store),t.ɵɵinject(Kl))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),MS=function(){function e(e){this.actions$=e,this.setTempCart$=this.actions$.pipe(c.ofType("[Cart] Set Temp Cart"),i.map((function(e){return new sv({cartId:e.payload.tempCartId})}))),this.processesIncrement$=this.actions$.pipe(c.ofType(xy),i.map((function(e){return e.payload})),i.map((function(e){return new dv(e.cartId)})))}return e.ctorParameters=function(){return[{type:c.Actions}]},v([c.Effect()],e.prototype,"setTempCart$",void 0),v([c.Effect()],e.prototype,"processesIncrement$",void 0),e=v([t.Injectable()],e)}(),FS=[AC,Uv,Lv,PC,MS],kS=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,nn,n.StoreModule.forFeature("cart",DC,{metaReducers:wC}),c.EffectsModule.forFeature(FS)],providers:[FC]})],e)}();function NS(e,t){return function(){return t.getStableConfig("context").then((function(){e.sync()}))}}var jS=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:[{provide:fy,useExisting:wS,multi:!0},{provide:t.APP_INITIALIZER,useFactory:NS,deps:[DS,Yl],multi:!0}]}},e=r=v([t.NgModule({imports:[kS,$C]})],e)}(),xS=function(){function e(){}return e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root",useExisting:A})],e)}(),$S=function(){function e(e,t,r){this.store=e,this.authService=t,this.activeCartService=r}return e.prototype.addVoucher=function(e,t){var r=this;this.combineUserAndCartId(t).subscribe((function(t){var n=E(t,2),o=n[0],i=n[1];return r.store.dispatch(new $y({userId:o,cartId:i,voucherId:e}))}))},e.prototype.removeVoucher=function(e,t){var r=this;this.combineUserAndCartId(t).subscribe((function(t){var n=E(t,2),o=n[0],i=n[1];return r.store.dispatch(new Vy({userId:o,cartId:i,voucherId:e}))}))},e.prototype.getAddVoucherResultError=function(){return this.store.pipe(n.select(bc("addVoucher")))},e.prototype.getAddVoucherResultSuccess=function(){return this.store.pipe(n.select(Oc("addVoucher")))},e.prototype.getAddVoucherResultLoading=function(){return this.store.pipe(n.select(_c("addVoucher")))},e.prototype.resetAddVoucherProcessingState=function(){this.store.dispatch(new Hy)},e.prototype.combineUserAndCartId=function(e){return e?this.authService.getOccUserId().pipe(i.take(1),i.map((function(t){return[t,e]}))):o.combineLatest([this.authService.getOccUserId(),this.activeCartService.getActiveCartId()]).pipe(i.take(1))},e.ctorParameters=function(){return[{type:n.Store},{type:vt},{type:Rv}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt),t.ɵɵinject(Rv))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),GS=function(){function e(e,t){this.store=e,this.authService=t}return e.prototype.get=function(){var e=this;return this.store.pipe(n.select(Il),i.tap((function(t){0===Object.keys(t).length&&e.load()})))},e.prototype.load=function(){var e=this;this.authService.invokeWithUserId((function(t){"anonymous"!==t&&e.store.dispatch(new ap(t))}))},e.prototype.register=function(e){this.store.dispatch(new gp(e))},e.prototype.registerGuest=function(e,t){this.store.dispatch(new Rp({guid:e,password:t}))},e.prototype.getRegisterUserResultLoading=function(){return this.store.pipe(n.select(_c("registerUser")))},e.prototype.getRegisterUserResultSuccess=function(){return this.store.pipe(n.select(Oc("registerUser")))},e.prototype.getRegisterUserResultError=function(){return this.store.pipe(n.select(bc("registerUser")))},e.prototype.resetRegisterUserProcessState=function(){return this.store.dispatch(new Ip)},e.prototype.remove=function(){var e=this;this.authService.invokeWithUserId((function(t){e.store.dispatch(new Up(t))}))},e.prototype.getRemoveUserResultLoading=function(){return this.store.pipe(n.select(_c("removeUser")))},e.prototype.getRemoveUserResultError=function(){return this.store.pipe(n.select(bc("removeUser")))},e.prototype.getRemoveUserResultSuccess=function(){return this.store.pipe(n.select(Oc("removeUser")))},e.prototype.resetRemoveUserProcessState=function(){this.store.dispatch(new _p)},e.prototype.getTitles=function(){return this.store.pipe(n.select(pl))},e.prototype.loadTitles=function(){this.store.dispatch(new Au)},e.prototype.isPasswordReset=function(){return this.store.pipe(n.select(al))},e.prototype.updatePersonalDetails=function(e){var t=this;this.authService.invokeWithUserId((function(r){t.store.dispatch(new pp({username:r,userDetails:e}))}))},e.prototype.getUpdatePersonalDetailsResultLoading=function(){return this.store.pipe(n.select(_c("updateUserDetails")))},e.prototype.getUpdatePersonalDetailsResultError=function(){return this.store.pipe(n.select(bc("updateUserDetails")))},e.prototype.getUpdatePersonalDetailsResultSuccess=function(){return this.store.pipe(n.select(Oc("updateUserDetails")))},e.prototype.resetUpdatePersonalDetailsProcessingState=function(){this.store.dispatch(new fp)},e.prototype.resetPassword=function(e,t){this.store.dispatch(new Iu({token:e,password:t}))},e.prototype.requestForgotPasswordEmail=function(e){this.store.dispatch(new Hc(e))},e.prototype.updateEmail=function(e,t){var r=this;this.authService.invokeWithUserId((function(n){r.store.dispatch(new Lu({uid:n,password:e,newUid:t}))}))},e.prototype.getUpdateEmailResultSuccess=function(){return this.store.pipe(n.select(Oc("updateEmail")))},e.prototype.getUpdateEmailResultError=function(){return this.store.pipe(n.select(bc("updateEmail")))},e.prototype.getUpdateEmailResultLoading=function(){return this.store.pipe(n.select(_c("updateEmail")))},e.prototype.resetUpdateEmailResultState=function(){this.store.dispatch(new bu)},e.prototype.updatePassword=function(e,t){var r=this;this.authService.invokeWithUserId((function(n){r.store.dispatch(new wu({userId:n,oldPassword:e,newPassword:t}))}))},e.prototype.getUpdatePasswordResultLoading=function(){return this.store.pipe(n.select(_c("updatePassword")))},e.prototype.getUpdatePasswordResultError=function(){return this.store.pipe(n.select(bc("updatePassword")))},e.prototype.getUpdatePasswordResultSuccess=function(){return this.store.pipe(n.select(Oc("updatePassword")))},e.prototype.resetUpdatePasswordProcessState=function(){this.store.dispatch(new Fu)},e.ctorParameters=function(){return[{type:n.Store},{type:vt}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),BS=function(){function e(e){this.config=e}return e.prototype.isSelectiveCartEnabled=function(){var e,t,r;return Boolean(null===(r=null===(t=null===(e=this.config)||void 0===e?void 0:e.cart)||void 0===t?void 0:t.selectiveCart)||void 0===r?void 0:r.enabled)},e.ctorParameters=function(){return[{type:xS}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(xS))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),HS=function(){function e(e,t,r,n,s,a){var c=this;this.store=e,this.userService=t,this.authService=r,this.multiCartService=n,this.baseSiteService=s,this.cartConfigService=a,this.cartId$=new o.BehaviorSubject(void 0),this.PREVIOUS_USER_ID_INITIAL_VALUE="PREVIOUS_USER_ID_INITIAL_VALUE",this.previousUserId=this.PREVIOUS_USER_ID_INITIAL_VALUE,this.cartSelector$=this.cartId$.pipe(i.switchMap((function(e){return c.cartId=e,c.multiCartService.getCartEntity(e)}))),o.combineLatest([this.userService.get(),this.baseSiteService.getActive()]).subscribe((function(e){var t=E(e,2),r=t[0],n=t[1];r&&r.customerId&&n?(c.customerId=r.customerId,c.cartId$.next("selectivecart"+n+c.customerId)):r&&!r.customerId&&c.cartId$.next(void 0)})),this.authService.getOccUserId().subscribe((function(e){c.userId=e,c.isJustLoggedIn(e)&&c.load(),c.previousUserId=e})),this.selectiveCart$=this.cartSelector$.pipe(i.map((function(e){return{cart:e.value,loading:e.loading,loaded:(e.error||e.success)&&!e.loading}})),i.filter((function(e){return!e.loading})),i.tap((function(e){var t=e.cart,r=e.loaded;c.cartId&&c.isEmpty(t)&&!r&&c.load()})),i.map((function(e){var t=e.cart;return t||{}})),i.shareReplay({bufferSize:1,refCount:!0}))}return e.prototype.getCart=function(){return this.selectiveCart$},e.prototype.getEntries=function(){return this.multiCartService.getEntries(this.cartId)},e.prototype.getLoaded=function(){return this.cartSelector$.pipe(i.map((function(e){return(e.success||e.error)&&!e.loading})))},e.prototype.load=function(){this.isLoggedIn(this.userId)&&this.cartId&&this.multiCartService.loadCart({userId:this.userId,cartId:this.cartId})},e.prototype.addEntry=function(e,t){var r=this,n=!1;this.cartSelector$.pipe(i.filter((function(){return!n})),i.switchMap((function(e){return r.isEmpty(e.value)&&!e.loading&&(n=!0,r.load()),o.of(e)})),i.filter((function(e){return!r.isEmpty(e.value)})),i.take(1)).subscribe((function(){r.multiCartService.addEntry(r.userId,r.cartId,e,t)}))},e.prototype.removeEntry=function(e){this.multiCartService.removeEntry(this.userId,this.cartId,e.entryNumber)},e.prototype.updateEntry=function(e,t){this.multiCartService.updateEntry(this.userId,this.cartId,e,t)},e.prototype.getEntry=function(e){return this.multiCartService.getEntry(this.cartId,e)},e.prototype.isEnabled=function(){return this.cartConfigService.isSelectiveCartEnabled()},e.prototype.isEmpty=function(e){return!e||"object"==typeof e&&0===Object.keys(e).length},e.prototype.isJustLoggedIn=function(e){return this.isLoggedIn(e)&&this.previousUserId!==e&&this.previousUserId!==this.PREVIOUS_USER_ID_INITIAL_VALUE},e.prototype.isLoggedIn=function(e){return void 0!==e&&"anonymous"!==e},e.ctorParameters=function(){return[{type:n.Store},{type:GS},{type:vt},{type:Iv},{type:Nr},{type:BS}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(GS),t.ɵɵinject(vt),t.ɵɵinject(Iv),t.ɵɵinject(Nr),t.ɵɵinject(BS))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),VS=function(){function e(e,t,r,n){this.store=e,this.authService=t,this.userService=r,this.multiCartService=n}return e.prototype.createWishList=function(e,t,r){this.store.dispatch(new yv({userId:e,name:t,description:r}))},e.prototype.getWishList=function(){var e=this;return o.combineLatest([this.getWishListId(),this.userService.get(),this.authService.getOccUserId()]).pipe(i.distinctUntilChanged(),i.tap((function(t){var r=E(t,3),n=r[0],o=r[1],i=r[2];!Boolean(n)&&"anonymous"!==i&&Boolean(o)&&Boolean(o.customerId)&&e.loadWishList(i,o.customerId)})),i.filter((function(e){var t=E(e,1)[0];return Boolean(t)})),i.switchMap((function(t){var r=E(t,1)[0];return e.multiCartService.getCart(r)})))},e.prototype.loadWishList=function(e,t){this.store.dispatch(new Sv({userId:e,customerId:t,tempCartId:Rh(t)}))},e.prototype.addEntry=function(e){var t=this;this.getWishListId().pipe(i.distinctUntilChanged(),i.withLatestFrom(this.authService.getOccUserId(),this.userService.get()),i.tap((function(e){var r=E(e,3),n=r[0],o=r[1],i=r[2];!Boolean(n)&&Boolean(i)&&Boolean(i.customerId)&&t.loadWishList(o,i.customerId)})),i.filter((function(e){var t=E(e,1)[0];return Boolean(t)})),i.take(1)).subscribe((function(r){var n=E(r,2),o=n[0],i=n[1];return t.multiCartService.addEntry(i,o,e,1)}))},e.prototype.removeEntry=function(e){var t=this;this.getWishListId().pipe(i.distinctUntilChanged(),i.withLatestFrom(this.authService.getOccUserId(),this.userService.get()),i.tap((function(e){var r=E(e,3),n=r[0],o=r[1],i=r[2];!Boolean(n)&&Boolean(i)&&Boolean(i.customerId)&&t.loadWishList(o,i.customerId)})),i.filter((function(e){var t=E(e,1)[0];return Boolean(t)})),i.take(1)).subscribe((function(r){var n=E(r,2),o=n[0],i=n[1];return t.multiCartService.removeEntry(i,o,e.entryNumber)}))},e.prototype.getWishListLoading=function(){var e=this;return this.getWishListId().pipe(i.switchMap((function(t){return e.multiCartService.isStable(t).pipe(i.map((function(e){return!e})))})))},e.prototype.getWishListId=function(){return this.store.pipe(n.select(Ly))},e.ctorParameters=function(){return[{type:n.Store},{type:vt},{type:GS},{type:Iv}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt),t.ɵɵinject(GS),t.ɵɵinject(Iv))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),WS=function(){},qS=function(r){function n(t,n){var o=r.call(this)||this;return o.translation=t,o.activeCartService=n,o.cart$=o.activeCartService.getActive(),o.pageType=e.PageType.CONTENT_PAGE,o.pageTemplate="MultiStepCheckoutSummaryPageTemplate",o}return h(n,r),n.prototype.resolveTitle=function(){var e=this;return this.cart$.pipe(i.switchMap((function(t){return e.translation.translate("pageMetaResolver.checkout.title",{count:t.totalItems})})))},n.prototype.resolveRobots=function(){return o.of([e.PageRobotsMeta.NOFOLLOW,e.PageRobotsMeta.NOINDEX])},n.ctorParameters=function(){return[{type:WS},{type:Rv}]},n.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new n(t.ɵɵinject(WS),t.ɵɵinject(Rv))},token:n,providedIn:"root"}),n=v([t.Injectable({providedIn:"root"})],n)}(fy),zS={results:{}};function YS(e,t){switch(void 0===e&&(e=zS),t.type){case"[Checkout] Verify Address Success":var r=t.payload;return y(y({},e),{results:r});case"[Checkout] Verify Address Fail":return y(y({},e),{results:"FAIL"});case"[Checkout] Clear Address Verification Results":return y(y({},e),{results:{}})}return e}var KS={entities:{}};function ZS(e,t){switch(void 0===e&&(e=KS),t.type){case"[Checkout] Load Card Success":var r=t.payload.reduce((function(e,t){var r;return y(y({},e),((r={})[t.code]=t,r))}),y({},e.entities));return y(y({},e),{entities:r});case"[Checkout] Clear Miscs Data":return KS}return e}var JS={address:{},deliveryMode:{supported:{},selected:""},paymentDetails:{},orderDetails:{}};function QS(e,t){switch(void 0===e&&(e=JS),t.type){case"[Checkout] Add Delivery Address Success":case"[Checkout] Set Delivery Address Success":var r=t.payload;return y(y({},e),{address:r});case"[Checkout] Load Supported Delivery Modes Success":var n=t.payload;if(!n)return e;var o=n.reduce((function(e,t){var r;return y(y({},e),((r={})[t.code]=t,r))}),y({},e.deliveryMode.supported));return y(y({},e),{deliveryMode:y(y({},e.deliveryMode),{supported:o})});case"[Checkout] Set Delivery Mode Success":var i=t.payload;return y(y({},e),{deliveryMode:y(y({},e.deliveryMode),{selected:i})});case"[Checkout] Create Payment Details Success":case"[Checkout] Set Payment Details Success":return y(y({},e),{paymentDetails:t.payload});case"[Checkout] Create Payment Details Fail":var s=t.payload;return s.hasError?y(y({},e),{paymentDetails:s}):e;case"[Checkout] Place Order Success":var a=t.payload;return y(y({},e),{orderDetails:a});case"[Checkout] Clear Checkout Data":return JS;case"[Checkout] Clear One Checkout Step":switch(t.payload){case 1:return y(y({},e),{address:{}});case 2:return y(y({},e),{deliveryMode:y(y({},e.deliveryMode),{supported:{},selected:""})});case 3:return y(y({},e),{paymentDetails:{}})}return e;case"[Checkout] Clear Supported Delivery Modes":case"[Checkout] Clear Miscs Data":return y(y({},e),{deliveryMode:y(y({},e.deliveryMode),{supported:{}})});case"[Checkout] Load Checkout Details Success":return y(y({},e),{address:t.payload.deliveryAddress,deliveryMode:y(y({},e.deliveryMode),{selected:t.payload.deliveryMode&&t.payload.deliveryMode.code}),paymentDetails:t.payload.paymentInfo});case"[Checkout] Clear Checkout Delivery Address":return y(y({},e),{address:{}});case"[Checkout] Clear Checkout Delivery Mode":return y(y({},e),{deliveryMode:y(y({},e.deliveryMode),{selected:""})})}return e}function XS(){return{steps:se(kv,QS),cardTypes:ZS,addressVerification:YS}}var eg=new t.InjectionToken("CheckoutReducers"),tg={provide:eg,useFactory:XS},rg=function(){function e(e){this.adapter=e}return e.prototype.getAll=function(e){return this.adapter.loadAll(e)},e.prototype.add=function(e,t){return this.adapter.add(e,t)},e.prototype.update=function(e,t,r){return this.adapter.update(e,t,r)},e.prototype.verify=function(e,t){return this.adapter.verify(e,t)},e.prototype.delete=function(e,t){return this.adapter.delete(e,t)},e.ctorParameters=function(){return[{type:Cs}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Cs))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),ng=function(){function e(e,t){var r=this;this.actions$=e,this.userAddressConnector=t,this.verifyAddress$=this.actions$.pipe(c.ofType("[Checkout] Verify Address"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return r.userAddressConnector.verify(e.userId,e.address).pipe(i.map((function(e){return new bv(e)})),i.catchError((function(e){return o.of(new Ov(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:rg}]},v([c.Effect()],e.prototype,"verifyAddress$",void 0),e=v([t.Injectable()],e)}(),og=function(){function e(e){this.adapter=e}return e.prototype.create=function(e,t,r){return this.adapter.create(e,t,r)},e.prototype.set=function(e,t,r){return this.adapter.set(e,t,r)},e.prototype.getCardTypes=function(){return this.adapter.loadCardTypes()},e.ctorParameters=function(){return[{type:Zo}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Zo))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),ig=function(){function e(e,t){var r=this;this.actions$=e,this.checkoutPaymentConnector=t,this.loadCardTypes$=this.actions$.pipe(c.ofType("[Checkout] Load Card Types"),i.switchMap((function(){return r.checkoutPaymentConnector.getCardTypes().pipe(i.map((function(e){return new Fv(e)})),i.catchError((function(e){return o.of(new Mv(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:og}]},v([c.Effect()],e.prototype,"loadCardTypes$",void 0),e=v([t.Injectable()],e)}(),sg=function(){function e(e){this.adapter=e}return e.prototype.placeOrder=function(e,t){return this.adapter.placeOrder(e,t)},e.prototype.loadCheckoutDetails=function(e,t){return this.adapter.loadCheckoutDetails(e,t)},e.prototype.clearCheckoutDeliveryAddress=function(e,t){return this.adapter.clearCheckoutDeliveryAddress(e,t)},e.prototype.clearCheckoutDeliveryMode=function(e,t){return this.adapter.clearCheckoutDeliveryMode(e,t)},e.ctorParameters=function(){return[{type:zo}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(zo))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),ag=function(){function e(e){this.adapter=e}return e.prototype.createAddress=function(e,t,r){return this.adapter.createAddress(e,t,r)},e.prototype.setAddress=function(e,t,r){return this.adapter.setAddress(e,t,r)},e.prototype.setMode=function(e,t,r){return this.adapter.setMode(e,t,r)},e.prototype.getMode=function(e,t){return this.adapter.getMode(e,t)},e.prototype.getSupportedModes=function(e,t){return this.adapter.getSupportedModes(e,t)},e.ctorParameters=function(){return[{type:Ko}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Ko))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),cg=function(){function e(e,t,r,n){var s=this;this.actions$=e,this.checkoutDeliveryConnector=t,this.checkoutPaymentConnector=r,this.checkoutConnector=n,this.contextChange$=this.actions$.pipe(c.ofType(rr,pr)),this.addDeliveryAddress$=this.actions$.pipe(c.ofType("[Checkout] Add Delivery Address"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.checkoutDeliveryConnector.createAddress(e.userId,e.cartId,e.address).pipe(i.mergeMap((function(t){return t.titleCode=e.address.titleCode,e.address.region&&e.address.region.isocodeShort&&Object.assign(t.region,{isocodeShort:e.address.region.isocodeShort}),"anonymous"===e.userId?[new Gv({userId:e.userId,cartId:e.cartId,address:t})]:[new ku(e.userId),new Gv({userId:e.userId,cartId:e.cartId,address:t})]})),i.catchError((function(e){return o.of(new xv(an(e)))})))})),Tv(this.contextChange$)),this.setDeliveryAddress$=this.actions$.pipe(c.ofType("[Checkout] Set Delivery Address"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.checkoutDeliveryConnector.setAddress(e.userId,e.cartId,e.address.id).pipe(i.mergeMap((function(){return[new Hv(e.address),new mC({userId:e.userId,cartId:e.cartId}),new pC,new Yv,new Wv({userId:e.userId,cartId:e.cartId})]})),i.catchError((function(e){return o.of(new Bv(an(e)))})))})),Tv(this.contextChange$)),this.loadSupportedDeliveryModes$=this.actions$.pipe(c.ofType("[Checkout] Load Supported Delivery Modes"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.checkoutDeliveryConnector.getSupportedModes(e.userId,e.cartId).pipe(i.map((function(e){return new zv(e)})),i.catchError((function(e){return o.of(new qv(an(e)))})))})),Tv(this.contextChange$)),this.clearCheckoutMiscsDataOnLanguageChange$=this.actions$.pipe(c.ofType(pr),i.mergeMap((function(){return[new vC,new Yv]}))),this.clearDeliveryModesOnCurrencyChange$=this.actions$.pipe(c.ofType(rr),i.map((function(){return new pC}))),this.clearCheckoutDataOnLogout$=this.actions$.pipe(c.ofType(ze),i.map((function(){return new lC}))),this.clearCheckoutDataOnLogin$=this.actions$.pipe(c.ofType(qe),i.map((function(){return new lC}))),this.setDeliveryMode$=this.actions$.pipe(c.ofType("[Checkout] Set Delivery Mode"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.checkoutDeliveryConnector.setMode(e.userId,e.cartId,e.selectedModeId).pipe(i.mergeMap((function(){return[new Jv(e.selectedModeId),new ev({userId:e.userId,cartId:e.cartId})]})),i.catchError((function(e){return o.of(new Zv(an(e)))})))})),Tv(this.contextChange$)),this.createPaymentDetails$=this.actions$.pipe(c.ofType("[Checkout] Create Payment Details"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.checkoutPaymentConnector.create(e.userId,e.cartId,e.paymentDetails).pipe(i.mergeMap((function(t){return"anonymous"===e.userId?[new tC(t)]:[new uu(e.userId),new tC(t)]})),i.catchError((function(e){return o.of(new eC(an(e)))})))})),Tv(this.contextChange$)),this.setPaymentDetails$=this.actions$.pipe(c.ofType("[Checkout] Set Payment Details"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.checkoutPaymentConnector.set(e.userId,e.cartId,e.paymentDetails.id).pipe(i.map((function(){return new iC(e.paymentDetails)})),i.catchError((function(e){return o.of(new oC(an(e)))})))})),Tv(this.contextChange$)),this.placeOrder$=this.actions$.pipe(c.ofType(Nv),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.checkoutConnector.placeOrder(e.userId,e.cartId).pipe(i.switchMap((function(t){return[new sv({cartId:e.cartId}),new uC(t)]})),i.catchError((function(e){return o.of(new cC(an(e)))})))})),Tv(this.contextChange$)),this.loadCheckoutDetails$=this.actions$.pipe(c.ofType("[Checkout] Load Checkout Details"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.checkoutConnector.loadCheckoutDetails(e.userId,e.cartId).pipe(i.map((function(e){return new yC(e)})),i.catchError((function(e){return o.of(new hC(an(e)))})))})),Tv(this.contextChange$)),this.reloadDetailsOnMergeCart$=this.actions$.pipe(c.ofType("[Cart] Merge Cart Success"),i.map((function(e){return e.payload})),i.map((function(e){return new fC({userId:e.userId,cartId:e.cartId})}))),this.clearCheckoutDeliveryAddress$=this.actions$.pipe(c.ofType("[Checkout] Clear Checkout Delivery Address"),i.map((function(e){return e.payload})),i.filter((function(e){return Boolean(e.cartId)})),i.switchMap((function(e){return s.checkoutConnector.clearCheckoutDeliveryAddress(e.userId,e.cartId).pipe(i.map((function(){return new SC})),i.catchError((function(e){return o.of(new gC(an(e)))})))})),Tv(this.contextChange$)),this.clearCheckoutDeliveryMode$=this.actions$.pipe(c.ofType("[Checkout] Clear Checkout Delivery Mode"),i.map((function(e){return e.payload})),i.filter((function(e){return Boolean(e.cartId)})),i.concatMap((function(e){return s.checkoutConnector.clearCheckoutDeliveryMode(e.userId,e.cartId).pipe(i.map((function(){return new EC(y({},e))})),i.catchError((function(t){return o.from([new IC(y(y({},e),{error:an(t)})),new ev({cartId:e.cartId,userId:e.userId})])})))})),Tv(this.contextChange$))}return e.ctorParameters=function(){return[{type:c.Actions},{type:ag},{type:og},{type:sg}]},v([c.Effect()],e.prototype,"addDeliveryAddress$",void 0),v([c.Effect()],e.prototype,"setDeliveryAddress$",void 0),v([c.Effect()],e.prototype,"loadSupportedDeliveryModes$",void 0),v([c.Effect()],e.prototype,"clearCheckoutMiscsDataOnLanguageChange$",void 0),v([c.Effect()],e.prototype,"clearDeliveryModesOnCurrencyChange$",void 0),v([c.Effect()],e.prototype,"clearCheckoutDataOnLogout$",void 0),v([c.Effect()],e.prototype,"clearCheckoutDataOnLogin$",void 0),v([c.Effect()],e.prototype,"setDeliveryMode$",void 0),v([c.Effect()],e.prototype,"createPaymentDetails$",void 0),v([c.Effect()],e.prototype,"setPaymentDetails$",void 0),v([c.Effect()],e.prototype,"placeOrder$",void 0),v([c.Effect()],e.prototype,"loadCheckoutDetails$",void 0),v([c.Effect()],e.prototype,"reloadDetailsOnMergeCart$",void 0),v([c.Effect()],e.prototype,"clearCheckoutDeliveryAddress$",void 0),v([c.Effect()],e.prototype,"clearCheckoutDeliveryMode$",void 0),e=v([t.Injectable()],e)}(),ug=[cg,ng,ig],pg=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule,n.StoreModule.forFeature("checkout",eg),c.EffectsModule.forFeature(ug)],providers:[tg]})],e)}(),dg=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:[{provide:fy,useExisting:qS,multi:!0}]}},e=r=v([t.NgModule({imports:[pg]})],e)}(),lg=function(e){return e.address},fg=function(e){return e.deliveryMode},hg=function(e){return e.paymentDetails},yg=hg,vg=function(e){return e.orderDetails},Cg=vg,Sg=n.createFeatureSelector("checkout"),gg=function(e){return e.steps},mg=n.createSelector(Sg,gg),Eg=function(e){return ae(e)},Ig=n.createSelector(mg,Eg),Rg=n.createSelector(Ig,lg),Tg=n.createSelector(Ig,fg),Ag=function(e){return e&&Object.keys(e.supported).map((function(t){return e.supported[t]}))},Ug=n.createSelector(Tg,Ag),Pg=function(e){return e&&e.selected},Lg=n.createSelector(Tg,Pg),_g=function(e){if(""!==e.selected)return 0===Object.keys(e.supported).length?null:e.supported[e.selected]},Og=n.createSelector(Tg,_g),bg=n.createSelector(Ig,hg),wg=n.createSelector(Ig,vg),Dg=function(e){return pe(e)&&!ce(e)},Mg=n.createSelector(mg,Dg),Fg=function(e){return e.addressVerification},kg=n.createSelector(Sg,Fg),Ng=n.createSelector(kg,(function(e){return e.results})),jg=n.createSelector(Sg,(function(e){return e.cardTypes})),xg=n.createSelector(jg,(function(e){return e.entities})),$g=function(e){return Object.keys(e).map((function(t){return e[t]}))},Gg=n.createSelector(xg,$g),Bg=Object.freeze({__proto__:null,getAddressVerificationResultsState:kg,getAddressVerificationResults:Ng,"ɵ0":Fg,getCardTypesState:jg,getCardTypesEntites:xg,getAllCardTypes:Gg,"ɵ1":$g,getCheckoutState:Sg,getCheckoutStepsState:mg,getCheckoutSteps:Ig,getDeliveryAddress:Rg,getDeliveryMode:Tg,getSupportedDeliveryModes:Ug,getSelectedDeliveryModeCode:Lg,getSelectedDeliveryMode:Og,getPaymentDetails:bg,getCheckoutOrderDetails:wg,getCheckoutDetailsLoaded:Mg,"ɵ2":yg,"ɵ3":Cg,"ɵ4":gg,"ɵ5":Eg,"ɵ6":Ag,"ɵ7":Pg,"ɵ8":_g,"ɵ9":Dg}),Hg=function(){function e(e,t,r){this.checkoutStore=e,this.authService=t,this.activeCartService=r}return e.prototype.placeOrder=function(){var e,t;this.actionAllowed()&&(this.authService.getOccUserId().subscribe((function(t){return e=t})).unsubscribe(),this.activeCartService.getActiveCartId().subscribe((function(e){return t=e})).unsubscribe(),e&&t&&this.checkoutStore.dispatch(new aC({userId:e,cartId:t})))},e.prototype.clearCheckoutData=function(){this.checkoutStore.dispatch(new lC)},e.prototype.clearCheckoutStep=function(e){this.checkoutStore.dispatch(new dC(e))},e.prototype.loadCheckoutDetails=function(e){var t;this.authService.getOccUserId().subscribe((function(e){return t=e})).unsubscribe(),t&&this.checkoutStore.dispatch(new fC({userId:t,cartId:e}))},e.prototype.getCheckoutDetailsLoaded=function(){return this.checkoutStore.pipe(n.select(Mg))},e.prototype.getOrderDetails=function(){return this.checkoutStore.pipe(n.select(wg))},e.prototype.actionAllowed=function(){var e;return this.authService.getOccUserId().subscribe((function(t){return e=t})).unsubscribe(),e&&"anonymous"!==e||this.activeCartService.isGuestCart()},e.ctorParameters=function(){return[{type:n.Store},{type:vt},{type:Rv}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt),t.ɵɵinject(Rv))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Vg=function(){function e(e,t,r){this.checkoutStore=e,this.authService=t,this.activeCartService=r}return e.prototype.getSupportedDeliveryModes=function(){var e=this;return this.checkoutStore.pipe(n.select(Ug),i.withLatestFrom(this.checkoutStore.pipe(n.select(Lc("setSupportedDeliveryMode")))),i.tap((function(t){var r=E(t,2)[1];r.loading||r.success||r.error||e.loadSupportedDeliveryModes()})),i.pluck(0),i.shareReplay({bufferSize:1,refCount:!0}))},e.prototype.getSelectedDeliveryMode=function(){return this.checkoutStore.pipe(n.select(Og))},e.prototype.getSelectedDeliveryModeCode=function(){return this.checkoutStore.pipe(n.select(Lg))},e.prototype.getDeliveryAddress=function(){return this.checkoutStore.pipe(n.select(Rg))},e.prototype.getSetDeliveryAddressProcess=function(){return this.checkoutStore.pipe(n.select(Lc("setDeliveryAddress")))},e.prototype.resetSetDeliveryAddressProcess=function(){this.checkoutStore.dispatch(new Vv)},e.prototype.getSetDeliveryModeProcess=function(){return this.checkoutStore.pipe(n.select(Lc("setDeliveryMode")))},e.prototype.resetSetDeliveryModeProcess=function(){this.checkoutStore.dispatch(new Qv)},e.prototype.resetLoadSupportedDeliveryModesProcess=function(){this.checkoutStore.dispatch(new Yv)},e.prototype.getLoadSupportedDeliveryModeProcess=function(){return this.checkoutStore.pipe(n.select(Lc("setSupportedDeliveryMode")))},e.prototype.clearCheckoutDeliveryModes=function(){this.checkoutStore.dispatch(new pC)},e.prototype.getAddressVerificationResults=function(){return this.checkoutStore.pipe(n.select(Ng),i.filter((function(e){return 0!==Object.keys(e).length})))},e.prototype.createAndSetAddress=function(e){var t,r;this.actionAllowed()&&(this.authService.getOccUserId().subscribe((function(e){return t=e})).unsubscribe(),this.activeCartService.getActiveCartId().subscribe((function(e){return r=e})).unsubscribe(),t&&r&&this.checkoutStore.dispatch(new jv({userId:t,cartId:r,address:e})))},e.prototype.loadSupportedDeliveryModes=function(){var e,t;this.actionAllowed()&&(this.authService.getOccUserId().subscribe((function(t){return e=t})).unsubscribe(),this.activeCartService.getActiveCartId().subscribe((function(e){return t=e})).unsubscribe(),e&&t&&this.checkoutStore.dispatch(new Wv({userId:e,cartId:t})))},e.prototype.setDeliveryMode=function(e){var t,r;this.actionAllowed()&&(this.authService.getOccUserId().subscribe((function(e){return t=e})).unsubscribe(),this.activeCartService.getActiveCartId().subscribe((function(e){return r=e})).unsubscribe(),t&&r&&this.checkoutStore.dispatch(new Kv({userId:t,cartId:r,selectedModeId:e})))},e.prototype.verifyAddress=function(e){var t;this.actionAllowed()&&(this.authService.getOccUserId().subscribe((function(e){return t=e})).unsubscribe(),t&&this.checkoutStore.dispatch(new _v({userId:t,address:e})))},e.prototype.setDeliveryAddress=function(e){var t,r;this.actionAllowed()&&(this.authService.getOccUserId().subscribe((function(e){return t=e})).unsubscribe(),this.activeCartService.getActiveCartId().subscribe((function(e){return r=e})).unsubscribe(),r&&t&&this.checkoutStore.dispatch(new Gv({userId:t,cartId:r,address:e})))},e.prototype.clearAddressVerificationResults=function(){this.checkoutStore.dispatch(new wv)},e.prototype.clearCheckoutDeliveryAddress=function(){var e,t;this.authService.getOccUserId().subscribe((function(t){return e=t})).unsubscribe(),this.activeCartService.getActiveCartId().subscribe((function(e){return t=e})).unsubscribe(),e&&t&&this.checkoutStore.dispatch(new CC({userId:e,cartId:t}))},e.prototype.clearCheckoutDeliveryMode=function(){var e,t;this.authService.getOccUserId().subscribe((function(t){return e=t})).unsubscribe(),this.activeCartService.getActiveCartId().subscribe((function(e){return t=e})).unsubscribe(),e&&t&&this.checkoutStore.dispatch(new mC({userId:e,cartId:t}))},e.prototype.clearCheckoutDeliveryDetails=function(){this.clearCheckoutDeliveryAddress(),this.clearCheckoutDeliveryMode(),this.clearCheckoutDeliveryModes()},e.prototype.actionAllowed=function(){var e;return this.authService.getOccUserId().subscribe((function(t){return e=t})).unsubscribe(),e&&"anonymous"!==e||this.activeCartService.isGuestCart()},e.ctorParameters=function(){return[{type:n.Store},{type:vt},{type:Rv}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt),t.ɵɵinject(Rv))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Wg=function(){function e(e,t,r){this.checkoutStore=e,this.authService=t,this.activeCartService=r}return e.prototype.getCardTypes=function(){return this.checkoutStore.pipe(n.select(Gg))},e.prototype.getPaymentDetails=function(){return this.checkoutStore.pipe(n.select(bg))},e.prototype.getSetPaymentDetailsResultProcess=function(){return this.checkoutStore.pipe(n.select(Lc("setPaymentDetails")))},e.prototype.resetSetPaymentDetailsProcess=function(){this.checkoutStore.dispatch(new sC)},e.prototype.loadSupportedCardTypes=function(){this.checkoutStore.dispatch(new Dv)},e.prototype.createPaymentDetails=function(e){var t,r;this.actionAllowed()&&(this.authService.getOccUserId().subscribe((function(e){return t=e})).unsubscribe(),this.activeCartService.getActiveCartId().subscribe((function(e){return r=e})).unsubscribe(),t&&r&&this.checkoutStore.dispatch(new Xv({userId:t,cartId:r,paymentDetails:e})))},e.prototype.setPaymentDetails=function(e){var t,r;this.actionAllowed()&&(this.authService.getOccUserId().subscribe((function(e){return t=e})).unsubscribe(),this.activeCartService.getActive().subscribe((function(e){return r=e})).unsubscribe(),t&&r&&this.checkoutStore.dispatch(new nC({userId:t,cartId:r.code,paymentDetails:e})))},e.prototype.paymentProcessSuccess=function(){this.checkoutStore.dispatch(new rC)},e.prototype.actionAllowed=function(){var e;return this.authService.getOccUserId().subscribe((function(t){return e=t})).unsubscribe(),e&&"anonymous"!==e||this.activeCartService.isGuestCart()},e.ctorParameters=function(){return[{type:n.Store},{type:vt},{type:Rv}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt),t.ɵɵinject(Rv))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),qg={backend:{occ:{endpoints:{component:"cms/components/${id}",components:"cms/components",pages:"cms/pages",page:"cms/pages/${id}"},legacy:!1}},cmsComponents:{}},zg=function(r){function n(t,n){var o=r.call(this)||this;return o.cms=t,o.translation=n,o.cms$=o.cms.getCurrentPage().pipe(i.filter((function(e){return Boolean(e)}))),o.pageType=e.PageType.CONTENT_PAGE,o}return h(n,r),n.prototype.resolveTitle=function(){return this.cms$.pipe(i.map((function(e){return e.title})))},n.prototype.resolveBreadcrumbs=function(){return this.translation.translate("common.home").pipe(i.map((function(e){return[{label:e,link:"/"}]})))},n.ctorParameters=function(){return[{type:bS},{type:WS}]},n.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new n(t.ɵɵinject(bS),t.ɵɵinject(WS))},token:n,providedIn:"root"}),n=v([t.Injectable({providedIn:"root"})],n)}(fy),Yg=function(){function e(){}return e=v([t.NgModule({providers:[{provide:fy,useExisting:zg,multi:!0}]})],e)}();function Kg(e,t){return void 0===e&&(e=0),function(r){var n=[];return r.pipe(i.tap((function(e){return n.push(e)})),i.debounceTime(e,t),i.map((function(){return n})),i.tap((function(){return n=[]})))}}var Zg=new t.InjectionToken("TEST_CONFIG_COOKIE_NAME");function Jg(e,t,n){var o,i;return r.isPlatformBrowser(t)&&e?function(e){try{return JSON.parse(decodeURIComponent(e))}catch(e){return{}}}((o=n.cookie,(i=new RegExp("(?:^|;\\s*)"+e+"=([^;]*)","g").exec(o))&&decodeURIComponent(i[1])||"")):{}}var Qg=function(){function e(){}var n;return n=e,e.forRoot=function(e){return{ngModule:n,providers:[{provide:Zg,useValue:e&&e.cookie},_(Jg,[Zg,t.PLATFORM_ID,r.DOCUMENT])]}},e=n=v([t.NgModule({})],e)}();function Xg(e,r){return function(){t.isDevMode()&&e.getStableConfig().then((function(e){return Cc(e,r||[])}))}}var em=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:[{provide:t.APP_INITIALIZER,multi:!0,useFactory:Xg,deps:[Yl,[new t.Optional,yc]]}]}},e=r=v([t.NgModule()],e)}();function tm(e,t){return function(){return e.initialize(t)}}var rm=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:[{provide:Bs,useValue:!0},{provide:t.APP_INITIALIZER,multi:!0,useFactory:tm,deps:[Yl,[new t.Optional,Gs]]}]}},e=r=v([t.NgModule({})],e)}(),nm=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return h(r,e),r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root",useExisting:A})],r)}(ri),om=function(){function e(e){this.cmsDataConfig=e}return e.prototype.mergePageStructure=function(e,t){var r=this;return this.mergePage(e,t).pipe(i.switchMap((function(e){return r.mergeSlots(e)})))},e.prototype.shouldIgnoreBackend=function(e){return this.getPageFromConfig(e).pipe(i.map((function(e){return!!e&&!!e.ignoreBackend})))},e.prototype.getComponentFromConfig=function(e){return o.of(this.getComponentById(e))},e.prototype.getComponentsFromConfig=function(e){var t=this;return o.of(e.map((function(e){return t.getComponentById(e)})))},e.prototype.getPageFromConfig=function(e){return o.of(this.cmsDataConfig.cmsStructure&&this.cmsDataConfig.cmsStructure.pages?this.cmsDataConfig.cmsStructure.pages.find((function(t){return t.pageId===e})):null)},e.prototype.mergePage=function(e,t){var r=this;return this.getPageFromConfig(e).pipe(i.switchMap((function(e){return e?(t.page||(t.page=y({},e),t.page.slots={}),t.page.slots||(t.page.slots={}),r.mergeSlots(t,e.slots)):o.of(t)})))},e.prototype.mergeSlots=function(e,t){var r,n,i,s;if(!t&&this.cmsDataConfig.cmsStructure&&this.cmsDataConfig.cmsStructure.slots&&(t=this.cmsDataConfig.cmsStructure.slots),!t)return o.of(e);try{for(var a=m(Object.keys(t)),c=a.next();!c.done;c=a.next()){var u=c.value;if(!Object.keys(e.page.slots).includes(u)){e.page.slots[u]={};try{for(var p=(i=void 0,m(this.getComponentsByPosition(t,u))),d=p.next();!d.done;d=p.next()){var l=d.value;e.page.slots[u].components||(e.page.slots[u].components=[]),e.page.slots[u].components.push({uid:l.uid,flexType:l.flexType,typeCode:l.typeCode}),e.components||(e.components=[]),e.components.push(l)}}catch(e){i={error:e}}finally{try{d&&!d.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o.of(e)},e.prototype.getComponentsByPosition=function(e,t){var r,n,o=[];if(e[t]&&e[t].componentIds)try{for(var i=m(e[t].componentIds),s=i.next();!s.done;s=i.next()){var a=s.value;if(this.cmsDataConfig.cmsStructure&&this.cmsDataConfig.cmsStructure.components){var c=this.cmsDataConfig.cmsStructure.components[a];c&&o.push(y({uid:a},c))}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},e.prototype.getComponentById=function(e){return this.cmsDataConfig.cmsStructure&&this.cmsDataConfig.cmsStructure.components?this.cmsDataConfig.cmsStructure.components[e]:void 0},e.ctorParameters=function(){return[{type:nm}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(nm))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),im=function(){function e(e,t,r){this.cmsStructureConfigService=e,this.adapter=t,this.config=r}return e.prototype.get=function(e,t){var r=this;return this.cmsStructureConfigService.getComponentFromConfig(e).pipe(i.switchMap((function(n){return n?o.of(n):r.adapter.load(e,t)})))},e.prototype.getList=function(e,t){var r=this;return this.cmsStructureConfigService.getComponentsFromConfig(e).pipe(i.switchMap((function(n){var s=n.reduce((function(t,r,n){return void 0===r&&t.push(e[n]),t}),[]);return s.length>0?(r.config.backend.occ.legacy?r.adapter.findComponentsByIdsLegacy(s,t):r.adapter.findComponentsByIds(s,t)).pipe(i.map((function(e){return I(n.filter(Boolean),e)}))):o.of(n)})))},e.ctorParameters=function(){return[{type:om},{type:ii},{type:xr}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(om),t.ɵɵinject(ii),t.ɵɵinject(xr))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),sm=function(){function e(e,t){var r=this;this.actions$=e,this.cmsComponentConnector=t,this.contextChange$=this.actions$.pipe(c.ofType(pr,ze,qe)),this.loadComponent$=c.createEffect((function(){return function(e){var t=void 0===e?{}:e,n=t.scheduler,o=t.debounce,s=void 0===o?0:o;return r.actions$.pipe(c.ofType("[Cms] Load Component"),i.groupBy((function(e){return _S(e.payload.pageContext)})),i.mergeMap((function(e){return e.pipe(Kg(s,n),i.mergeMap((function(e){return r.loadComponentsEffect(e.map((function(e){return e.payload.uid})),e[0].payload.pageContext)})))})),Tv(r.contextChange$))}}))}return e.prototype.loadComponentsEffect=function(e,t){return this.cmsComponentConnector.getList(e,t).pipe(i.switchMap((function(r){var n,i,s=[],a=new Set(e);try{for(var c=m(r),u=c.next();!u.done;u=c.next()){var p=u.value;s.push(new VC({component:p,uid:p.uid,pageContext:t})),a.delete(p.uid)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return a.forEach((function(e){s.push(new HC({uid:e,pageContext:t}))})),o.from(s)})),i.catchError((function(r){return o.from(e.map((function(e){return new HC({uid:e,error:an(r),pageContext:t})})))})))},e.ctorParameters=function(){return[{type:c.Actions},{type:im}]},e=v([t.Injectable()],e)}(),am=[{replace:/\./g,with:"\\."},{replace:/\+/g,with:"\\+"},{replace:/\*/g,with:"[^/]*"}],cm=I(am,[{replace:/\?/g,with:"[^/]"}]),um=I(am,[{replace:/\?/g,with:"\\?"}]);function pm(e,t){void 0===t&&(t=!1);for(var r=t?um:cm,n=e.split("/").reverse(),o="";n.length>0;){var i=n.pop();if("**"===i)n.length>0?o+="(?:.+\\/)?":o+=".*";else o+=r.reduce((function(e,t){return e.replace(t.replace,t.with)}),i),n.length>0&&(o+="\\/")}return o}function dm(e){return e.map((function(e){var t=!e.startsWith("!");return{positive:t,regex:"^"+pm(e=t?e:e.substr(1))+"$"}}))}var lm=function(){function e(){}return e.prototype.getValidator=function(e){var t=dm(e).map((function(e){var t=e.positive,r=e.regex;return{positive:t,regex:new RegExp(r)}})),r=t.filter((function(e){return e.positive})),n=t.filter((function(e){return!e.positive}));return function(e){return r.some((function(t){return t.regex.test(e)}))&&!n.some((function(t){return t.regex.test(e)}))}},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),fm=function(){function e(e){this.globService=e}return e.prototype.getFalsy=function(){return function(){return null}},e.prototype.getFromPaths=function(e){var r=this,n=e.map((function(e){return r.getFromPath(e)})),o=this.getCombined(n);return t.isDevMode()&&(o._paths=e),o},e.prototype.getCombined=function(e){var r=function(t,r,n){for(var o=0;o<e.length;o++){var i=e[o](t,r,n);if(i)return i}return null};return t.isDevMode()&&(r._matchers=e),r},e.prototype.getFromPath=function(e){void 0===e&&(e="");var r=function(t,r,n){
/**
                 * @license
                 * The MIT License
                 * Copyright (c) 2010-2019 Google LLC. http://angular.io/license
                 *
                 * See:
                 * - https://github.com/angular/angular/blob/6f5f481fdae03f1d8db36284b64c7b82d9519d85/packages/router/src/shared.ts#L121
                 */
if(""===e)return"full"===n.pathMatch&&(r.hasChildren()||t.length>0)?null:{consumed:[],posParams:{}};var o=e.split("/");if(o.length>t.length)return null;if("full"===n.pathMatch&&(r.hasChildren()||o.length<t.length))return null;for(var i={},s=0;s<o.length;s++){var a=o[s],c=t[s];if(a.startsWith(":"))i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:t.slice(0,o.length),posParams:i}};return t.isDevMode()&&(r._path=e),r},e.prototype.getOpposite=function(e){var r=function(t,r,n){return e(t,r,n)?null:{consumed:t,posParams:{}}};return t.isDevMode()&&(r._originalMatcher=e),r},e.prototype.getFromGlob=function(e){var r=this.globService.getValidator(e),n=function(e){var t="/"+e.map((function(e){return e.path})).join("/");return r(t)?{consumed:e,posParams:{}}:null};return t.isDevMode()&&(n._globPatterns=e),n},e.ctorParameters=function(){return[{type:lm}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(lm))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),hm=function(){function e(e,t,r){this.injector=e,this.routingConfigService=t,this.urlMatcherService=r,this.initCalled=!1}return e.prototype.init=function(){this.initCalled||(this.initCalled=!0,this.configure())},e.prototype.configure=function(){var e=this.injector.get(a.Router);e.resetConfig(this.configureRoutes(e.config))},e.prototype.configureRoutes=function(e){var t=this;return e.map((function(e){var r=t.configureRoute(e);return e.children&&e.children.length&&(r.children=t.configureRoutes(e.children)),r}))},e.prototype.configureRoute=function(e){var t,r=this.getRouteName(e);if(r){var n=this.routingConfigService.getRouteConfig(r);return this.validateRouteConfig(n,r,e),(null==n?void 0:n.disabled)?(delete e.path,y(y({},e),{matcher:this.urlMatcherService.getFalsy()})):(null==n?void 0:n.matchers)?(delete e.path,y(y({},e),{matcher:this.resolveUrlMatchers(e,null==n?void 0:n.matchers)})):1===(null===(t=null==n?void 0:n.paths)||void 0===t?void 0:t.length)?(delete e.matcher,y(y({},e),{path:null==n?void 0:n.paths[0]})):(delete e.path,y(y({},e),{matcher:this.urlMatcherService.getFromPaths((null==n?void 0:n.paths)||[])}))}return e},e.prototype.resolveUrlMatchers=function(e,t){var r=this,n=t.map((function(t){return"function"==typeof t?t:r.resolveUrlMatcherFactory(e,t)}));return this.urlMatcherService.getCombined(n)},e.prototype.resolveUrlMatcherFactory=function(e,t){return this.injector.get(t)(e)},e.prototype.getRouteName=function(e){return e.data&&e.data.cxRoute},e.prototype.validateRouteConfig=function(e,r,n){if(t.isDevMode()){if(null===e||null===e.paths||(null==e?void 0:e.matchers))return;if(!(null==e?void 0:e.paths))return void this.warn("Could not configure the named route '"+r+"'",n,"due to undefined config or undefined 'paths' property for this route")}},e.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.isDevMode()&&console.warn.apply(console,I(e))},e.ctorParameters=function(){return[{type:t.Injector},{type:Rt},{type:fm}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(t.INJECTOR),t.ɵɵinject(Rt),t.ɵɵinject(fm))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),ym=function(){function e(e){this.urlService=e}return e.prototype.transform=function(e){return this.urlService.transform(e)},e.ctorParameters=function(){return[{type:Tt}]},e=v([t.Pipe({name:"cxUrl"})],e)}(),vm=function(){function e(e){this.semanticPath=e}return e.prototype.transform=function(e){return this.semanticPath.transform({cxRoute:"product",params:e})},e.ctorParameters=function(){return[{type:Tt}]},e=v([t.Pipe({name:"cxProductUrl"})],e)}(),Cm=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule],declarations:[ym,vm],exports:[ym,vm]})],e)}(),Sm=function(){function e(){}return e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root",useExisting:A})],e)}(),gm=function(){function e(e,t){this.winRef=e,this.platformId=t}return e.prototype.canActivate=function(e,t){return r.isPlatformBrowser(this.platformId)&&this.redirect(e,t),!1},e.prototype.redirect=function(e,t){var r=this.winRef.nativeWindow;r&&r.location&&(r.location.href=t.url)},e.ctorParameters=function(){return[{type:St},{type:Object,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(St),t.ɵɵinject(t.PLATFORM_ID))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"}),C(1,t.Inject(t.PLATFORM_ID))],e)}();function mm(e){return function(){e.addRoutes()}}var Em=function(){function e(e,t,r){this.config=e,this.urlMatcherService=t,this.injector=r}return Object.defineProperty(e.prototype,"internalUrlPatterns",{get:function(){return this.config&&this.config.routing&&this.config.routing.internal||[]},enumerable:!0,configurable:!0}),e.prototype.addRoutes=function(){var e=this.injector.get(a.Router),t=this.getRoutes();t.length&&e.resetConfig(I(t,e.config))},e.prototype.getRoutes=function(){if(!this.internalUrlPatterns.length)return[];var e=[];return e.push({pathMatch:"full",matcher:this.getUrlMatcher(),canActivate:[gm],component:{}}),e},e.prototype.getUrlMatcher=function(){var e=this.urlMatcherService.getFromGlob(this.internalUrlPatterns);return this.urlMatcherService.getOpposite(e)},e.ctorParameters=function(){return[{type:Sm},{type:fm},{type:t.Injector}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Sm),t.ɵɵinject(fm),t.ɵɵinject(t.INJECTOR))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Im=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:[{provide:t.APP_INITIALIZER,multi:!0,useFactory:mm,deps:[Em]}]}},e=r=v([t.NgModule()],e)}(),Rm=function(e,t){this.id=e,this.type=t},Tm=function(){function e(e){var t=this;this.config=e,this.nonProtectedPaths=[],this.shouldProtect&&(this.nonProtectedPaths=this.getNonProtectedPaths().map((function(e){return t.getSegments(e)})))}return Object.defineProperty(e.prototype,"routingConfig",{get:function(){return this.config&&this.config.routing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldProtect",{get:function(){return this.routingConfig.protected},enumerable:!0,configurable:!0}),e.prototype.isUrlProtected=function(e){return this.shouldProtect&&!this.matchAnyPath(e,this.nonProtectedPaths)},e.prototype.matchAnyPath=function(e,t){var r=this;return t.some((function(t){return r.matchPath(e,t)}))},e.prototype.matchPath=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],o=e[r];if(!n.startsWith(":")&&n!==o)return!1}return!0},e.prototype.getNonProtectedPaths=function(){return Object.values(this.routingConfig.routes).reduce((function(e,t){return!1===t.protected&&t.paths&&t.paths.length?e.concat(t.paths):e}),[])},e.prototype.getSegments=function(e){return(e||"").split("/")},e.ctorParameters=function(){return[{type:It}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(It))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Am=function(){function e(e,t){this.service=e,this.authGuard=t}return e.prototype.canActivate=function(e){var t=e.url.map((function(e){return e.path}));return t=t.length?t:[""],this.service.isUrlProtected(t)?this.authGuard.canActivate():o.of(!0)},e.ctorParameters=function(){return[{type:Tm},{type:On}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Tm),t.ɵɵinject(On))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),Um=function(){function e(e,t,r){var n=this;this.actions$=e,this.router=t,this.location=r,this.navigate$=this.actions$.pipe(c.ofType("[Router] Go"),i.map((function(e){return e.payload})),i.tap((function(e){var t=e.path,r=e.query,o=e.extras;n.router.navigate(t,y({queryParams:r},o))}))),this.navigateBuUrl$=this.actions$.pipe(c.ofType("[Router] Go By Url"),i.map((function(e){return e.payload})),i.tap((function(e){n.router.navigateByUrl(e)}))),this.clearCmsRoutes$=this.actions$.pipe(c.ofType(pr,ze,qe),i.tap((function(){var e=n.router.config.filter((function(e){return!(e.data&&e.data.cxCmsRouteContext)}));e.length!==n.router.config.length&&n.router.resetConfig(e)}))),this.navigateBack$=this.actions$.pipe(c.ofType("[Router] Back"),i.tap((function(){return n.location.back()}))),this.navigateForward$=this.actions$.pipe(c.ofType("[Router] Forward"),i.tap((function(){return n.location.forward()})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:a.Router},{type:r.Location}]},v([c.Effect({dispatch:!1})],e.prototype,"navigate$",void 0),v([c.Effect({dispatch:!1})],e.prototype,"navigateBuUrl$",void 0),v([c.Effect({dispatch:!1})],e.prototype,"clearCmsRoutes$",void 0),v([c.Effect({dispatch:!1})],e.prototype,"navigateBack$",void 0),v([c.Effect({dispatch:!1})],e.prototype,"navigateForward$",void 0),e=v([t.Injectable()],e)}(),Pm=[Um],Lm={navigationId:0,state:{url:"",queryParams:{},params:{},context:{id:""},cmsRequired:!1},nextState:void 0};function _m(){return{router:Om}}function Om(e,t){switch(void 0===e&&(e=Lm),t.type){case p.ROUTER_NAVIGATION:return y(y({},e),{nextState:t.payload.routerState,navigationId:t.payload.event.id});case p.ROUTER_ERROR:case p.ROUTER_CANCEL:return y(y({},e),{nextState:void 0});case p.ROUTER_NAVIGATED:return{state:t.payload.routerState,navigationId:t.payload.event.id,nextState:void 0};default:return e}}var bm=new t.InjectionToken("RouterReducers"),wm={provide:bm,useFactory:_m},Dm=function(){function t(){}return t.prototype.serialize=function(t){for(var r,n=t.url,o=t.root.queryParams,i=t.root,s=!1;i.firstChild;)(i=i.firstChild).data&&i.data.cxCmsRouteContext&&(r=i.data.cxCmsRouteContext),!s&&(r||i.routeConfig&&i.routeConfig.canActivate&&i.routeConfig.canActivate.find((function(e){return e&&"CmsPageGuard"===e.guardName})))&&(s=!0);var a=i.params;if(i.url.length>0&&"cx-preview"===i.url[0].path)r={id:"smartedit-preview",type:e.PageType.CONTENT_PAGE};else if(a.productCode)r={id:a.productCode,type:e.PageType.PRODUCT_PAGE};else if(a.categoryCode)r={id:a.categoryCode,type:e.PageType.CATEGORY_PAGE};else if(a.brandCode)r={id:a.brandCode,type:e.PageType.CATEGORY_PAGE};else if(void 0!==i.data.pageLabel)r={id:i.data.pageLabel,type:e.PageType.CONTENT_PAGE};else if(!r){if(i.url.length>0)r={id:"/"+i.url.map((function(e){return e.path})).join("/"),type:e.PageType.CONTENT_PAGE};else r={id:"homepage",type:e.PageType.CONTENT_PAGE}}return{url:n,queryParams:o,params:a,context:r,cmsRequired:s}},t}();function Mm(e){return function(){return e.init()}}var Fm=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:[wm,{provide:p.RouterStateSerializer,useClass:Dm},{provide:t.APP_INITIALIZER,useFactory:Mm,deps:[hm],multi:!0}]}},e=r=v([t.NgModule({imports:[n.StoreModule.forFeature("router",bm),c.EffectsModule.forFeature(Pm),p.StoreRouterConnectingModule.forRoot({routerState:1,stateKey:"router"})]})],e)}();var km=new t.InjectionToken("DEFAULT_URL_MATCHER",{providedIn:"root",factory:function(){return e=t.inject(Rt),r=t.inject(fm),function(t){var n=t.data&&t.data.cxRoute,o=e.getRouteConfig(n),i=o&&o.paths||[];return r.getFromPaths(i)};var e,r}}),Nm=function(){function e(e,t,r){var n=this;this.actions$=e,this.cmsComponentConnector=t,this.routingService=r,this.loadNavigationItems$=this.actions$.pipe(c.ofType("[Cms] Load NavigationEntry items"),i.map((function(e){return e.payload})),i.map((function(e){return{ids:n.getIdListByItemType(e.items),nodeId:e.nodeId}})),i.mergeMap((function(e){if(e.ids.componentIds.length>0)return n.routingService.getRouterState().pipe(i.filter((function(e){return void 0!==e})),i.map((function(e){return e.state.context})),i.take(1),i.mergeMap((function(t){return n.cmsComponentConnector.getList(e.ids.componentIds,t).pipe(i.map((function(t){return new YC({nodeId:e.nodeId,components:t})})),i.catchError((function(t){return o.of(new zC(e.nodeId,an(t)))})))})));if(e.ids.pageIds.length>0);else if(!(e.ids.mediaIds.length>0))return o.of(new zC(e.nodeId,"navigation nodes are empty"))})))}return e.prototype.getIdListByItemType=function(e){var t=[],r=[],n=[];return e.forEach((function(e){"AbstractCMSComponent"===e.superType?r.push(e.id):"AbstractPage"===e.superType?t.push(e.id):"AbstractMedia"===e.superType&&n.push(e.id)})),{pageIds:t,componentIds:r,mediaIds:n}},e.ctorParameters=function(){return[{type:c.Actions},{type:im},{type:$t}]},v([c.Effect()],e.prototype,"loadNavigationItems$",void 0),e=v([t.Injectable()],e)}(),jm=function(){function e(e,t){this.cmsPageAdapter=e,this.cmsStructureConfigService=t}return e.prototype.get=function(e){var t=this;return this.cmsStructureConfigService.shouldIgnoreBackend(e.id).pipe(i.switchMap((function(r){return r?o.of({}):t.cmsPageAdapter.load(e).pipe(i.catchError((function(e){return e instanceof s.HttpErrorResponse&&400===e.status?o.of({}):o.throwError(e)})))})),i.switchMap((function(r){return t.mergeDefaultPageStructure(e,r)})))},e.prototype.mergeDefaultPageStructure=function(e,t){return this.cmsStructureConfigService.mergePageStructure(e.id,t)},e.ctorParameters=function(){return[{type:oi},{type:om}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(oi),t.ɵɵinject(om))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),xm=function(){function e(e,t,r){var n=this;this.actions$=e,this.cmsPageConnector=t,this.routingService=r,this.refreshPage$=this.actions$.pipe(c.ofType(pr,ze,qe),i.switchMap((function(){return n.routingService.getRouterState().pipe(i.filter((function(e){return e&&e.state&&e.state.cmsRequired&&!e.nextState})),i.take(1),i.map((function(e){return e.state.context})),i.mergeMap((function(e){return o.of(new KC(e))})))}))),this.loadPageData$=this.actions$.pipe(c.ofType("[Cms] Load Page Data"),i.map((function(e){return e.payload})),i.groupBy((function(e){return _S(e)})),i.mergeMap((function(e){return e.pipe(i.switchMap((function(e){return n.cmsPageConnector.get(e).pipe(i.mergeMap((function(t){var r=[new WC(t.components.map((function(t){return{component:t,pageContext:e}}))),new JC(e,t.page)],n=t.page.label;return n&&n!==e.id&&r.unshift(new QC({id:n,type:e.type},t.page)),r})),i.catchError((function(t){return o.of(new ZC(e,an(t)))})))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:jm},{type:$t}]},v([c.Effect()],e.prototype,"refreshPage$",void 0),v([c.Effect()],e.prototype,"loadPageData$",void 0),e=v([t.Injectable()],e)}(),$m=[xm,sm,Nm],Gm={component:void 0,pageContext:{}};function Bm(e,t){switch(t.type){case"[Cms] Load Component Fail":return!1;case"[Cms] Get Component from Page":case"[Cms] Load Component Success":return!0}return e}function Hm(e,t){var r,n,o,i;switch(void 0===e&&(e=Gm),t.type){case"[Cms] Load Component":var s=se(t.meta.entityType,Bm),a=_S(t.payload.pageContext,!0);return y(y({},e),{pageContext:y(y({},e.pageContext),(r={},r[a]=s(e.pageContext[a],t),r))});case"[Cms] Load Component Fail":s=se(t.meta.entityType,Bm),a=_S(t.payload.pageContext,!0);return y(y({},e),{pageContext:y(y({},e.pageContext),(n={},n[a]=s(e.pageContext[a],t),n))});case"[Cms] Load Component Success":s=se(t.meta.entityType,Bm),a=_S(t.payload.pageContext,!0);return y(y({},e),{component:t.payload.component,pageContext:y(y({},e.pageContext),(o={},o[a]=s(e.pageContext[a],t),o))});case"[Cms] Get Component from Page":s=se(t.meta.entityType,Bm);if(!Array.isArray(t.payload)){a=_S(t.payload.pageContext,!0);return y(y({},e),{component:t.payload.component,pageContext:y(y({},e.pageContext),(i={},i[a]=s(e.pageContext[a],t),i))})}}return e}function Vm(e,t){switch(void 0===e&&(e=void 0),t.type){case"[Cms] Load NavigationEntry items Success":if(t.payload.components){var r=t.payload.components.reduce((function(e,t){var r;return y(y({},e),((r={})[t.uid+"_AbstractCMSComponent"]=t,r))}),y({}));return y(y({},e),r)}}return e}var Wm={entities:{}};function qm(e,t){var r;switch(void 0===e&&(e=Wm),t.type){case"[Cms] Load Page Data Success":var n=t.payload;return y(y({},e),{entities:y(y({},e.entities),(r={},r[n.pageId]=n,r))})}return e}function zm(e){return function(t,r){if(void 0===t&&(t=void 0),r.meta&&r.meta.entityType===e)switch(r.type){case"[Cms] Load Page Data Success":return r.payload.pageId;case"[Cms] Load Page Data Fail":return;case"[Cms] Set Page Fail Index":return r.payload;case"[Cms] Set Page Success Index":return r.payload.pageId}return t}}function Ym(){return{page:n.combineReducers({pageData:qm,index:n.combineReducers({content:ye(e.PageType.CONTENT_PAGE,zm(e.PageType.CONTENT_PAGE)),product:ye(e.PageType.PRODUCT_PAGE,zm(e.PageType.PRODUCT_PAGE)),category:ye(e.PageType.CATEGORY_PAGE,zm(e.PageType.CATEGORY_PAGE)),catalog:ye(e.PageType.CATALOG_PAGE,zm(e.PageType.CATALOG_PAGE))})}),components:he(GC,Hm),navigation:ye("[Cms] Navigation Entity",Vm)}}var Km=new t.InjectionToken("CmsReducers"),Zm={provide:Km,useFactory:Ym};function Jm(e){return function(t,r){return r.type!==pr&&r.type!==ze&&r.type!==qe||(t=void 0),e(t,r)}}var Qm=[Jm];function Xm(){var t;return{state:{ssrTransfer:{keys:(t={},t.cms=e.StateTransferType.TRANSFER_STATE,t)}}}}var eE=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule,nn,n.StoreModule.forFeature("cms",Km,{metaReducers:Qm}),c.EffectsModule.forFeature($m)],providers:[b(Xm),Zm]})],e)}(),tE=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:[bS,O(qg)]}},e=r=v([t.NgModule({imports:[eE,Yg]})],e)}(),rE=function(){function e(e,t){this.resolvers=e,this.cms=t,this.resolverMethods={title:"resolveTitle",heading:"resolveHeading",description:"resolveDescription",breadcrumbs:"resolveBreadcrumbs",image:"resolveImage",robots:"resolveRobots"},this.resolvers=this.resolvers||[]}return e.prototype.getMeta=function(){var e=this;return this.cms.getCurrentPage().pipe(i.filter(Boolean),i.switchMap((function(t){var r=e.getMetaResolver(t);return r?e.resolve(r):o.of(null)})))},e.prototype.resolve=function(e){var t=this,r=Object.keys(this.resolverMethods).filter((function(r){return e[t.resolverMethods[r]]})).map((function(r){return e[t.resolverMethods[r]]().pipe(i.map((function(e){var t;return(t={})[r]=e,t})))}));return o.combineLatest(r).pipe(i.debounceTime(0),i.map((function(e){return Object.assign.apply(Object,I([{}],e))})))},e.prototype.getMetaResolver=function(e){return Dh(this.resolvers,[e],[e])},e.ctorParameters=function(){return[{type:Array,decorators:[{type:t.Optional},{type:t.Inject,args:[fy]}]},{type:bS}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(fy,8),t.ɵɵinject(bS))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"}),C(0,t.Optional()),C(0,t.Inject(fy))],e)}(),nE=function(){function r(e,t,r,n,o){var i=this;if(this.cmsService=e,this.routingService=t,this.baseSiteService=r,this.zone=n,this.winRef=o,this.isPreviewPage=!1,this._launchedInSmartEdit=!1,this.getCmsTicket(),o.nativeWindow){var s=o.nativeWindow;s.smartedit=s.smartedit||{},s.smartedit.renderComponent=function(e,t,r){return i.renderComponent(e,t,r)},s.smartedit.reprocessPage=this.reprocessPage}}return Object.defineProperty(r.prototype,"cmsTicketId",{get:function(){return this._cmsTicketId},enumerable:!0,configurable:!0}),r.prototype.getCmsTicket=function(){var e=this;o.combineLatest([this.cmsService.getCurrentPage(),this.routingService.getRouterState()]).pipe(i.takeWhile((function(e){return void 0===E(e,1)[0]})),i.filter((function(t){var r=E(t,2)[1];return!(!r.nextState||e._cmsTicketId||(e._cmsTicketId=r.nextState.queryParams.cmsTicketId,!e._cmsTicketId))})),i.take(1)).subscribe((function(){e._launchedInSmartEdit=!0,e.getDefaultPreviewCode()}))},r.prototype.getDefaultPreviewCode=function(){var e=this;this.baseSiteService.getBaseSiteData().pipe(i.filter((function(e){return 0!==Object.keys(e).length})),i.take(1)).subscribe((function(t){e.defaultPreviewCategoryCode=t.defaultPreviewCategoryCode,e.defaultPreviewProductCode=t.defaultPreviewProductCode,e.addPageContract()}))},r.prototype.addPageContract=function(){var e=this;this.cmsService.getCurrentPage().subscribe((function(t){if(t&&e._cmsTicketId){e._currentPageId=t.pageId,e.goToPreviewPage(t);var r=[];if(Array.from(e.winRef.document.body.classList).forEach((function(e){return r.push(e)})),r.forEach((function(t){return e.winRef.document.body.classList.remove(t)})),t.properties&&t.properties.smartedit)t.properties.smartedit.classes.split(" ").forEach((function(t){e.winRef.document.body.classList.add(t)}))}}))},r.prototype.goToPreviewPage=function(t){this.isPreviewPage||(this.isPreviewPage=!0,t.type===e.PageType.PRODUCT_PAGE&&this.defaultPreviewProductCode?this.routingService.go({cxRoute:"product",params:{code:this.defaultPreviewProductCode,name:""}}):t.type===e.PageType.CATEGORY_PAGE&&this.defaultPreviewCategoryCode&&this.routingService.go({cxRoute:"category",params:{code:this.defaultPreviewCategoryCode}}))},r.prototype.renderComponent=function(e,t,r){var n=this;return e&&this.zone.run((function(){r?t&&n.cmsService.refreshComponent(e):n._currentPageId?n.cmsService.refreshPageById(n._currentPageId):n.cmsService.refreshLatestPage()})),!0},r.prototype.reprocessPage=function(){},r.prototype.isLaunchedInSmartEdit=function(){return this._launchedInSmartEdit},r.ctorParameters=function(){return[{type:bS},{type:$t},{type:Nr},{type:t.NgZone},{type:St}]},r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(bS),t.ɵɵinject($t),t.ɵɵinject(Nr),t.ɵɵinject(t.NgZone),t.ɵɵinject(St))},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root"})],r)}(),oE=function(){function e(e){this.smartEditService=e}return e.prototype.addDynamicAttributes=function(e,t,r){var n,o,i=(null===(n=r.componentData)||void 0===n?void 0:n.properties)||(null===(o=r.slotData)||void 0===o?void 0:o.properties);i&&this.smartEditService.isLaunchedInSmartEdit()&&Object.keys(i).forEach((function(r){var n="data-"+r+"-",o=i[r];Object.keys(o).forEach((function(r){var i=o[r];"classes"===r?i.split(" ").forEach((function(t){e.classList.add(t)})):t.setAttribute(e,n+r.split(/(?=[A-Z])/).join("-").toLowerCase(),i)}))}))},e.ctorParameters=function(){return[{type:nE}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(nE))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),iE=function(){function e(){}return e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root",useExisting:A})],e)}();function sE(e){return"object"==typeof e&&e.features}function aE(e,t){if("*"===e)return!0;for(var r=e.split("."),n=t.split("."),o=0;o<n.length;o++){var i=Number(n[o]),s=Number(r[o])||0;if(i!==s)return s>i}return!0}function cE(e,t){if(sE(e))return"!"===t[0]?!aE(e.features.level,t.substr(1,t.length)):aE(e.features.level,t)}function uE(e,t){if(sE(e)){var r="!"===t[0]?e.features[t.substr(1,t.length)]:e.features[t],n="string"==typeof r?cE(e,r):r;return"!"===t[0]?!n:n}}var pE=function(){function e(e){this.config=e}return e.prototype.isLevel=function(e){return cE(this.config,e)},e.prototype.isEnabled=function(e){return uE(this.config,e)},e.ctorParameters=function(){return[{type:iE}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(iE))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),dE=function(){function e(e,t,r){this.templateRef=e,this.viewContainer=t,this.featureConfig=r,this.hasView=!1}return Object.defineProperty(e.prototype,"cxFeatureLevel",{set:function(e){this.featureConfig.isLevel(e.toString())&&!this.hasView?(this.viewContainer.createEmbeddedView(this.templateRef),this.hasView=!0):!this.featureConfig.isLevel(e.toString())&&this.hasView&&(this.viewContainer.clear(),this.hasView=!1)},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef},{type:pE}]},v([t.Input()],e.prototype,"cxFeatureLevel",null),e=v([t.Directive({selector:"[cxFeatureLevel]"})],e)}(),lE=function(){function e(e,t,r){this.templateRef=e,this.viewContainer=t,this.featureConfig=r,this.hasView=!1}return Object.defineProperty(e.prototype,"cxFeature",{set:function(e){this.featureConfig.isEnabled(e)&&!this.hasView?(this.viewContainer.createEmbeddedView(this.templateRef),this.hasView=!0):!this.featureConfig.isEnabled(e)&&this.hasView&&(this.viewContainer.clear(),this.hasView=!1)},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:t.TemplateRef},{type:t.ViewContainerRef},{type:pE}]},v([t.Input()],e.prototype,"cxFeature",null),e=v([t.Directive({selector:"[cxFeature]"})],e)}(),fE=function(){function e(){}var r;return r=e,e.forRoot=function(e){return{ngModule:r,providers:[O({features:{level:e||"*"}})]}},e=r=v([t.NgModule({declarations:[dE,lE],exports:[dE,lE]})],e)}(),hE=function(e){function n(t){var r=e.call(this,null)||this;return r.language=t,r}return h(n,e),n.prototype.transform=function(t,r,n){return e.prototype.transform.call(this,t,r,n,this.getLang())},n.prototype.getLang=function(){var e=this.getActiveLang();try{return r.getLocaleId(e),e}catch(t){return this.reportMissingLocaleData(e),"en"}},n.prototype.getActiveLang=function(){var e;return this.language.getActive().subscribe((function(t){return e=t})).unsubscribe(),e},n.prototype.reportMissingLocaleData=function(e){t.isDevMode()&&console.warn("cxDate pipe: No locale data registered for '"+e+"' (see https://angular.io/api/common/registerLocaleData).")},n.ctorParameters=function(){return[{type:Bi}]},n=v([t.Pipe({name:"cxDate"})],n)}(r.DatePipe),yE=function(){function e(e,t){this.service=e,this.cd=t}return e.prototype.transform=function(e,t){if(void 0===t&&(t={}),e.raw)return e.raw;var r="string"==typeof e?e:e.key;return"string"!=typeof e&&(t=y(y({},t),e.params)),this.translate(r,t),this.translatedValue},e.prototype.translate=function(e,t){var r=this;e===this.lastKey&&function(e,t){if(e===t)return!0;if(!e||!t)return!1;var r=Object.keys(e),n=Object.keys(t),o=r.length;if(o!==n.length)return!1;for(var i=0;i<o;i++){var s=r[i];if(e[s]!==t[s])return!1}return!0}(t,this.lastOptions)||(this.lastKey=e,this.lastOptions=t,this.sub&&this.sub.unsubscribe(),this.sub=this.service.translate(e,t,!0).subscribe((function(e){return r.markForCheck(e)})))},e.prototype.markForCheck=function(e){this.translatedValue=e,this.cd.markForCheck()},e.prototype.ngOnDestroy=function(){this.sub&&this.sub.unsubscribe()},e.ctorParameters=function(){return[{type:WS},{type:t.ChangeDetectorRef}]},e=v([t.Pipe({name:"cxTranslate",pure:!1})],e)}(),vE=function(){function e(){}return e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root",useExisting:A})],e)}(),CE=function(){function e(e){var r=this;this.config=e,this.duplicates={},this.chunks={},this.KEY_SEPARATOR=".";var n=e.i18n&&e.i18n.chunks||{};Object.keys(n).forEach((function(e){n[e].forEach((function(t){r.chunks.hasOwnProperty(t)?(r.duplicates[t]||(r.duplicates[t]=[r.chunks[t]]),r.duplicates[t].push(e)):r.chunks[t]=e}))})),Object.keys(this.duplicates).length>0&&t.isDevMode()&&this.warnDuplicates(this.duplicates)}return e.prototype.getChunkNameForKey=function(e){var t=(e||"").split(this.KEY_SEPARATOR)[0],r=this.chunks&&this.chunks[t];return r||t},e.prototype.warnDuplicates=function(e){var t=this,r=[];Object.keys(e).forEach((function(n){r.push("* '"+n+"' found in chunks: "+e[n].join(", ")+". Used '"+t.chunks[n]+"."+n+"'.")})),console.warn("Duplicated keys has been found in the config of i18n chunks:\n"+r.join("\n"))},e.ctorParameters=function(){return[{type:vE}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(vE))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),SE={i18n:{fallbackLang:!1,debug:!1}};function gE(e,t,r,n){return function(){return e.getStableConfig("i18n").then((function(e){var o={ns:[],fallbackLng:e.i18n.fallbackLang,debug:e.i18n.debug,interpolation:{escapeValue:!1}};if(e.i18n.backend){d.use(l);var i={loadPath:function(e,t){if(!e)return;if(t&&!e.match(/^http(s)?:\/\//)){return e.startsWith("/")&&(e=e.slice(1)),e.startsWith("./")&&(e=e.slice(2)),t+"/"+e}return e}(e.i18n.backend.loadPath,n),ajax:mE(r)};o=y(y({},o),{backend:i})}return d.init(o,(function(){!function(e){void 0===e&&(e={});Object.keys(e).forEach((function(t){Object.keys(e[t]).forEach((function(r){d.addResourceBundle(t,r,e[t][r],!0,!0)}))}))}(e.i18n.resources),t.getActive().subscribe((function(e){return d.changeLanguage(e)}))}))}))}}function mE(e){return function(t,r,n,o){e.get(t,{responseType:"text"}).subscribe((function(e){return n(e,{status:200})}),(function(e){return n(null,{status:e.status})}))}}var EE=gE,IE=[{provide:t.APP_INITIALIZER,useFactory:EE,deps:[Yl,Bi,s.HttpClient,[new t.Optional,Vs]],multi:!0}],RE=function(){function e(e,t){this.config=e,this.translationChunk=t,this.NON_BREAKING_SPACE=String.fromCharCode(160),this.NAMESPACE_SEPARATOR=":"}return e.prototype.translate=function(e,t,r){var n=this;void 0===t&&(t={}),void 0===r&&(r=!1);var i=this.translationChunk.getChunkNameForKey(e),s=this.getNamespacedKey(e,i);return new o.Observable((function(o){var a=function(){d.isInitialized&&(d.exists(s,t)?o.next(d.t(s,t)):(r&&o.next(n.NON_BREAKING_SPACE),d.loadNamespaces(i,(function(){d.exists(s,t)?o.next(d.t(s,t)):(n.reportMissingKey(e,i),o.next(n.getFallbackValue(s)))}))))};return a(),d.on("languageChanged",a),function(){return d.off("languageChanged",a)}}))},e.prototype.loadChunks=function(e){return d.loadNamespaces(e)},e.prototype.getFallbackValue=function(e){return t.isDevMode()?"["+e+"]":this.NON_BREAKING_SPACE},e.prototype.reportMissingKey=function(e,r){t.isDevMode()&&console.warn("Translation key missing '"+e+"' in the chunk '"+r+"'")},e.prototype.getNamespacedKey=function(e,t){return t+this.NAMESPACE_SEPARATOR+e},e.ctorParameters=function(){return[{type:vE},{type:CE}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(vE),t.ɵɵinject(CE))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),TE=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:I([O(SE),{provide:WS,useExisting:RE}],IE)}},e=r=v([t.NgModule({declarations:[yE,hE],exports:[yE,hE]})],e)}();function AE(e,t){void 0===t&&(t={});var r=Object.keys(t).sort().map((function(e){return e+":"+t[e]})).join(" ");return r?e+" "+r:e}var UE=function(){function e(){}return e.prototype.transform=function(e,t){if(void 0===t&&(t={}),e.raw)return e.raw;var r="string"==typeof e?e:e.key;return"string"!=typeof e&&(t=y(y({},t),e.params)),AE(r,t)},e=v([t.Pipe({name:"cxTranslate"})],e)}(),PE=function(){function e(){}return e.prototype.translate=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r=!1),new o.Observable((function(r){var n=AE(e,t);r.next(n),r.complete()}))},e.prototype.loadChunks=function(e){return Promise.resolve()},e=v([t.Injectable()],e)}(),LE=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return h(r,e),r.prototype.transform=function(t,r,n){return e.prototype.transform.call(this,t,r,n,"en")},r=v([t.Pipe({name:"cxDate"})],r)}(r.DatePipe),_E=function(){function e(){}return e=v([t.NgModule({declarations:[UE,LE],exports:[UE,LE],providers:[{provide:WS,useClass:PE}]})],e)}(),OE=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return h(r,e),r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root",useExisting:A})],r)}(xr),bE="[Kyma Auth] Open ID Token Data",wE=function(e){function t(t){var r=e.call(this,bE)||this;return r.payload=t,r.type="[Kyma] Load Open ID Token",r}return h(t,e),t}(z),DE=function(e){function t(t){var r=e.call(this,bE,t)||this;return r.payload=t,r.type="[Kyma] Load Open ID Token Fail",r}return h(t,e),t}(Y),ME=function(e){function t(t){var r=e.call(this,bE)||this;return r.payload=t,r.type="[Kyma] Load Open ID Token Success",r}return h(t,e),t}(K),FE=Object.freeze({__proto__:null,LOAD_OPEN_ID_TOKEN:"[Kyma] Load Open ID Token",LOAD_OPEN_ID_TOKEN_FAIL:"[Kyma] Load Open ID Token Fail",LOAD_OPEN_ID_TOKEN_SUCCESS:"[Kyma] Load Open ID Token Success",LoadOpenIdToken:wE,LoadOpenIdTokenFail:DE,LoadOpenIdTokenSuccess:ME}),kE=n.createFeatureSelector("kyma"),NE=function(e){return e.openIdToken},jE=n.createSelector(kE,NE),xE=n.createSelector(jE,ae),$E=n.createSelector(jE,ce),GE=n.createSelector(jE,pe),BE=n.createSelector(jE,ue),HE=Object.freeze({__proto__:null,getKymaState:kE,getOpenIdTokenState:jE,getOpenIdTokenValue:xE,getOpenIdTokenLoading:$E,getOpenIdTokenSuccess:GE,getOpenIdTokenError:BE,"ɵ0":NE}),VE=function(){function e(e){this.store=e}return e.prototype.authorizeOpenId=function(e,t){this.store.dispatch(new wE({username:e,password:t}))},e.prototype.getOpenIdToken=function(){return this.store.pipe(n.select(xE))},e.ctorParameters=function(){return[{type:n.Store}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),WE={authentication:{kyma_client_id:"client4kyma",kyma_client_secret:"secret"}},qE=function(){function e(e,t){this.config=e,this.http=t}return e.prototype.loadOpenIdAuthenticationToken=function(e,t){var r=this.getOAuthEndpoint(),n=(new s.HttpParams).set("client_id",encodeURIComponent(this.config.authentication.kyma_client_id)).set("client_secret",encodeURIComponent(this.config.authentication.kyma_client_secret)).set("grant_type","password").set("username",e).set("password",t).set("scope","openid"),a=new s.HttpHeaders({"Content-Type":"application/x-www-form-urlencoded"});return this.http.post(r,n,{headers:a}).pipe(i.catchError((function(e){return o.throwError(e)})))},e.prototype.getOAuthEndpoint=function(){return(this.config.backend.occ.baseUrl||"")+"/authorizationserver/oauth/token"},e.ctorParameters=function(){return[{type:OE},{type:s.HttpClient}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(OE),t.ɵɵinject(s.HttpClient))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),zE=function(){function e(e,t){var r=this;this.actions$=e,this.openIdTokenService=t,this.triggerOpenIdTokenLoading$=this.actions$.pipe(c.ofType(Je),i.withLatestFrom(this.actions$.pipe(c.ofType(Ze))),i.map((function(e){var t=E(e,2)[1];return new wE({username:t.payload.userId,password:t.payload.password})}))),this.loadOpenIdToken$=this.actions$.pipe(c.ofType("[Kyma] Load Open ID Token"),i.map((function(e){return e.payload})),i.exhaustMap((function(e){return r.openIdTokenService.loadOpenIdAuthenticationToken(e.username,e.password).pipe(i.map((function(e){return new ME(e)})),i.catchError((function(e){return o.of(new DE(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:qE}]},v([c.Effect()],e.prototype,"triggerOpenIdTokenLoading$",void 0),v([c.Effect()],e.prototype,"loadOpenIdToken$",void 0),e=v([t.Injectable()],e)}(),YE=[zE];function KE(){return{openIdToken:se(bE)}}var ZE=new t.InjectionToken("KymaReducers"),JE={provide:ZE,useFactory:KE};function QE(e){return function(t,r){return r.type===ze&&(t=y(y({},t),{openIdToken:void 0})),e(t,r)}}var XE=[QE];function eI(){return{state:{storageSync:{keys:{"kyma.openIdToken.value":e.StorageSyncType.LOCAL_STORAGE}}}}}var tI=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule,nn,n.StoreModule.forFeature("kyma",ZE,{metaReducers:XE}),c.EffectsModule.forFeature(YE)],providers:[b(eI),JE]})],e)}(),rI=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule,tI],providers:[O(WE)]})],e)}(),nI={personalization:{enabled:!1,httpHeaderName:{id:"Occ-Personalization-Id",timestamp:"Occ-Personalization-Time"},context:{slotPosition:"PlaceholderContentSlot",componentId:"PersonalizationScriptComponent"}}},oI=function(){function e(){}return e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root",useExisting:A})],e)}(),iI=function(){function e(e,t,n,o){this.config=e,this.occEndpoints=t,this.winRef=n,this.platform=o,this.enabled=!1,r.isPlatformBrowser(this.platform)&&(this.enabled=this.winRef.localStorage&&this.config.personalization.enabled||!1,this.enabled?(this.requestHeader=this.config.personalization.httpHeaderName.id.toLowerCase(),this.personalizationId=this.winRef.localStorage.getItem("personalization-id")):this.winRef.localStorage.getItem("personalization-id")&&this.winRef.localStorage.removeItem("personalization-id"))}return e.prototype.intercept=function(e,t){var r,n=this;return this.enabled?(this.personalizationId&&e.url.includes(this.occEndpoints.getBaseEndpoint())&&(e=e.clone({setHeaders:(r={},r[this.requestHeader]=this.personalizationId,r)})),t.handle(e).pipe(i.tap((function(e){if(e instanceof s.HttpResponse&&e.headers.keys().includes(n.requestHeader)){var t=e.headers.get(n.requestHeader);n.personalizationId!==t&&(n.personalizationId=t,n.winRef.localStorage.setItem("personalization-id",n.personalizationId))}})))):t.handle(e)},e.ctorParameters=function(){return[{type:oI},{type:$r},{type:St},{type:void 0,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(oI),t.ɵɵinject($r),t.ɵɵinject(St),t.ɵɵinject(t.PLATFORM_ID))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"}),C(3,t.Inject(t.PLATFORM_ID))],e)}(),sI=function(){function e(e,t,n,o){this.config=e,this.occEndpoints=t,this.winRef=n,this.platform=o,this.enabled=!1,r.isPlatformBrowser(this.platform)&&(this.enabled=this.winRef.localStorage&&this.config.personalization.enabled||!1,this.enabled?(this.requestHeader=this.config.personalization.httpHeaderName.timestamp.toLowerCase(),this.timestamp=this.winRef.localStorage.getItem("personalization-time")):this.winRef.localStorage.getItem("personalization-time")&&this.winRef.localStorage.removeItem("personalization-time"))}return e.prototype.intercept=function(e,t){var r,n=this;return this.enabled?(this.timestamp&&e.url.includes(this.occEndpoints.getBaseEndpoint())&&(e=e.clone({setHeaders:(r={},r[this.requestHeader]=this.timestamp,r)})),t.handle(e).pipe(i.tap((function(e){if(e instanceof s.HttpResponse&&e.headers.keys().includes(n.requestHeader)){var t=e.headers.get(n.requestHeader);n.timestamp!==t&&(n.timestamp=t,n.winRef.localStorage.setItem("personalization-time",n.timestamp))}})))):t.handle(e)},e.ctorParameters=function(){return[{type:oI},{type:$r},{type:St},{type:void 0,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(oI),t.ɵɵinject($r),t.ɵɵinject(St),t.ɵɵinject(t.PLATFORM_ID))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"}),C(3,t.Inject(t.PLATFORM_ID))],e)}(),aI=[{provide:s.HTTP_INTERCEPTORS,useExisting:iI,multi:!0},{provide:s.HTTP_INTERCEPTORS,useExisting:sI,multi:!0}],cI=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:I([O(nI)],aI)}},e=r=v([t.NgModule({})],e)}(),uI=function(){function e(e,t){this.config=e,this.cmsService=t}return e.prototype.getPersonalizationContext=function(){var e=this;return this.cmsService.getCurrentPage().pipe(i.filter(Boolean),i.map((function(t){return t.slots[e.config.personalization.context.slotPosition]})),i.filter(Boolean),i.map((function(t){return t.components.find((function(t){return t.uid===e.config.personalization.context.componentId}))})),i.filter(Boolean),i.map((function(t){return e.buildPersonalizationContext(t.properties.script.data)})))},e.prototype.buildPersonalizationContext=function(e){var t=JSON.parse(atob(e));t.actions.forEach((function(e){Object.keys(e).forEach((function(t){e[t]=atob(e[t])}))}));for(var r=0;r<t.segments.length;r++)t.segments[r]=atob(t.segments[r]);return t},e.ctorParameters=function(){return[{type:oI},{type:bS}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(oI),t.ɵɵinject(bS))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}();function pI(){return ye("process")}var dI,lI=new t.InjectionToken("ProcessReducers"),fI={provide:lI,useFactory:pI},hI=function(){function e(){}return e=v([t.NgModule({imports:[nn,n.StoreModule.forFeature("process",lI)],providers:[fI]})],e)}(),yI=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:[]}},e=r=v([t.NgModule({imports:[hI]})],e)}(),vI=function(){function e(e){this.adapter=e}return e.prototype.get=function(e,t){return void 0===t&&(t=""),this.adapter.load(e,t)},e.prototype.getMany=function(e){var t=this;return this.adapter.loadMany?this.adapter.loadMany(e):e.map((function(e){return y(y({},e),{data$:t.adapter.load(e.code,e.scope)})}))},e.ctorParameters=function(){return[{type:Li}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Li))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),CI=function(){function e(e){this.adapter=e}return e.prototype.get=function(e,t,r){return this.adapter.load(e,t,r)},e.ctorParameters=function(){return[{type:_i}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(_i))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),SI=function(){function e(e){this.adapter=e}return e.prototype.get=function(e,t){return this.adapter.load(e,t)},e.prototype.add=function(e,t){return this.adapter.post(e,t)},e.ctorParameters=function(){return[{type:Oi}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Oi))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),gI=function(){function e(e){this.adapter=e}return e.prototype.search=function(e,t){return this.adapter.search(e,t)},e.prototype.getSuggestions=function(e,t){return this.adapter.loadSuggestions(e,t)},e.ctorParameters=function(){return[{type:bi}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(bi))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),mI=function(e){this.payload=e,this.type="[Product] Load Product References Data"},EI=function(e){this.payload=e,this.type="[Product] Load Product References Data Fail"},II=function(e){this.payload=e,this.type="[Product] Load Product References Data Success"},RI=function(){this.type="[Product] Clean Product References"},TI=function(e){this.payload=e,this.type="[Product] Load Product Reviews Data"},AI=function(e){this.payload=e,this.type="[Product] Load Product Reviews Data Fail"},UI=function(e){this.payload=e,this.type="[Product] Load Product Reviews Data Success"},PI=function(e){this.payload=e,this.type="[Product] Post Product Review"},LI=function(e){this.payload=e,this.type="[Product] Post Product Review Fail"},_I=function(e){this.payload=e,this.type="[Product] Post Product Review Success"},OI=function(e,t){this.payload=e,this.auxiliary=t,this.type="[Product] Search Products"},bI=function(e,t){this.payload=e,this.auxiliary=t,this.type="[Product] Search Products Fail"},wI=function(e,t){this.payload=e,this.auxiliary=t,this.type="[Product] Search Products Success"},DI=function(e){this.payload=e,this.type="[Product] Get Product Suggestions"},MI=function(e){this.payload=e,this.type="[Product] Get Product Suggestions Success"},FI=function(e){this.payload=e,this.type="[Product] Get Product Suggestions Fail"},kI=function(e){void 0===e&&(e={clearPageResults:!1,clearSearchboxResults:!1}),this.payload=e,this.type="[Product] Clear Product Search Result"};!function(e){function t(e,t,r){return y(y({},J(e,t)),{scope:r})}function r(e,t,r,n){return y(y({},Q(e,t,n)),{scope:r})}function n(e,t,r){return y(y({},X(e,t)),{scope:r})}function o(e,t,r){return y(y({},ee(e,t)),{scope:r})}e.entityScopedLoadMeta=t,e.entityScopedFailMeta=r,e.entityScopedSuccessMeta=n,e.entityScopedResetMeta=o;var i=function(e,r,n){this.type="[ENTITY] LOAD",this.meta=t(e,r,n)};e.EntityScopedLoadAction=i;var s=function(e,t,n,o){this.type="[ENTITY] LOAD FAIL",this.meta=r(e,t,n,o)};e.EntityScopedFailAction=s;var a=function(e,t,r,o){this.payload=o,this.type="[ENTITY] LOAD SUCCESS",this.meta=n(e,t,r)};e.EntityScopedSuccessAction=a;var c=function(e,t,r){this.type="[ENTITY] RESET",this.meta=o(e,t,r)};e.EntityScopedResetAction=c}(dI||(dI={}));var NI="[Product] Load Product Data",jI=function(e){function t(t,r){void 0===r&&(r="");var n=e.call(this,"[Product] Detail Entity",t,r)||this;return n.payload=t,n.type=NI,n}return h(t,e),t}(dI.EntityScopedLoadAction),xI=function(e){function t(t,r,n){void 0===n&&(n="");var o=e.call(this,"[Product] Detail Entity",t,n,r)||this;return o.payload=r,o.type="[Product] Load Product Data Fail",o}return h(t,e),t}(dI.EntityScopedFailAction),$I=function(e){function t(t,r){void 0===r&&(r="");var n=e.call(this,"[Product] Detail Entity",t.code,r)||this;return n.payload=t,n.type="[Product] Load Product Data Success",n}return h(t,e),t}(dI.EntityScopedSuccessAction),GI=Object.freeze({__proto__:null,LOAD_PRODUCT_REFERENCES:"[Product] Load Product References Data",LOAD_PRODUCT_REFERENCES_FAIL:"[Product] Load Product References Data Fail",LOAD_PRODUCT_REFERENCES_SUCCESS:"[Product] Load Product References Data Success",CLEAN_PRODUCT_REFERENCES:"[Product] Clean Product References",LoadProductReferences:mI,LoadProductReferencesFail:EI,LoadProductReferencesSuccess:II,CleanProductReferences:RI,LOAD_PRODUCT_REVIEWS:"[Product] Load Product Reviews Data",LOAD_PRODUCT_REVIEWS_FAIL:"[Product] Load Product Reviews Data Fail",LOAD_PRODUCT_REVIEWS_SUCCESS:"[Product] Load Product Reviews Data Success",POST_PRODUCT_REVIEW:"[Product] Post Product Review",POST_PRODUCT_REVIEW_FAIL:"[Product] Post Product Review Fail",POST_PRODUCT_REVIEW_SUCCESS:"[Product] Post Product Review Success",LoadProductReviews:TI,LoadProductReviewsFail:AI,LoadProductReviewsSuccess:UI,PostProductReview:PI,PostProductReviewFail:LI,PostProductReviewSuccess:_I,SEARCH_PRODUCTS:"[Product] Search Products",SEARCH_PRODUCTS_FAIL:"[Product] Search Products Fail",SEARCH_PRODUCTS_SUCCESS:"[Product] Search Products Success",GET_PRODUCT_SUGGESTIONS:"[Product] Get Product Suggestions",GET_PRODUCT_SUGGESTIONS_SUCCESS:"[Product] Get Product Suggestions Success",GET_PRODUCT_SUGGESTIONS_FAIL:"[Product] Get Product Suggestions Fail",CLEAR_PRODUCT_SEARCH_RESULT:"[Product] Clear Product Search Result",SearchProducts:OI,SearchProductsFail:bI,SearchProductsSuccess:wI,GetProductSuggestions:DI,GetProductSuggestionsSuccess:MI,GetProductSuggestionsFail:FI,ClearProductSearchResult:kI,LOAD_PRODUCT:NI,LOAD_PRODUCT_FAIL:"[Product] Load Product Data Fail",LOAD_PRODUCT_SUCCESS:"[Product] Load Product Data Success",LoadProduct:jI,LoadProductFail:xI,LoadProductSuccess:$I}),BI=n.createFeatureSelector("product"),HI=function(e){return e.references},VI=n.createSelector(BI,HI),WI=function(e,t){return n.createSelector(VI,(function(r){if(r.productCode===e)return r.list?t?r.list.filter((function(e){return e.referenceType===t})):r.list:[]}))},qI=n.createSelector(BI,(function(e){return e.reviews})),zI=function(e){return n.createSelector(qI,(function(t){if(t.productCode===e)return t.list}))},YI={results:{},suggestions:[],auxResults:{}};function KI(e,t){switch(void 0===e&&(e=YI),t.type){case"[Product] Search Products Success":var r=t.payload,n=t.auxiliary?{auxResults:r}:{results:r};return y(y({},e),n);case"[Product] Get Product Suggestions Success":var o=t.payload;return y(y({},e),{suggestions:o});case"[Product] Clear Product Search Result":return y(y({},e),{results:t.payload.clearPageResults?{}:e.results,suggestions:t.payload.clearSearchboxResults?[]:e.suggestions,auxResults:t.payload.clearSearchboxResults?{}:e.auxResults})}return e}var ZI=n.createSelector(BI,(function(e){return e.search})),JI=n.createSelector(ZI,(function(e){return e.results})),QI=n.createSelector(ZI,(function(e){return e.auxResults})),XI=n.createSelector(ZI,(function(e){return e.suggestions})),eR=n.createSelector(BI,(function(e){return e.details})),tR=function(e,t){return void 0===t&&(t=""),n.createSelector(eR,(function(r){return de(r,e)[t]||ie}))},rR=function(e,t){return void 0===t&&(t=""),n.createSelector(tR(e,t),(function(e){return ae(e)}))},nR=function(e,t){return void 0===t&&(t=""),n.createSelector(tR(e,t),(function(e){return ce(e)}))},oR=function(e,t){return void 0===t&&(t=""),n.createSelector(tR(e,t),(function(e){return pe(e)}))},iR=function(e,t){return void 0===t&&(t=""),n.createSelector(tR(e,t),(function(e){return ue(e)}))},sR=function(e){return Object.keys(e.entities)},aR=n.createSelector(eR,sR),cR=Object.freeze({__proto__:null,getProductsState:BI,getProductReferencesState:VI,getSelectedProductReferencesFactory:WI,"ɵ0":HI,getProductReviewsState:qI,getSelectedProductReviewsFactory:zI,getProductsSearchState:ZI,getSearchResults:JI,getAuxSearchResults:QI,getProductSuggestions:XI,getProductState:eR,getSelectedProductStateFactory:tR,getSelectedProductFactory:rR,getSelectedProductLoadingFactory:nR,getSelectedProductSuccessFactory:oR,getSelectedProductErrorFactory:iR,getAllProductCodes:aR,"ɵ1":sR}),uR=function(){function e(e){this.store=e}return e.prototype.get=function(e,t,r){var o=this;return this.store.pipe(n.select(WI(e,t)),i.tap((function(n){void 0===n&&void 0!==e&&o.store.dispatch(new mI({productCode:e,referenceType:t,pageSize:r}))})))},e.prototype.cleanReferences=function(){this.store.dispatch(new RI)},e.ctorParameters=function(){return[{type:n.Store}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),pR=function(){function e(e){this.store=e}return e.prototype.getByProductCode=function(e){var t=this;return this.store.pipe(n.select(zI(e)),i.tap((function(r){void 0===r&&void 0!==e&&t.store.dispatch(new TI(e))})))},e.prototype.add=function(e,t){this.store.dispatch(new PI({productCode:e,review:t}))},e.ctorParameters=function(){return[{type:n.Store}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),dR=function(){function e(e){this.store=e}return e.prototype.search=function(e,t){this.store.dispatch(new OI({queryText:e,searchConfig:t}))},e.prototype.getResults=function(){return this.store.pipe(n.select(JI))},e.prototype.clearResults=function(){this.store.dispatch(new kI({clearPageResults:!0}))},e.ctorParameters=function(){return[{type:n.Store}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),lR=function(){function e(e,t,r,n){this.store=e,this.loadingScopes=t,this.actions$=r,this.platformId=n,this.products={}}return e.prototype.get=function(e,t){return t=this.loadingScopes.expand("product",t),this.initProductScopes(e,t),this.products[e][this.getScopesIndex(t)]},e.prototype.initProductScopes=function(e,t){var r,n,s=this;this.products[e]||(this.products[e]={});try{for(var a=m(t),c=a.next();!c.done;c=a.next()){var u=c.value;this.products[e][u]||(this.products[e][u]=this.getProductForScope(e,u))}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}t.length>1&&(this.products[e][this.getScopesIndex(t)]=o.combineLatest(t.map((function(t){return s.products[e][t]}))).pipe(i.auditTime(0),i.map((function(e){return e.every(Boolean)?T.apply(void 0,I([{}],e)):void 0})),i.distinctUntilChanged()))},e.prototype.getScopesIndex=function(e){return e.join("ɵ")},e.prototype.getProductForScope=function(e,t){var r=this,s=this.store.pipe(n.select(tR(e,t)),i.map((function(e){return!e.loading&&!e.success&&!e.error})),i.distinctUntilChanged(),i.filter((function(e){return e}))),a=this.store.pipe(n.select(nR(e,t))),c=o.merge.apply(void 0,I([s],this.getProductReloadTriggers(e,t))).pipe(i.debounceTime(0),i.withLatestFrom(a),i.tap((function(n){E(n,2)[1]||r.store.dispatch(new jI(e,t))}))),u=this.store.pipe(n.select(rR(e,t)));return o.using((function(){return c.subscribe()}),(function(){return u})).pipe(i.shareReplay({bufferSize:1,refCount:!0}))},e.prototype.getProductReloadTriggers=function(e,t){var n=[],o=this.loadingScopes.getMaxAge("product",t);if(o&&r.isPlatformBrowser(this.platformId)){var s=this.actions$.pipe(i.filter((function(r){return("[Product] Load Product Data Success"===r.type||"[Product] Load Product Data Fail"===r.type)&&r.meta.entityId===e&&r.meta.scope===t}))),a=this.actions$.pipe(c.ofType(NI),i.filter((function(r){return r.payload===e&&r.meta.scope===t})));n.push(this.getMaxAgeTrigger(a,s,o))}return n},e.prototype.getMaxAgeTrigger=function(e,t,r,n){var s=0,a=function(){return n?n.now():Date.now()},c=t.pipe(i.tap((function(){return s=a()})));return o.defer((function(){var t=a()-s,u=c.pipe(i.delay(r,n),i.mapTo(!0),Tv(e));return t>r?o.merge(o.of(!0),u):0===t?u:o.merge(o.of(!0).pipe(i.delay(r-t,n)),u)}))},e.ctorParameters=function(){return[{type:n.Store},{type:gc},{type:c.Actions},{type:void 0,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(gc),t.ɵɵinject(c.Actions),t.ɵɵinject(t.PLATFORM_ID))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"}),C(3,t.Inject(t.PLATFORM_ID))],e)}(),fR=function(){function e(e,t){this.store=e,this.productLoading=t}return e.prototype.get=function(e,t){return void 0===t&&(t="default"),e?this.productLoading.get(e,[].concat(t)):o.of(void 0)},e.prototype.isLoading=function(e,t){return void 0===t&&(t=""),this.store.pipe(n.select(nR(e,t)))},e.prototype.isSuccess=function(e,t){return void 0===t&&(t=""),this.store.pipe(n.select(oR(e,t)))},e.prototype.hasError=function(e,t){return void 0===t&&(t=""),this.store.pipe(n.select(iR(e,t)))},e.prototype.reload=function(e,t){void 0===t&&(t=""),this.store.dispatch(new jI(e,t))},e.ctorParameters=function(){return[{type:n.Store},{type:lR}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(lR))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),hR=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return h(r,e),r.prototype.search=function(e,t){this.store.dispatch(new OI({queryText:e,searchConfig:t},!0))},r.prototype.getResults=function(){return this.store.pipe(n.select(QI))},r.prototype.clearResults=function(){this.store.dispatch(new kI({clearSearchboxResults:!0}))},r.prototype.getSuggestionResults=function(){return this.store.pipe(n.select(XI))},r.prototype.searchSuggestions=function(e,t){this.store.dispatch(new DI({term:e,searchConfig:t}))},r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(n.Store))},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root"})],r)}(dR),yR=function(r){function n(t,n,s){var a=r.call(this)||this;return a.productSearchService=t,a.cms=n,a.translation=s,a.searchPage$=a.cms.getCurrentPage().pipe(i.filter(Boolean),i.switchMap((function(e){return a.hasProductListComponent(e)?a.productSearchService.getResults().pipe(i.filter(Boolean)):o.of(e)}))),a.pageType=e.PageType.CATEGORY_PAGE,a}return h(n,r),n.prototype.resolveTitle=function(){var e=this;return this.searchPage$.pipe(i.filter((function(e){return!!e.pagination})),i.switchMap((function(t){var r;return e.translation.translate("pageMetaResolver.category.title",{count:t.pagination.totalResults,query:(null===(r=t.breadcrumbs)||void 0===r?void 0:r.length)?t.breadcrumbs[0].facetValueName:void 0})})))},n.prototype.resolveBreadcrumbs=function(){var e=this;return o.combineLatest([this.searchPage$.pipe(),this.translation.translate("common.home")]).pipe(i.map((function(t){var r=E(t,2),n=r[0],o=r[1];return n.breadcrumbs?e.resolveBreadcrumbData(n,o):null})))},n.prototype.resolveBreadcrumbData=function(e,t){var r,n,o=[];o.push({label:t,link:"/"});try{for(var i=m(e.breadcrumbs),s=i.next();!s.done;s=i.next()){var a=s.value;"category"!==a.facetCode&&"allCategories"!==a.facetCode||o.push({label:a.facetValueName,link:"/c/"+a.facetValueCode}),"brand"===a.facetCode&&o.push({label:a.facetValueName,link:"/Brands/"+a.facetValueName+"/c/"+a.facetValueCode})}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},n.prototype.hasProductListComponent=function(e){return!!Object.keys(e.slots).find((function(t){return!!e.slots[t].components.find((function(e){return"CMSProductListComponent"===e.typeCode||"ProductGridComponent"===e.typeCode}))}))},n.ctorParameters=function(){return[{type:dR},{type:bS},{type:WS}]},n.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new n(t.ɵɵinject(dR),t.ɵɵinject(bS),t.ɵɵinject(WS))},token:n,providedIn:"root"}),n=v([t.Injectable({providedIn:"root"})],n)}(fy),vR=function(r){function n(t,n,o,s,a){var c=r.call(this)||this;return c.productSearchService=t,c.translation=n,c.authService=o,c.route=s,c.semanticPathService=a,c.total$=c.productSearchService.getResults().pipe(i.filter((function(e){return!!(null==e?void 0:e.pagination)})),i.map((function(e){return e.pagination.totalResults}))),c.pageType=e.PageType.CONTENT_PAGE,c.pageTemplate="SearchResultsListPageTemplate",c}return h(n,r),n.prototype.resolveBreadcrumbs=function(){var e=this;return o.combineLatest([this.translation.translate("common.home"),this.translation.translate("myCoupons.myCoupons"),this.authService.isUserLoggedIn()]).pipe(i.map((function(t){var r=E(t,3),n=r[0],o=r[1],i=r[2],s=[];return s.push({label:n,link:"/"}),i&&s.push({label:o,link:e.semanticPathService.transform({cxRoute:"coupons"})}),s})))},n.prototype.resolveTitle=function(){var e=this;return this.total$.pipe(i.switchMap((function(t){return e.translation.translate("pageMetaResolver.search.findProductTitle",{count:t,coupon:e.couponCode})})))},n.prototype.getScore=function(e){return r.prototype.getScore.call(this,e)+(this.couponCode?1:-1)},Object.defineProperty(n.prototype,"couponCode",{get:function(){var e,t;return null===(t=null===(e=this.route.snapshot)||void 0===e?void 0:e.queryParams)||void 0===t?void 0:t.couponcode},enumerable:!0,configurable:!0}),n.ctorParameters=function(){return[{type:dR},{type:WS},{type:vt},{type:a.ActivatedRoute},{type:Tt}]},n.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new n(t.ɵɵinject(dR),t.ɵɵinject(WS),t.ɵɵinject(vt),t.ɵɵinject(a.ActivatedRoute),t.ɵɵinject(Tt))},token:n,providedIn:"root"}),n=v([t.Injectable({providedIn:"root"})],n)}(fy),CR=function(r){function n(t,n,o){var s=r.call(this)||this;return s.routingService=t,s.productService=n,s.translation=o,s.product$=s.routingService.getRouterState().pipe(i.map((function(e){return e.state.params.productCode})),i.filter((function(e){return!!e})),i.switchMap((function(t){return s.productService.get(t,e.ProductScope.DETAILS)})),i.filter(Boolean)),s.pageType=e.PageType.PRODUCT_PAGE,s}return h(n,r),n.prototype.resolveHeading=function(){var e=this;return this.product$.pipe(i.switchMap((function(t){return e.translation.translate("pageMetaResolver.product.heading",{heading:t.name})})))},n.prototype.resolveTitle=function(){var e=this;return this.product$.pipe(i.switchMap((function(t){var r=t.name;return r+=e.resolveFirstCategory(t),r+=e.resolveManufacturer(t),e.translation.translate("pageMetaResolver.product.title",{title:r})})))},n.prototype.resolveDescription=function(){var e=this;return this.product$.pipe(i.switchMap((function(t){return e.translation.translate("pageMetaResolver.product.description",{description:t.summary})})))},n.prototype.resolveBreadcrumbs=function(){return o.combineLatest([this.product$.pipe(),this.translation.translate("common.home")]).pipe(i.map((function(e){var t,r,n=E(e,2),o=n[0],i=n[1],s=[];s.push({label:i,link:"/"});try{for(var a=m(o.categories||[]),c=a.next();!c.done;c=a.next()){var u=c.value,p=u.name,d=u.code,l=u.url;s.push({label:p||d,link:l})}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s})))},n.prototype.resolveImage=function(){return this.product$.pipe(i.map((function(e){var t,r,n;return(null===(n=null===(r=null===(t=e.images)||void 0===t?void 0:t.PRIMARY)||void 0===r?void 0:r.zoom)||void 0===n?void 0:n.url)?e.images.PRIMARY.zoom.url:null})))},n.prototype.resolveFirstCategory=function(e){var t,r;return(null===(t=e.categories)||void 0===t?void 0:t.length)>0&&(r=e.categories[0]),r?" | "+(r.name||r.code):""},n.prototype.resolveManufacturer=function(e){return e.manufacturer?" | "+e.manufacturer:""},n.prototype.resolveRobots=function(){return o.of([e.PageRobotsMeta.FOLLOW,e.PageRobotsMeta.INDEX])},n.ctorParameters=function(){return[{type:$t},{type:fR},{type:WS}]},n.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new n(t.ɵɵinject($t),t.ɵɵinject(fR),t.ɵɵinject(WS))},token:n,providedIn:"root"}),n=v([t.Injectable({providedIn:"root"})],n)}(fy),SR=function(r){function n(t,n,o){var s=r.call(this)||this;return s.routingService=t,s.productSearchService=n,s.translation=o,s.total$=s.productSearchService.getResults().pipe(i.filter((function(e){return!!(null==e?void 0:e.pagination)})),i.map((function(e){return e.pagination.totalResults}))),s.query$=s.routingService.getRouterState().pipe(i.map((function(e){return e.state.params.query}))),s.pageType=e.PageType.CONTENT_PAGE,s.pageTemplate="SearchResultsListPageTemplate",s}return h(n,r),n.prototype.resolveTitle=function(){var e=this,t=[this.total$,this.query$];return o.combineLatest(t).pipe(i.switchMap((function(t){var r=E(t,2),n=r[0],o=r[1];return e.translation.translate("pageMetaResolver.search.title",{count:n,query:o})})))},n.ctorParameters=function(){return[{type:$t},{type:dR},{type:WS}]},n.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new n(t.ɵɵinject($t),t.ɵɵinject(dR),t.ɵɵinject(WS))},token:n,providedIn:"root"}),n=v([t.Injectable({providedIn:"root"})],n)}(fy),gR=function(){function e(e,t){var r=this;this.actions$=e,this.productReferencesConnector=t,this.loadProductReferences$=this.actions$.pipe(c.ofType("[Product] Load Product References Data"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return r.productReferencesConnector.get(e.productCode,e.referenceType,e.pageSize).pipe(i.map((function(t){return new II({productCode:e.productCode,list:t})})),i.catchError((function(t){return o.of(new EI({message:e.productCode}))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:CI}]},v([c.Effect()],e.prototype,"loadProductReferences$",void 0),e=v([t.Injectable()],e)}(),mR=function(){function r(t,r,n){var s=this;this.actions$=t,this.productReviewsConnector=r,this.globalMessageService=n,this.loadProductReviews$=this.actions$.pipe(c.ofType("[Product] Load Product Reviews Data"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.productReviewsConnector.get(e).pipe(i.map((function(t){return new UI({productCode:e,list:t})})),i.catchError((function(t){return o.of(new AI({message:e}))})))}))),this.postProductReview=this.actions$.pipe(c.ofType("[Product] Post Product Review"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.productReviewsConnector.add(e.productCode,e.review).pipe(i.map((function(e){return new _I(e)})),i.catchError((function(t){return o.of(new LI(e.productCode))})))}))),this.showGlobalMessageOnPostProductReviewSuccess$=this.actions$.pipe(c.ofType("[Product] Post Product Review Success"),i.tap((function(){s.globalMessageService.add({key:"productReview.thankYouForReview"},e.GlobalMessageType.MSG_TYPE_CONFIRMATION)})))}return r.ctorParameters=function(){return[{type:c.Actions},{type:SI},{type:Sh}]},v([c.Effect()],r.prototype,"loadProductReviews$",void 0),v([c.Effect()],r.prototype,"postProductReview",void 0),v([c.Effect({dispatch:!1})],r.prototype,"showGlobalMessageOnPostProductReviewSuccess$",void 0),r=v([t.Injectable()],r)}(),ER=function(){function e(e,t){var r=this;this.actions$=e,this.productSearchConnector=t,this.searchProducts$=this.actions$.pipe(c.ofType("[Product] Search Products"),i.groupBy((function(e){return e.auxiliary})),i.mergeMap((function(e){return e.pipe(i.switchMap((function(e){return r.productSearchConnector.search(e.payload.queryText,e.payload.searchConfig).pipe(i.map((function(t){return new wI(t,e.auxiliary)})),i.catchError((function(t){return o.of(new bI(an(t),e.auxiliary))})))})))}))),this.getProductSuggestions$=this.actions$.pipe(c.ofType("[Product] Get Product Suggestions"),i.map((function(e){return e.payload})),i.switchMap((function(e){return r.productSearchConnector.getSuggestions(e.term,e.searchConfig.pageSize).pipe(i.map((function(e){return new MI(void 0===e?[]:e)})),i.catchError((function(e){return o.of(new FI(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:gI}]},v([c.Effect()],e.prototype,"searchProducts$",void 0),v([c.Effect()],e.prototype,"getProductSuggestions$",void 0),e=v([t.Injectable()],e)}(),IR=function(){function e(e,t){var r=this;this.actions$=e,this.productConnector=t,this.contextChange$=this.actions$.pipe(c.ofType(rr,pr)),this.loadProduct$=c.createEffect((function(){return function(e){var t=void 0===e?{}:e,n=t.scheduler,s=t.debounce,a=void 0===s?0:s;return r.actions$.pipe(c.ofType(NI),i.map((function(e){return{code:e.payload,scope:e.meta.scope}})),Kg(a,n),i.mergeMap((function(e){return o.merge.apply(void 0,I(r.productConnector.getMany(e).map(r.productLoadEffect)))})),Tv(r.contextChange$))}}))}return e.prototype.productLoadEffect=function(e){return e.data$.pipe(i.map((function(t){return new $I(y({code:e.code},t),e.scope)})),i.catchError((function(t){return o.of(new xI(e.code,an(t),e.scope))})))},e.ctorParameters=function(){return[{type:c.Actions},{type:vI}]},e=v([t.Injectable()],e)}(),RR=[ER,IR,mR,gR],TR={productCode:"",list:[]};function AR(e,t){switch(void 0===e&&(e=TR),t.type){case"[Product] Load Product References Data Success":var r=t.payload.productCode,n=t.payload.list;return y(y({},e),{list:I(e.list,n||[]).reduce((function(e,t){return e.some((function(e){return e.referenceType===t.referenceType&&e.target.code===t.target.code}))||e.push(t),e}),[]),productCode:r});case"[Product] Clean Product References":return TR}return e}var UR={productCode:"",list:[]};function PR(e,t){switch(void 0===e&&(e=UR),t.type){case"[Product] Load Product Reviews Data Success":var r=t.payload.productCode,n=t.payload.list;return y(y({},e),{productCode:r,list:n})}return e}var LR={};function _R(e,t){var r=se(e,t);return function(t,n){var o,i;return void 0===t&&(t=LR),n&&n.meta&&n.meta.entityType===e?y(y({},t),((o={})[null!==(i=n.meta.scope)&&void 0!==i?i:""]=r(t[n.meta.scope],n),o)):t}}function OR(e,t){return he(e,_R(e,t))}function bR(){return{search:KI,details:OR("[Product] Detail Entity"),reviews:PR,references:AR}}var wR=new t.InjectionToken("ProductReducers"),DR={provide:wR,useFactory:bR};function MR(e){return function(t,r){return r.type!==rr&&r.type!==pr||(t=void 0),e(t,r)}}var FR=[MR];function kR(){var t;return{state:{ssrTransfer:{keys:(t={},t.product=e.StateTransferType.TRANSFER_STATE,t)}}}}var NR=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule,n.StoreModule.forFeature("product",wR,{metaReducers:FR}),c.EffectsModule.forFeature(RR)],providers:[b(kR),DR]})],e)}(),jR=[{provide:fy,useExisting:CR,multi:!0},{provide:fy,useExisting:yR,multi:!0},{provide:fy,useExisting:SR,multi:!0},{provide:fy,useExisting:vR,multi:!0}],xR=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:I(jR)}},e=r=v([t.NgModule({imports:[NR]})],e)}(),$R=function(){function e(e){this.service=e}return e.prototype.intercept=function(e,t){return e.url.includes("/cms/")&&this.service.cmsTicketId&&(e=e.clone({setParams:{cmsTicketId:this.service.cmsTicketId}})),t.handle(e)},e.ctorParameters=function(){return[{type:nE}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(nE))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),GR=[{provide:s.HTTP_INTERCEPTORS,useExisting:$R,multi:!0}],BR=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r,providers:I(GR)}},e=r=v([t.NgModule({})],e)}(),HR=function(){function e(){}return e.get=function(e){return function(t){return function(r,n,o){return e(y(y({},t),{providers:I(VR(n),t.providers||[])}))(r,n,o)}}},e}();function VR(e){return[{provide:Hs,useValue:(t=e.req,WR(t)+t.originalUrl)},{provide:Vs,useValue:WR(e.req)}];var t}function WR(e){return e.protocol+"://"+e.get("host")}var qR=function(){function e(){}return e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return t.ɵɵinject(A)},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root",useExisting:A})],e)}(),zR="[StoreFinder] Store Finder Data",YR="[StoreFinder] Find Stores",KR="[StoreFinder] Find a Store by Id",ZR=function(e){function t(){var t=e.call(this,zR)||this;return t.type="[StoreFinder] On Hold",t}return h(t,e),t}(z),JR=function(e){function t(t){var r=e.call(this,zR)||this;return r.payload=t,r.type=YR,r}return h(t,e),t}(z),QR=function(e){function t(t){var r=e.call(this,zR,t)||this;return r.payload=t,r.type="[StoreFinder] Find Stores Fail",r}return h(t,e),t}(Y),XR=function(e){function t(t){var r=e.call(this,zR)||this;return r.payload=t,r.type="[StoreFinder] Find Stores Success",r}return h(t,e),t}(K),eT=function(e){function t(t){var r=e.call(this,zR)||this;return r.payload=t,r.type=KR,r}return h(t,e),t}(z),tT=function(e){function t(t){var r=e.call(this,zR,t)||this;return r.payload=t,r.type="[StoreFinder] Find a Store by Id Fail",r}return h(t,e),t}(Y),rT=function(e){function t(t){var r=e.call(this,zR)||this;return r.payload=t,r.type="[StoreFinder] Find a Store by Id Success",r}return h(t,e),t}(K),nT=function(e){function t(){var t=e.call(this,zR)||this;return t.type="[StoreFinder] View All Stores",t}return h(t,e),t}(z),oT=function(e){function t(t){var r=e.call(this,zR,t)||this;return r.payload=t,r.type="[StoreFinder] View All Stores Fail",r}return h(t,e),t}(Y),iT=function(e){function t(t){var r=e.call(this,zR)||this;return r.payload=t,r.type="[StoreFinder] View All Stores Success",r}return h(t,e),t}(K),sT=Object.freeze({__proto__:null,FIND_STORES_ON_HOLD:"[StoreFinder] On Hold",FIND_STORES:YR,FIND_STORES_FAIL:"[StoreFinder] Find Stores Fail",FIND_STORES_SUCCESS:"[StoreFinder] Find Stores Success",FIND_STORE_BY_ID:KR,FIND_STORE_BY_ID_FAIL:"[StoreFinder] Find a Store by Id Fail",FIND_STORE_BY_ID_SUCCESS:"[StoreFinder] Find a Store by Id Success",FindStoresOnHold:ZR,FindStores:JR,FindStoresFail:QR,FindStoresSuccess:XR,FindStoreById:eT,FindStoreByIdFail:tT,FindStoreByIdSuccess:rT,VIEW_ALL_STORES:"[StoreFinder] View All Stores",VIEW_ALL_STORES_FAIL:"[StoreFinder] View All Stores Fail",VIEW_ALL_STORES_SUCCESS:"[StoreFinder] View All Stores Success",ViewAllStores:nT,ViewAllStoresFail:oT,ViewAllStoresSuccess:iT}),aT=n.createFeatureSelector("stores"),cT=function(e){return e.findStores},uT=n.createSelector(aT,cT),pT=function(e){return ae(e)},dT=n.createSelector(uT,pT),lT=function(e){return ce(e)},fT=n.createSelector(uT,lT),hT=n.createSelector(aT,(function(e){return e.viewAllStores})),yT=n.createSelector(hT,(function(e){return ae(e)})),vT=n.createSelector(hT,(function(e){return ce(e)})),CT=Object.freeze({__proto__:null,getFindStoresState:uT,getFindStoresEntities:dT,getStoresLoading:fT,"ɵ0":cT,"ɵ1":pT,"ɵ2":lT,getViewAllStoresState:hT,getViewAllStoresEntities:yT,getViewAllStoresLoading:vT}),ST=function(){function r(e,t,r,n){this.store=e,this.winRef=t,this.globalMessageService=r,this.routingService=n,this.geolocationWatchId=null}return r.prototype.getStoresLoading=function(){return this.store.pipe(n.select(fT))},r.prototype.getFindStoresEntities=function(){return this.store.pipe(n.select(dT))},r.prototype.getViewAllStoresLoading=function(){return this.store.pipe(n.select(vT))},r.prototype.getViewAllStoresEntities=function(){return this.store.pipe(n.select(yT))},r.prototype.findStoresAction=function(t,r,n,o,i,s){var a=this;i&&this.winRef.nativeWindow?(this.clearWatchGeolocation(new ZR),this.geolocationWatchId=this.winRef.nativeWindow.navigator.geolocation.watchPosition((function(e){var n={longitude:e.coords.longitude,latitude:e.coords.latitude};a.clearWatchGeolocation(new JR({queryText:t,searchConfig:r,longitudeLatitude:n,countryIsoCode:o,radius:s}))}),(function(){a.globalMessageService.add({key:"storeFinder.geolocationNotEnabled"},e.GlobalMessageType.MSG_TYPE_ERROR),a.routingService.go(["/store-finder"])}))):this.clearWatchGeolocation(new JR({queryText:t,searchConfig:r,longitudeLatitude:n,countryIsoCode:o,radius:s}))},r.prototype.viewAllStores=function(){this.clearWatchGeolocation(new nT)},r.prototype.viewStoreById=function(e){this.clearWatchGeolocation(new eT({storeId:e}))},r.prototype.clearWatchGeolocation=function(e){null!==this.geolocationWatchId&&(this.winRef.nativeWindow.navigator.geolocation.clearWatch(this.geolocationWatchId),this.geolocationWatchId=null),this.store.dispatch(e)},r.ctorParameters=function(){return[{type:n.Store},{type:St},{type:Sh},{type:$t}]},r.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(n.Store),t.ɵɵinject(St),t.ɵɵinject(Sh),t.ɵɵinject($t))},token:r,providedIn:"root"}),r=v([t.Injectable({providedIn:"root"})],r)}(),gT=function(){function e(){this.weekDays={0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"}}return e.prototype.getStoreLatitude=function(e){return e.geoPoint.latitude},e.prototype.getStoreLongitude=function(e){return e.geoPoint.longitude},e.prototype.getStoreClosingTime=function(e,t){var r=this.getSchedule(e,t);if(r){if(r.closed&&!0===r.closed)return"closed";if(r.closingTime)return r.closingTime.formattedHour}},e.prototype.getStoreOpeningTime=function(e,t){var r=this.getSchedule(e,t);if(r){if(r.closed&&!0===r.closed)return"closed";if(r.openingTime)return r.openingTime.formattedHour}},e.prototype.getSchedule=function(e,t){var r=this.weekDays[t.getDay()];return e.openingHours.weekDayOpeningList.find((function(e){return e.weekDay===r}))},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),mT=function(){function e(e){this.document=e}return e.prototype.load=function(e,t,r){var n=this.document.createElement("script");n.type="text/javascript",n.src=t?e+this.parseParams(t):e,n.async=!0,n.defer=!0,r&&n.addEventListener("load",r),document.head.appendChild(n)},e.prototype.parseParams=function(e){var t="",r=Object.keys(e);return r.length>0&&(t="?"+r.map((function(t){return encodeURI(t)+"="+encodeURI(e[t])})).join("&")),t},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[r.DOCUMENT]}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(r.DOCUMENT))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"}),C(0,t.Inject(r.DOCUMENT))],e)}(),ET=function(){function e(e,t,r){this.config=e,this.externalJsFileLoader=t,this.storeDataService=r,this.googleMap=null}return e.prototype.renderMap=function(e,t,r){var n=this;null===this.googleMap?this.externalJsFileLoader.load(this.config.googleMaps.apiUrl,{key:this.config.googleMaps.apiKey},(function(){n.drawMap(e,t,r)})):this.drawMap(e,t,r)},e.prototype.centerMap=function(e,t){this.googleMap.panTo({lat:e,lng:t}),this.googleMap.setZoom(this.config.googleMaps.selectedMarkerScale)},e.prototype.defineMapCenter=function(e){return new google.maps.LatLng(this.storeDataService.getStoreLatitude(e[0]),this.storeDataService.getStoreLongitude(e[0]))},e.prototype.initMap=function(e,t){var r={center:t,zoom:this.config.googleMaps.scale,mapTypeId:google.maps.MapTypeId.ROADMAP,gestureHandling:"greedy"};this.googleMap=new google.maps.Map(e,r)},e.prototype.createMarkers=function(e,t){var r=this;this.markers=[],e.forEach((function(e,n){var o=new google.maps.Marker({position:new google.maps.LatLng(r.storeDataService.getStoreLatitude(e),r.storeDataService.getStoreLongitude(e)),label:n+1+""});r.markers.push(o),o.setMap(r.googleMap),o.addListener("mouseover",(function(){o.setAnimation(google.maps.Animation.BOUNCE)})),o.addListener("mouseout",(function(){o.setAnimation(null)})),t&&o.addListener("click",(function(){t(n)}))}))},e.prototype.drawMap=function(e,t,r){this.initMap(e,this.defineMapCenter(t)),this.createMarkers(t,r)},e.ctorParameters=function(){return[{type:qR},{type:mT},{type:gT}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(qR),t.ɵɵinject(mT),t.ɵɵinject(gT))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),IT={googleMaps:{apiUrl:"https://maps.googleapis.com/maps/api/js",apiKey:"",scale:5,selectedMarkerScale:17,radius:5e4}};function RT(){return{findStores:se(zR),viewAllStores:se(zR)}}var TT=new t.InjectionToken("StoreFinderReducers"),AT={provide:TT,useFactory:RT},UT=function(){function e(e,t){var r=this;this.actions$=e,this.storeFinderConnector=t,this.findStores$=this.actions$.pipe(c.ofType(YR),i.map((function(e){return e.payload})),i.mergeMap((function(e){return r.storeFinderConnector.search(e.queryText,e.searchConfig,e.longitudeLatitude,e.radius).pipe(i.map((function(t){return e.countryIsoCode&&(t.stores=t.stores.filter((function(t){return t.address.country.isocode===e.countryIsoCode})),t.stores.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}))),new XR(t)})),i.catchError((function(e){return o.of(new QR(an(e)))})))}))),this.findStoreById$=this.actions$.pipe(c.ofType(KR),i.map((function(e){return e.payload})),i.switchMap((function(e){return r.storeFinderConnector.get(e.storeId).pipe(i.map((function(e){return new rT(e)})),i.catchError((function(e){return o.of(new tT(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:zi}]},v([c.Effect()],e.prototype,"findStores$",void 0),v([c.Effect()],e.prototype,"findStoreById$",void 0),e=v([t.Injectable()],e)}(),PT=function(){function e(e,t){var r=this;this.actions$=e,this.storeFinderConnector=t,this.viewAllStores$=this.actions$.pipe(c.ofType("[StoreFinder] View All Stores"),i.switchMap((function(){return r.storeFinderConnector.getCounts().pipe(i.map((function(e){return e.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),new iT(e)})),i.catchError((function(e){return o.of(new oT(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:zi}]},v([c.Effect()],e.prototype,"viewAllStores$",void 0),e=v([t.Injectable()],e)}(),LT=[UT,PT],_T=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,s.HttpClientModule,n.StoreModule.forFeature("stores",TT),c.EffectsModule.forFeature(LT)],providers:[AT]})],e)}(),OT=function(){function e(){}return e=v([t.NgModule({imports:[_T],providers:[O(IT)]})],e)}(),bT=function(){function e(e){this.adapter=e}return e.prototype.get=function(e){return this.adapter.load(e)},e.prototype.update=function(e,t){return this.adapter.update(e,t)},e.prototype.register=function(e){return this.adapter.register(e)},e.prototype.registerGuest=function(e,t){return this.adapter.registerGuest(e,t)},e.prototype.requestForgotPasswordEmail=function(e){return this.adapter.requestForgotPasswordEmail(e)},e.prototype.resetPassword=function(e,t){return this.adapter.resetPassword(e,t)},e.prototype.updateEmail=function(e,t,r){return this.adapter.updateEmail(e,t,r)},e.prototype.updatePassword=function(e,t,r){return this.adapter.updatePassword(e,t,r)},e.prototype.remove=function(e){return this.adapter.remove(e)},e.prototype.getTitles=function(){return this.adapter.loadTitles()},e.ctorParameters=function(){return[{type:As}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(As))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),wT=function(){function e(e){this.adapter=e}return e.prototype.loadConsents=function(e){return this.adapter.loadConsents(e)},e.prototype.giveConsent=function(e,t,r){return this.adapter.giveConsent(e,t,r)},e.prototype.withdrawConsent=function(e,t){return this.adapter.withdrawConsent(e,t)},e.ctorParameters=function(){return[{type:Ss}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Ss))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),DT=function(){function e(e){this.adapter=e}return e.prototype.getAll=function(e){return this.adapter.loadAll(e)},e.prototype.delete=function(e,t){return this.adapter.delete(e,t)},e.prototype.setDefault=function(e,t){return this.adapter.setDefault(e,t)},e.ctorParameters=function(){return[{type:Ts}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Ts))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),MT=function(){function e(e){this.adapter=e}return e.prototype.get=function(e,t){return this.adapter.load(e,t)},e.prototype.getHistory=function(e,t,r,n){return this.adapter.loadHistory(e,t,r,n)},e.prototype.getConsignmentTracking=function(e,t,r){return this.adapter.getConsignmentTracking(e,t,r)},e.prototype.cancel=function(e,t,r){return this.adapter.cancel(e,t,r)},e.prototype.return=function(e,t){return this.adapter.createReturnRequest(e,t)},e.prototype.getReturnRequestDetail=function(e,t){return this.adapter.loadReturnRequestDetail(e,t)},e.prototype.getReturnRequestList=function(e,t,r,n){return this.adapter.loadReturnRequestList(e,t,r,n)},e.prototype.cancelReturnRequest=function(e,t,r){return this.adapter.cancelReturnRequest(e,t,r)},e.ctorParameters=function(){return[{type:Rs}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Rs))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),FT=function(){function e(e){this.adapter=e}return e.prototype.getCustomerCoupons=function(e,t,r,n){return this.adapter.getCustomerCoupons(e,t,r,n)},e.prototype.turnOnNotification=function(e,t){return this.adapter.turnOnNotification(e,t)},e.prototype.turnOffNotification=function(e,t){return this.adapter.turnOffNotification(e,t)},e.prototype.claimCustomerCoupon=function(e,t){return this.adapter.claimCustomerCoupon(e,t)},e.ctorParameters=function(){return[{type:gs}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(gs))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),kT=function(){function e(e){this.adapter=e}return e.prototype.getInterests=function(e,t,r,n,o,i){return this.adapter.getInterests(e,t,r,n,o,i)},e.prototype.removeInterest=function(e,t){return this.adapter.removeInterest(e,t)},e.prototype.addInterest=function(e,t,r){return this.adapter.addInterest(e,t,r)},e.ctorParameters=function(){return[{type:Es}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(Es))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),NT=function(){function e(e,t){this.anonymousConsentsService=e,this.userConsentService=t}return e.prototype.getConsent=function(e){return o.merge(this.userConsentService.getConsent(e),this.anonymousConsentsService.getConsent(e))},e.prototype.checkConsentGivenByTemplateId=function(e){var t=this;return this.getConsent(e).pipe(i.map((function(e){return!!e&&(t.isAnonymousConsentType(e)?t.anonymousConsentsService.isConsentGiven(e):t.userConsentService.isConsentGiven(e))})),i.distinctUntilChanged())},e.prototype.checkConsentWithdrawnByTemplateId=function(e){var t=this;return this.getConsent(e).pipe(i.map((function(e){return!e||(t.isAnonymousConsentType(e)?t.anonymousConsentsService.isConsentWithdrawn(e):t.userConsentService.isConsentWithdrawn(e))})),i.distinctUntilChanged())},e.prototype.isConsentGiven=function(e){return this.isAnonymousConsentType(e)?this.anonymousConsentsService.isConsentGiven(e):this.userConsentService.isConsentGiven(e)},e.prototype.isConsentWithdrawn=function(e){return this.isAnonymousConsentType(e)?this.anonymousConsentsService.isConsentWithdrawn(e):this.userConsentService.isConsentWithdrawn(e)},e.prototype.isAnonymousConsentType=function(e){return!!e&&void 0!==e.templateCode},e.prototype.isConsentType=function(e){return!!e&&void 0!==e.code},e.ctorParameters=function(){return[{type:lo},{type:jl}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(lo),t.ɵɵinject(jl))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),jT=function(){function e(e,t){this.store=e,this.authService=t}return e.prototype.loadAddresses=function(){var e=this;this.authService.invokeWithUserId((function(t){e.store.dispatch(new ku(t))}))},e.prototype.addUserAddress=function(e){var t=this;this.authService.invokeWithUserId((function(r){t.store.dispatch(new xu({userId:r,address:e}))}))},e.prototype.setAddressAsDefault=function(e){var t=this;this.authService.invokeWithUserId((function(r){t.store.dispatch(new Bu({userId:r,addressId:e,address:{defaultAddress:!0}}))}))},e.prototype.updateUserAddress=function(e,t){var r=this;this.authService.invokeWithUserId((function(n){r.store.dispatch(new Bu({userId:n,addressId:e,address:t}))}))},e.prototype.deleteUserAddress=function(e){var t=this;this.authService.invokeWithUserId((function(r){t.store.dispatch(new Wu({userId:r,addressId:e}))}))},e.prototype.getAddresses=function(){return this.store.pipe(n.select(ll))},e.prototype.getAddressesLoading=function(){return this.store.pipe(n.select(fl))},e.prototype.getAddressesLoadedSuccess=function(){return this.store.pipe(n.select(hl))},e.prototype.loadDeliveryCountries=function(){this.store.dispatch(new $c)},e.prototype.getDeliveryCountries=function(){return this.store.pipe(n.select(jd))},e.prototype.getCountry=function(e){return this.store.pipe(n.select(xd(e)))},e.prototype.loadRegions=function(e){this.store.dispatch(new Su(e))},e.prototype.clearRegions=function(){this.store.dispatch(new Eu)},e.prototype.getRegions=function(e){var t=this;return this.store.pipe(n.select(nl),i.map((function(r){var n=r.regions,o=r.country,i=r.loading,s=r.loaded;return e||!i&&!s?i&&!s?[]:!i&&e!==o&&e?(o&&t.clearRegions(),t.loadRegions(e),[]):n:(t.clearRegions(),[])})))},e.ctorParameters=function(){return[{type:n.Store},{type:vt}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),xT=function(){function e(e,t){this.store=e,this.authService=t}return e.prototype.getOrderDetails=function(){return this.store.pipe(n.select(Gd))},e.prototype.loadOrderDetails=function(e){var t=this;this.authService.invokeWithUserId((function(r){t.store.dispatch(new tu({userId:r,orderCode:e}))}))},e.prototype.clearOrderDetails=function(){this.store.dispatch(new ou)},e.prototype.getOrderHistoryList=function(e){var t=this;return this.store.pipe(n.select(Rl),i.tap((function(r){r.loading||r.success||r.error||t.loadOrderList(e)})),i.map((function(e){return e.value})))},e.prototype.getOrderHistoryListLoaded=function(){return this.store.pipe(n.select(Tl))},e.prototype.loadOrderList=function(e,t,r){var n=this;this.authService.invokeWithUserId((function(o){n.store.dispatch(new yp({userId:o,pageSize:e,currentPage:t,sort:r}))}))},e.prototype.clearOrderList=function(){this.store.dispatch(new Sp)},e.prototype.getConsignmentTracking=function(){return this.store.pipe(n.select(Fd))},e.prototype.loadConsignmentTracking=function(e,t){var r=this;this.authService.invokeWithUserId((function(n){r.store.dispatch(new kc({userId:n,orderCode:e,consignmentCode:t}))}))},e.prototype.clearConsignmentTracking=function(){this.store.dispatch(new xc)},e.prototype.cancelOrder=function(e,t){var r=this;this.authService.invokeWithUserId((function(n){r.store.dispatch(new iu({userId:n,orderCode:e,cancelRequestInput:t}))}))},e.prototype.getCancelOrderLoading=function(){return this.store.pipe(n.select(_c("cancelOrder")))},e.prototype.getCancelOrderSuccess=function(){return this.store.pipe(n.select(Oc("cancelOrder")))},e.prototype.resetCancelOrderProcessState=function(){return this.store.dispatch(new cu)},e.ctorParameters=function(){return[{type:n.Store},{type:vt}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),$T=function(){function e(e,t){this.store=e,this.authService=t}return e.prototype.loadCustomerCoupons=function(e,t,r){var n=this;this.authService.invokeWithUserId((function(o){n.store.dispatch(new Op({userId:o,pageSize:e,currentPage:t,sort:r}))}))},e.prototype.getCustomerCoupons=function(e){var t=this;return o.combineLatest([this.store.pipe(n.select(Ul)),this.getClaimCustomerCouponResultLoading()]).pipe(i.filter((function(e){return!E(e,2)[1]})),i.tap((function(r){var n=E(r,1)[0];n.loading||n.success||n.error||t.loadCustomerCoupons(e)})),i.map((function(e){return E(e,1)[0].value})))},e.prototype.getCustomerCouponsLoaded=function(){return this.store.pipe(n.select(Pl))},e.prototype.getCustomerCouponsLoading=function(){return this.store.pipe(n.select(Ll))},e.prototype.subscribeCustomerCoupon=function(e){var t=this;this.authService.invokeWithUserId((function(r){t.store.dispatch(new Mp({userId:r,couponCode:e}))}))},e.prototype.getSubscribeCustomerCouponResultLoading=function(){return this.store.pipe(n.select(_c("subscribeCustomerCoupon")))},e.prototype.getSubscribeCustomerCouponResultSuccess=function(){return this.store.pipe(n.select(Oc("subscribeCustomerCoupon")))},e.prototype.getSubscribeCustomerCouponResultError=function(){return this.store.pipe(n.select(bc("subscribeCustomerCoupon")))},e.prototype.unsubscribeCustomerCoupon=function(e){var t=this;this.authService.invokeWithUserId((function(r){t.store.dispatch(new jp({userId:r,couponCode:e}))}))},e.prototype.getUnsubscribeCustomerCouponResultLoading=function(){return this.store.pipe(n.select(_c("unsubscribeCustomerCoupon")))},e.prototype.getUnsubscribeCustomerCouponResultSuccess=function(){return this.store.pipe(n.select(Oc("unsubscribeCustomerCoupon")))},e.prototype.getUnsubscribeCustomerCouponResultError=function(){return this.store.pipe(n.select(bc("unsubscribeCustomerCoupon")))},e.prototype.claimCustomerCoupon=function(e){var t=this;this.authService.invokeWithUserId((function(r){t.store.dispatch(new Bp({userId:r,couponCode:e}))}))},e.prototype.getClaimCustomerCouponResultSuccess=function(){return this.store.pipe(n.select(Oc("claimCustomerCoupon")))},e.prototype.getClaimCustomerCouponResultLoading=function(){return this.store.pipe(n.select(_c("claimCustomerCoupon")))},e.ctorParameters=function(){return[{type:n.Store},{type:vt}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),GT=function(){function e(e,t){this.store=e,this.authService=t}return e.prototype.loadPaymentMethods=function(){var e=this;this.authService.invokeWithUserId((function(t){e.store.dispatch(new uu(t))}))},e.prototype.getPaymentMethods=function(){return this.store.pipe(n.select(Qd))},e.prototype.getPaymentMethodsLoading=function(){return this.store.pipe(n.select(Xd))},e.prototype.getPaymentMethodsLoadedSuccess=function(){return this.store.pipe(n.select(el))},e.prototype.setPaymentMethodAsDefault=function(e){var t=this;this.authService.invokeWithUserId((function(r){t.store.dispatch(new lu({userId:r,paymentMethodId:e}))}))},e.prototype.deletePaymentMethod=function(e){var t=this;this.authService.invokeWithUserId((function(r){t.store.dispatch(new yu({userId:r,paymentMethodId:e}))}))},e.prototype.getAllBillingCountries=function(){return this.store.pipe(n.select(Dd))},e.prototype.loadBillingCountries=function(){this.store.dispatch(new Dc)},e.ctorParameters=function(){return[{type:n.Store},{type:vt}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),BT=function(){function e(e,t){this.store=e,this.authService=t}return e.prototype.createOrderReturnRequest=function(e){var t=this;this.authService.invokeWithUserId((function(r){t.store.dispatch(new dd({userId:r,returnRequestInput:e}))}))},e.prototype.getOrderReturnRequest=function(){return this.store.pipe(n.select(Hd))},e.prototype.getOrderReturnRequestList=function(e){var t=this;return this.store.pipe(n.select(Yd),i.tap((function(r){r.loading||r.success||r.error||t.loadOrderReturnRequestList(e)})),i.map((function(e){return e.value})))},e.prototype.loadOrderReturnRequestDetail=function(e){var t=this;this.authService.invokeWithUserId((function(r){t.store.dispatch(new hd({userId:r,returnRequestCode:e}))}))},e.prototype.loadOrderReturnRequestList=function(e,t,r){var n=this;this.authService.invokeWithUserId((function(o){n.store.dispatch(new md({userId:o,pageSize:e,currentPage:t,sort:r}))}))},e.prototype.clearOrderReturnRequestList=function(){this.store.dispatch(new Td)},e.prototype.getReturnRequestLoading=function(){return this.store.pipe(n.select(Vd))},e.prototype.getReturnRequestSuccess=function(){return this.store.pipe(n.select(qd))},e.prototype.clearOrderReturnRequestDetail=function(){this.store.dispatch(new Rd)},e.prototype.cancelOrderReturnRequest=function(e,t){var r=this;this.authService.invokeWithUserId((function(n){r.store.dispatch(new Cd({userId:n,returnRequestCode:e,returnRequestModification:t}))}))},e.prototype.getCancelReturnRequestLoading=function(){return this.store.pipe(n.select(_c("cancelReturn")))},e.prototype.getCancelReturnRequestSuccess=function(){return this.store.pipe(n.select(Oc("cancelReturn")))},e.prototype.resetCancelReturnRequestProcessState=function(){return this.store.dispatch(new Ad)},e.ctorParameters=function(){return[{type:n.Store},{type:vt}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),HT=function(){function e(e,t){this.store=e,this.authService=t}return e.prototype.getPreferences=function(){return this.store.pipe(n.select(bl))},e.prototype.getEnabledPreferences=function(){return this.store.pipe(n.select(wl))},e.prototype.loadPreferences=function(){var e=this;this.authService.invokeWithUserId((function(t){e.store.dispatch(new Wp(t))}))},e.prototype.clearPreferences=function(){this.store.dispatch(new Qp)},e.prototype.getPreferencesLoading=function(){return this.store.pipe(n.select(Dl))},e.prototype.updatePreferences=function(e){var t=this;this.authService.invokeWithUserId((function(r){t.store.dispatch(new Yp({userId:r,preferences:e}))}))},e.prototype.getUpdatePreferencesResultLoading=function(){return this.store.select(_c("updateNotificationPreferences"))},e.prototype.resetNotificationPreferences=function(){this.store.dispatch(new Jp)},e.ctorParameters=function(){return[{type:n.Store},{type:vt}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),VT=function(){function e(e,t){this.store=e,this.authService=t}return e.prototype.loadProductInterests=function(e,t,r,n,o){var i=this;this.authService.invokeWithUserId((function(s){i.store.dispatch(new Xp({userId:s,pageSize:e,currentPage:t,sort:r,productCode:n,notificationType:o}))}))},e.prototype.getProductInterests=function(){return this.store.pipe(n.select(Fl))},e.prototype.getAndLoadProductInterests=function(e){var t=this;return this.store.pipe(n.select(Ml),i.tap((function(r){r.loading||r.success||r.error||t.loadProductInterests(e)})),i.map((function(e){return e.value})))},e.prototype.getProdutInterestsLoading=function(){return this.store.pipe(n.select(kl))},e.prototype.removeProdutInterest=function(e,t){var r=this;this.authService.invokeWithUserId((function(n){r.store.dispatch(new rd({userId:n,item:e,singleDelete:t}))}))},e.prototype.getRemoveProdutInterestLoading=function(){return this.store.pipe(n.select(_c("removeProductInterests")))},e.prototype.getRemoveProdutInterestSuccess=function(){return this.store.pipe(n.select(Oc("removeProductInterests")))},e.prototype.addProductInterest=function(e,t){var r=this;this.authService.invokeWithUserId((function(n){r.store.dispatch(new id({userId:n,productCode:e,notificationType:t}))}))},e.prototype.getAddProductInterestSuccess=function(){return this.store.pipe(n.select(Oc("addProductInterests")))},e.prototype.getAddProductInterestError=function(){return this.store.pipe(n.select(bc("addProductInterests")))},e.prototype.resetAddInterestState=function(){this.store.dispatch(new cd)},e.prototype.resetRemoveInterestState=function(){this.store.dispatch(new ud)},e.prototype.clearProductInterests=function(){this.store.dispatch(new pd)},e.ctorParameters=function(){return[{type:n.Store},{type:vt}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.Store),t.ɵɵinject(vt))},token:e,providedIn:"root"}),e=v([t.Injectable({providedIn:"root"})],e)}(),WT={entities:{}};function qT(e,t){switch(void 0===e&&(e=WT),t.type){case"[User] Load Billing Countries Success":var r=t.payload.reduce((function(e,t){var r;return y(y({},e),((r={})[t.isocode]=t,r))}),y({},e.entities));return y(y({},e),{entities:r});case"[User] Clear User Misc Data":return WT}return e}var zT={};function YT(e,t){switch(void 0===e&&(e=zT),t.type){case"[User] Load Consignment Tracking Success":return{tracking:t.payload};case"[User] Clear Consignment Tracking":return zT}return e}var KT={entities:{}};function ZT(e,t){switch(void 0===e&&(e=KT),t.type){case"[User] Load Delivery Countries Success":var r=t.payload.reduce((function(e,t){var r;return y(y({},e),((r={})[t.isocode]=t,r))}),y({},e.entities));return y(y({},e),{entities:r});case"[User] Clear User Misc Data":return KT}return e}var JT=[];function QT(e,t){switch(void 0===e&&(e=JT),t.type){case"[User] Load Notification Preferences Fail":return JT;case"[User] Load Notification Preferences Success":case"[User] Update Notification Preferences Success":return t.payload?t.payload:JT}return e}var XT={};function eA(e,t){switch(void 0===e&&(e=XT),t.type){case"[User] Load Order Details Success":return t.payload}return e}var tA=[];function rA(e,t){switch(void 0===e&&(e=tA),t.type){case"[User] Load User Payment Methods Success":return t.payload?t.payload:tA;case"[User] Load User Payment Methods Fail":return tA}return e}var nA={entities:[],country:null};function oA(e,t){switch(void 0===e&&(e=nA),t.type){case"[User] Load Regions Success":var r=t.payload.entities,n=t.payload.country;return r||n?y(y({},e),{entities:r,country:n}):nA}return e}function iA(e,t){switch(void 0===e&&(e=!1),t.type){case"[User] Reset Password Success":return!0}return e}var sA={entities:{}};function aA(e,t){switch(void 0===e&&(e=sA),t.type){case"[User] Load Titles Success":var r=t.payload.reduce((function(e,t){var r;return y(y({},e),((r={})[t.code]=t,r))}),y({},e.entities));return y(y({},e),{entities:r});case"[User] Clear User Misc Data":return sA}return e}var cA=[];function uA(e,t){switch(void 0===e&&(e=cA),t.type){case"[User] Load User Addresses Fail":return cA;case"[User] Load User Addresses Success":return t.payload?t.payload:cA}return e}var pA=[];function dA(e,t){switch(void 0===e&&(e=pA),t.type){case"[User] Load User Consents Success":var r=t.payload;return r||pA;case"[User] Give User Consent Success":var n=t.consentTemplate;return e.map((function(e){return e.id===n.id?n:e}))}return e}var lA={};function fA(e,t){switch(void 0===e&&(e=lA),t.type){case"[User] Load User Details Success":return t.payload;case"[User] Update User Details Success":var r=y(y({},e),t.userUpdates);return y(y({},r),{name:r.firstName+" "+r.lastName})}return e}var hA={orders:[],pagination:{},sorts:[]};function yA(e,t){switch(void 0===e&&(e=hA),t.type){case"[User] Load User Orders Success":return t.payload?t.payload:hA;case"[User] Load User Orders Fail":return hA}return e}var vA={coupons:[],sorts:[],pagination:{}};function CA(e,t){switch(void 0===e&&(e=vA),t.type){case"[User] Load Customer Coupons Success":return t.payload;case"[User] Subscribe Customer Coupon Notification Success":var r=t.payload.coupon,n=new Array(e.coupons.length);return e.coupons.forEach((function(e,t){return e.couponId===r.couponId?n[t]=r:n[t]=e})),y(y({},e),{coupons:n});case"[User] Unsubscribe Customer Coupon Notification Success":var o=t.payload,i=new Array(e.coupons.length);return e.coupons.forEach((function(e,t){return e.couponId===o?i[t]=y(y({},e),{notificationOn:!1}):i[t]=e})),y(y({},e),{coupons:i})}return e}var SA={results:[],pagination:{},sorts:[]};function gA(e,t){switch(void 0===e&&(e=SA),t.type){case"Load Product Interests Success":return t.payload?t.payload:SA;case"Load Product Interests Fail":return SA}return e}var mA={returnRequests:[],pagination:{},sorts:[]};function EA(e,t){switch(void 0===e&&(e=mA),t.type){case"[User] Load User Order Return Request List Success":return t.payload?t.payload:mA}return e}function IA(){return{account:n.combineReducers({details:fA}),addresses:se(Kc,uA),billingCountries:qT,consents:se(qc,dA),payments:se(zc,rA),orders:se(Yc,yA),order:se(Jc,eA),orderReturn:se("[User] Return Request Details"),orderReturnList:se(Zc,EA),countries:ZT,titles:aA,regions:se(Qc,oA),resetPassword:iA,consignmentTracking:YT,customerCoupons:se(Xc,CA),notificationPreferences:se("[User] Notification Preferences",QT),productInterests:se(eu,gA)}}var RA=new t.InjectionToken("UserReducers"),TA={provide:RA,useFactory:IA};function AA(e){return function(t,r){return r.type===ze&&(t=void 0),e(t,r)}}var UA=[AA],PA=function(){function r(t,r){var n=this;this.actions$=t,this.siteConnector=r,this.loadBillingCountries$=this.actions$.pipe(c.ofType("[User] Load Billing Countries"),i.switchMap((function(){return n.siteConnector.getCountries(e.CountryType.BILLING).pipe(i.map((function(e){return new Fc(e)})),i.catchError((function(e){return o.of(new Mc(an(e)))})))})))}return r.ctorParameters=function(){return[{type:c.Actions},{type:Bl}]},v([c.Effect()],r.prototype,"loadBillingCountries$",void 0),r=v([t.Injectable()],r)}(),LA=function(){function e(e){this.actions$=e,this.clearMiscsData$=this.actions$.pipe(c.ofType(pr,rr),i.map((function(){return new hp})))}return e.ctorParameters=function(){return[{type:c.Actions}]},v([c.Effect()],e.prototype,"clearMiscsData$",void 0),e=v([t.Injectable()],e)}(),_A=function(){function e(e,t){var r=this;this.actions$=e,this.userOrderConnector=t,this.loadConsignmentTracking$=this.actions$.pipe(c.ofType("[User] Load Consignment Tracking"),i.map((function(e){return e.payload})),i.switchMap((function(e){return r.userOrderConnector.getConsignmentTracking(e.orderCode,e.consignmentCode,e.userId).pipe(i.map((function(e){return new jc(e)})),i.catchError((function(e){return o.of(new Nc(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:MT}]},v([c.Effect()],e.prototype,"loadConsignmentTracking$",void 0),e=v([t.Injectable()],e)}(),OA=function(){function r(t,r){var n=this;this.actions$=t,this.siteConnector=r,this.loadDeliveryCountries$=this.actions$.pipe(c.ofType("[User] Load Delivery Countries"),i.switchMap((function(){return n.siteConnector.getCountries(e.CountryType.SHIPPING).pipe(i.map((function(e){return new Bc(e)})),i.catchError((function(e){return o.of(new Gc(an(e)))})))})))}return r.ctorParameters=function(){return[{type:c.Actions},{type:Bl}]},v([c.Effect()],r.prototype,"loadDeliveryCountries$",void 0),r=v([t.Injectable()],r)}(),bA=function(){function r(t,r){var n=this;this.actions$=t,this.userAccountConnector=r,this.requestForgotPasswordEmail$=this.actions$.pipe(c.ofType("[User] Forgot Password Email Request"),i.map((function(e){return e.payload})),i.concatMap((function(t){return n.userAccountConnector.requestForgotPasswordEmail(t).pipe(i.switchMap((function(){return[new Wc,new ch({text:{key:"forgottenPassword.passwordResetEmailSent"},type:e.GlobalMessageType.MSG_TYPE_CONFIRMATION})]})),i.catchError((function(e){return o.of(new Vc(an(e)))})))})))}return r.ctorParameters=function(){return[{type:c.Actions},{type:bT}]},v([c.Effect()],r.prototype,"requestForgotPasswordEmail$",void 0),r=v([t.Injectable()],r)}(),wA=function(){function e(e,t){var r=this;this.actions$=e,this.connector=t,this.loadPreferences$=this.actions$.pipe(c.ofType("[User] Load Notification Preferences"),i.map((function(e){return e.payload})),i.switchMap((function(e){return r.connector.loadAll(e).pipe(i.map((function(e){return new zp(e)})),i.catchError((function(e){return o.of(new qp(an(e)))})))}))),this.updatePreferences$=this.actions$.pipe(c.ofType("[User] Update Notification Preferences"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return r.connector.update(e.userId,e.preferences).pipe(i.map((function(){return new Zp(e.preferences)})),i.catchError((function(e){return o.of(new Kp(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:ks}]},v([c.Effect()],e.prototype,"loadPreferences$",void 0),v([c.Effect()],e.prototype,"updatePreferences$",void 0),e=v([t.Injectable()],e)}(),DA=function(){function r(t,r,n){var s=this;this.actions$=t,this.orderConnector=r,this.globalMessageService=n,this.loadOrderDetails$=this.actions$.pipe(c.ofType("[User] Load Order Details"),i.map((function(e){return e.payload})),i.switchMap((function(e){return s.orderConnector.get(e.userId,e.orderCode).pipe(i.map((function(e){return new nu(e)})),i.catchError((function(e){return o.of(new ru(an(e)))})))}))),this.cancelOrder$=this.actions$.pipe(c.ofType("[User] Cancel Order"),i.map((function(e){return e.payload})),i.switchMap((function(t){return s.orderConnector.cancel(t.userId,t.orderCode,t.cancelRequestInput).pipe(i.map((function(){return new au})),i.catchError((function(t){var r;return null===(r=t.error)||void 0===r||r.errors.forEach((function(t){return s.globalMessageService.add(t.message,e.GlobalMessageType.MSG_TYPE_ERROR)})),o.of(new su(an(t)))})))})))}return r.ctorParameters=function(){return[{type:c.Actions},{type:MT},{type:Sh}]},v([c.Effect()],r.prototype,"loadOrderDetails$",void 0),v([c.Effect()],r.prototype,"cancelOrder$",void 0),r=v([t.Injectable()],r)}(),MA=function(){function e(e,t){var r=this;this.actions$=e,this.orderConnector=t,this.createReturnRequest$=this.actions$.pipe(c.ofType("[User] Create Order Return Request"),i.map((function(e){return e.payload})),i.switchMap((function(e){return r.orderConnector.return(e.userId,e.returnRequestInput).pipe(i.map((function(e){return new fd(e)})),i.catchError((function(e){return o.of(new ld(an(e)))})))}))),this.loadReturnRequest$=this.actions$.pipe(c.ofType("[User] Load Order Return Request details"),i.map((function(e){return e.payload})),i.switchMap((function(e){return r.orderConnector.getReturnRequestDetail(e.userId,e.returnRequestCode).pipe(i.map((function(e){return new vd(e)})),i.catchError((function(e){return o.of(new yd(an(e)))})))}))),this.cancelReturnRequest$=this.actions$.pipe(c.ofType("[User] Cancel Order Return Request"),i.map((function(e){return e.payload})),i.switchMap((function(e){return r.orderConnector.cancelReturnRequest(e.userId,e.returnRequestCode,e.returnRequestModification).pipe(i.map((function(){return new gd})),i.catchError((function(e){return o.of(new Sd(an(e)))})))}))),this.loadReturnRequestList$=this.actions$.pipe(c.ofType("[User] Load User Order Return Request List"),i.map((function(e){return e.payload})),i.switchMap((function(e){return r.orderConnector.getReturnRequestList(e.userId,e.pageSize,e.currentPage,e.sort).pipe(i.map((function(e){return new Id(e)})),i.catchError((function(e){return o.of(new Ed(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:MT}]},v([c.Effect()],e.prototype,"createReturnRequest$",void 0),v([c.Effect()],e.prototype,"loadReturnRequest$",void 0),v([c.Effect()],e.prototype,"cancelReturnRequest$",void 0),v([c.Effect()],e.prototype,"loadReturnRequestList$",void 0),e=v([t.Injectable()],e)}(),FA=function(){function e(e,t){var r=this;this.actions$=e,this.userPaymentMethodConnector=t,this.loadUserPaymentMethods$=this.actions$.pipe(c.ofType("[User] Load User Payment Methods"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return r.userPaymentMethodConnector.getAll(e).pipe(i.map((function(e){return new du(e)})),i.catchError((function(e){return o.of(new pu(an(e)))})))}))),this.setDefaultUserPaymentMethod$=this.actions$.pipe(c.ofType("[User] Set Default User Payment Method"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return r.userPaymentMethodConnector.setDefault(e.userId,e.paymentMethodId).pipe(i.switchMap((function(t){return[new hu(t),new uu(e.userId)]})),i.catchError((function(e){return o.of(new fu(an(e)))})))}))),this.deleteUserPaymentMethod$=this.actions$.pipe(c.ofType("[User] Delete User Payment Method"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return r.userPaymentMethodConnector.delete(e.userId,e.paymentMethodId).pipe(i.switchMap((function(t){return[new Cu(t),new uu(e.userId)]})),i.catchError((function(e){return o.of(new vu(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:DT}]},v([c.Effect()],e.prototype,"loadUserPaymentMethods$",void 0),v([c.Effect()],e.prototype,"setDefaultUserPaymentMethod$",void 0),v([c.Effect()],e.prototype,"deleteUserPaymentMethod$",void 0),e=v([t.Injectable()],e)}(),kA=function(){function e(e,t){var r=this;this.actions$=e,this.siteConnector=t,this.loadRegions$=this.actions$.pipe(c.ofType("[User] Load Regions"),i.map((function(e){return e.payload})),i.switchMap((function(e){return r.siteConnector.getRegions(e).pipe(i.map((function(t){return new mu({entities:t,country:e})})),i.catchError((function(e){return o.of(new gu(an(e)))})))}))),this.resetRegions$=this.actions$.pipe(c.ofType("[User] Clear User Misc Data","[User] Clear Regions"),i.map((function(){return new Z(Qc)})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:Bl}]},v([c.Effect()],e.prototype,"loadRegions$",void 0),v([c.Effect()],e.prototype,"resetRegions$",void 0),e=v([t.Injectable()],e)}(),NA=function(){function r(t,r){var n=this;this.actions$=t,this.userAccountConnector=r,this.resetPassword$=this.actions$.pipe(c.ofType("[User] Reset Password"),i.map((function(e){return e.payload})),i.switchMap((function(t){var r=t.token,s=t.password;return n.userAccountConnector.resetPassword(r,s).pipe(i.switchMap((function(){return[new Tu,new ch({text:{key:"forgottenPassword.passwordResetSuccess"},type:e.GlobalMessageType.MSG_TYPE_CONFIRMATION})]})),i.catchError((function(t){var r,n=[new Ru(an(t))];return(null===(r=null==t?void 0:t.error)||void 0===r?void 0:r.errors)&&t.error.errors.forEach((function(t){t.message&&n.push(new ch({text:{raw:t.message},type:e.GlobalMessageType.MSG_TYPE_ERROR}))})),o.from(n)})))})))}return r.ctorParameters=function(){return[{type:c.Actions},{type:bT}]},v([c.Effect()],r.prototype,"resetPassword$",void 0),r=v([t.Injectable()],r)}(),jA=function(){function e(e,t){var r=this;this.actions$=e,this.userAccountConnector=t,this.loadTitles$=this.actions$.pipe(c.ofType("[User] Load Tiltes"),i.switchMap((function(){return r.userAccountConnector.getTitles().pipe(i.map((function(e){return new Pu(e)})),i.catchError((function(e){return o.of(new Uu(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:bT}]},v([c.Effect()],e.prototype,"loadTitles$",void 0),e=v([t.Injectable()],e)}(),xA=function(){function e(e,t){var r=this;this.actions$=e,this.userAccountConnector=t,this.updateEmail$=this.actions$.pipe(c.ofType("[User] Update Email"),i.map((function(e){return e.payload})),i.concatMap((function(e){return r.userAccountConnector.updateEmail(e.uid,e.password,e.newUid).pipe(i.map((function(){return new _u(e.newUid)})),i.catchError((function(e){return o.of(new Ou(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:bT}]},v([c.Effect()],e.prototype,"updateEmail$",void 0),e=v([t.Injectable()],e)}(),$A=function(){function e(e,t){var r=this;this.actions$=e,this.userAccountConnector=t,this.updatePassword$=this.actions$.pipe(c.ofType("[User] Update Password"),i.map((function(e){return e.payload})),i.concatMap((function(e){return r.userAccountConnector.updatePassword(e.userId,e.oldPassword,e.newPassword).pipe(i.map((function(){return new Mu})),i.catchError((function(e){return o.of(new Du(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:bT}]},v([c.Effect()],e.prototype,"updatePassword$",void 0),e=v([t.Injectable()],e)}(),GA=function(){function r(e,t,r,n){var s=this;this.actions$=e,this.userAddressConnector=t,this.userAddressService=r,this.messageService=n,this.loadUserAddresses$=this.actions$.pipe(c.ofType("[User] Load User Addresses"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.userAddressConnector.getAll(e).pipe(i.map((function(e){return new ju(e)})),i.catchError((function(e){return o.of(new Nu(an(e)))})))}))),this.addUserAddress$=this.actions$.pipe(c.ofType("[User] Add User Address"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.userAddressConnector.add(e.userId,e.address).pipe(i.map((function(e){return new Gu(e)})),i.catchError((function(e){return o.of(new $u(an(e)))})))}))),this.updateUserAddress$=this.actions$.pipe(c.ofType("[User] Update User Address"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.userAddressConnector.update(e.userId,e.addressId,e.address).pipe(i.map((function(t){return e.address&&1===Object.keys(e.address).length&&e.address.defaultAddress?new ku(e.userId):new Vu(t)})),i.catchError((function(e){return o.of(new Hu(an(e)))})))}))),this.deleteUserAddress$=this.actions$.pipe(c.ofType("[User] Delete User Address"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return s.userAddressConnector.delete(e.userId,e.addressId).pipe(i.map((function(e){return new zu(e)})),i.catchError((function(e){return o.of(new qu(an(e)))})))}))),this.showGlobalMessageOnAddSuccess$=this.actions$.pipe(c.ofType("[User] Add User Address Success"),i.tap((function(){s.loadAddresses(),s.showGlobalMessage("addressForm.userAddressAddSuccess")}))),this.showGlobalMessageOnUpdateSuccess$=this.actions$.pipe(c.ofType("[User] Update User Address Success"),i.tap((function(){s.loadAddresses(),s.showGlobalMessage("addressForm.userAddressUpdateSuccess")}))),this.showGlobalMessageOnDeleteSuccess$=this.actions$.pipe(c.ofType("[User] Delete User Address Success"),i.tap((function(){s.loadAddresses(),s.showGlobalMessage("addressForm.userAddressDeleteSuccess")})))}return r.prototype.showGlobalMessage=function(t){this.messageService.add({key:t},e.GlobalMessageType.MSG_TYPE_CONFIRMATION)},r.prototype.loadAddresses=function(){this.userAddressService.loadAddresses()},r.ctorParameters=function(){return[{type:c.Actions},{type:rg},{type:jT},{type:Sh}]},v([c.Effect()],r.prototype,"loadUserAddresses$",void 0),v([c.Effect()],r.prototype,"addUserAddress$",void 0),v([c.Effect()],r.prototype,"updateUserAddress$",void 0),v([c.Effect()],r.prototype,"deleteUserAddress$",void 0),v([c.Effect({dispatch:!1})],r.prototype,"showGlobalMessageOnAddSuccess$",void 0),v([c.Effect({dispatch:!1})],r.prototype,"showGlobalMessageOnUpdateSuccess$",void 0),v([c.Effect({dispatch:!1})],r.prototype,"showGlobalMessageOnDeleteSuccess$",void 0),r=v([t.Injectable()],r)}(),BA=function(){function r(t,r){var n=this;this.actions$=t,this.userConsentConnector=r,this.resetConsents$=this.actions$.pipe(c.ofType(pr),i.map((function(){return new Ju}))),this.getConsents$=this.actions$.pipe(c.ofType("[User] Load User Consents"),i.map((function(e){return e.payload})),i.concatMap((function(e){return n.userConsentConnector.loadConsents(e).pipe(i.map((function(e){return new Zu(e)})),i.catchError((function(e){return o.of(new Ku(an(e)))})))}))),this.giveConsent$=this.actions$.pipe(c.ofType("[User] Give User Consent","[User] Transfer Anonymous Consent"),i.concatMap((function(t){return n.userConsentConnector.giveConsent(t.payload.userId,t.payload.consentTemplateId,t.payload.consentTemplateVersion).pipe(i.map((function(e){return new ep(e)})),i.catchError((function(r){var n=[new Xu(an(r))];return"[User] Transfer Anonymous Consent"===t.type&&409===r.status&&n.push(new ph(e.GlobalMessageType.MSG_TYPE_ERROR)),o.of.apply(void 0,I(n))})))}))),this.withdrawConsent$=this.actions$.pipe(c.ofType("[User] Withdraw User Consent"),i.map((function(e){return e.payload})),i.concatMap((function(e){var t=e.userId,r=e.consentCode;return n.userConsentConnector.withdrawConsent(t,r).pipe(i.map((function(){return new ip})),i.catchError((function(e){return o.of(new op(an(e)))})))})))}return r.ctorParameters=function(){return[{type:c.Actions},{type:wT}]},v([c.Effect()],r.prototype,"resetConsents$",void 0),v([c.Effect()],r.prototype,"getConsents$",void 0),v([c.Effect()],r.prototype,"giveConsent$",void 0),v([c.Effect()],r.prototype,"withdrawConsent$",void 0),r=v([t.Injectable()],r)}(),HA=function(){function e(e,t){var r=this;this.actions$=e,this.userConnector=t,this.loadUserDetails$=this.actions$.pipe(c.ofType("[User] Load User Details"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return r.userConnector.get(e).pipe(i.map((function(e){return new up(e)})),i.catchError((function(e){return o.of(new cp(an(e)))})))}))),this.updateUserDetails$=this.actions$.pipe(c.ofType("[User] Update User Details"),i.map((function(e){return e.payload})),i.concatMap((function(e){return r.userConnector.update(e.username,e.userDetails).pipe(i.map((function(){return new lp(e.userDetails)})),i.catchError((function(e){return o.of(new dp(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:bT}]},v([c.Effect()],e.prototype,"loadUserDetails$",void 0),v([c.Effect()],e.prototype,"updateUserDetails$",void 0),e=v([t.Injectable()],e)}(),VA=function(){function e(e,t){var r=this;this.actions$=e,this.orderConnector=t,this.loadUserOrders$=this.actions$.pipe(c.ofType("[User] Load User Orders"),i.map((function(e){return e.payload})),i.switchMap((function(e){return r.orderConnector.getHistory(e.userId,e.pageSize,e.currentPage,e.sort).pipe(i.map((function(e){return new Cp(e)})),i.catchError((function(e){return o.of(new vp(an(e)))})))}))),this.resetUserOrders$=this.actions$.pipe(c.ofType(pr),i.map((function(){return new Sp})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:MT}]},v([c.Effect()],e.prototype,"loadUserOrders$",void 0),v([c.Effect()],e.prototype,"resetUserOrders$",void 0),e=v([t.Injectable()],e)}(),WA=function(){function e(e,t){var r=this;this.actions$=e,this.userConnector=t,this.registerUser$=this.actions$.pipe(c.ofType("[User] Register User"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return r.userConnector.register(e).pipe(i.map((function(){return new Ep})),i.catchError((function(e){return o.of(new mp(an(e)))})))}))),this.registerGuest$=this.actions$.pipe(c.ofType("[User] Register Guest"),i.map((function(e){return e.payload})),i.mergeMap((function(e){var t=e.guid,n=e.password;return r.userConnector.registerGuest(t,n).pipe(i.switchMap((function(e){return[new Qe({userId:e.uid,password:n}),new Ap]})),i.catchError((function(e){return o.of(new Tp(an(e)))})))}))),this.removeUser$=this.actions$.pipe(c.ofType("[User] Remove User"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return r.userConnector.remove(e).pipe(i.switchMap((function(){return[new Lp,new Ke]})),i.catchError((function(e){return o.of(new Pp(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:bT}]},v([c.Effect()],e.prototype,"registerUser$",void 0),v([c.Effect()],e.prototype,"registerGuest$",void 0),v([c.Effect()],e.prototype,"removeUser$",void 0),e=v([t.Injectable()],e)}(),qA=function(){function e(e,t){var r=this;this.actions$=e,this.customerCouponConnector=t,this.loadCustomerCoupons$=this.actions$.pipe(c.ofType("[User] Load Customer Coupons"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return r.customerCouponConnector.getCustomerCoupons(e.userId,e.pageSize,e.currentPage,e.sort).pipe(i.map((function(e){return new wp(e)})),i.catchError((function(e){return o.of(new bp(an(e)))})))}))),this.subscribeCustomerCoupon$=this.actions$.pipe(c.ofType("[User] Subscribe Customer Notification Coupon"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return r.customerCouponConnector.turnOnNotification(e.userId,e.couponCode).pipe(i.map((function(e){return new kp(e)})),i.catchError((function(e){return o.of(new Fp(an(e)))})))}))),this.unsubscribeCustomerCoupon$=this.actions$.pipe(c.ofType("[User] Unsubscribe Customer Notification Coupon"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return r.customerCouponConnector.turnOffNotification(e.userId,e.couponCode).pipe(i.map((function(){return new $p(e.couponCode)})),i.catchError((function(e){return o.of(new xp(an(e)))})))}))),this.claimCustomerCoupon$=this.actions$.pipe(c.ofType("[User] Claim Customer"),i.map((function(e){return e.payload})),i.mergeMap((function(e){return r.customerCouponConnector.claimCustomerCoupon(e.userId,e.couponCode).pipe(i.map((function(e){return new Vp(e)})),i.catchError((function(e){return o.of(new Hp(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:FT}]},v([c.Effect()],e.prototype,"loadCustomerCoupons$",void 0),v([c.Effect()],e.prototype,"subscribeCustomerCoupon$",void 0),v([c.Effect()],e.prototype,"unsubscribeCustomerCoupon$",void 0),v([c.Effect()],e.prototype,"claimCustomerCoupon$",void 0),e=v([t.Injectable()],e)}(),zA=function(){function e(e,t){var r=this;this.actions$=e,this.userInterestsConnector=t,this.loadProductInteres$=this.actions$.pipe(c.ofType("Load Product Interests"),i.map((function(e){return e.payload})),i.switchMap((function(e){return r.userInterestsConnector.getInterests(e.userId,e.pageSize,e.currentPage,e.sort,e.productCode,e.notificationType).pipe(i.map((function(e){return new td(e)})),i.catchError((function(e){return o.of(new ed(an(e)))})))}))),this.removeProductInterest$=this.actions$.pipe(c.ofType("Remove Product Interest"),i.map((function(e){return e.payload})),i.switchMap((function(e){return r.userInterestsConnector.removeInterest(e.userId,e.item).pipe(i.switchMap((function(t){return[new Xp(e.singleDelete?{userId:e.userId,productCode:e.item.product.code,notificationType:e.item.productInterestEntry[0].interestType}:{userId:e.userId}),new nd(t)]})),i.catchError((function(e){return o.of(new od(an(e)))})))}))),this.addProductInterest$=this.actions$.pipe(c.ofType("Add Product Interest"),i.map((function(e){return e.payload})),i.switchMap((function(e){return r.userInterestsConnector.addInterest(e.userId,e.productCode,e.notificationType).pipe(i.switchMap((function(t){return[new Xp({userId:e.userId,productCode:e.productCode,notificationType:e.notificationType}),new sd(t)]})),i.catchError((function(e){return o.of(new ad(an(e)))})))})))}return e.ctorParameters=function(){return[{type:c.Actions},{type:kT}]},v([c.Effect()],e.prototype,"loadProductInteres$",void 0),v([c.Effect()],e.prototype,"removeProductInterest$",void 0),v([c.Effect()],e.prototype,"addProductInterest$",void 0),e=v([t.Injectable()],e)}(),YA=[LA,OA,kA,jA,HA,GA,FA,WA,VA,DA,PA,NA,bA,xA,$A,BA,_A,qA,wA,zA,MA],KA=function(){function e(){}return e=v([t.NgModule({imports:[r.CommonModule,nn,n.StoreModule.forFeature("user",RA,{metaReducers:UA}),c.EffectsModule.forFeature(YA),a.RouterModule],providers:[TA]})],e)}(),ZA=function(){function e(){}var r;return r=e,e.forRoot=function(){return{ngModule:r}},e=r=v([t.NgModule({imports:[KA]})],e)}();e.ADDRESS_NORMALIZER=xo,e.ADDRESS_SERIALIZER=$o,e.ADDRESS_VALIDATION_NORMALIZER=Go,e.ADD_PRODUCT_INTEREST_PROCESS_ID="addProductInterests",e.ADD_VOUCHER_PROCESS_ID="addVoucher",e.ANONYMOUS_CONSENTS=Nn,e.ANONYMOUS_CONSENTS_HEADER="X-Anonymous-Consents",e.ANONYMOUS_CONSENTS_STORE_FEATURE="anonymous-consents",e.ANONYMOUS_CONSENT_NORMALIZER=Xi,e.ASM_FEATURE="asm",e.AUTH_FEATURE="auth",e.ActiveCartService=Rv,e.AnonymousConsentNormalizer=Ls,e.AnonymousConsentTemplatesAdapter=vs,e.AnonymousConsentTemplatesConnector=xl,e.AnonymousConsentsActions=Zn,e.AnonymousConsentsConfig=mc,e.AnonymousConsentsModule=bf,e.AnonymousConsentsSelectors=po,e.AnonymousConsentsService=lo,e.AsmActions=Vf,e.AsmAdapter=fo,e.AsmAuthService=sy,e.AsmConfig=yo,e.AsmConnector=Mf,e.AsmModule=dy,e.AsmOccModule=go,e.AsmSelectors=iy,e.AsmService=ly,e.AuthActions=at,e.AuthConfig=cn,e.AuthGuard=On,e.AuthModule=Ln,e.AuthRedirectService=_n,e.AuthSelectors=yt,e.AuthService=vt,e.BASE_SITE_CONTEXT_ID="baseSite",e.BadGatewayHandler=mh,e.BadRequestHandler=Ah,e.BaseSiteService=Nr,e.CANCEL_ORDER_PROCESS_ID="cancelOrder",e.CANCEL_RETURN_PROCESS_ID="cancelReturn",e.CARD_TYPE_NORMALIZER=Wo,e.CART_MODIFICATION_NORMALIZER=Lo,e.CART_NORMALIZER=Eo,e.CART_VOUCHER_NORMALIZER=Oo,e.CHECKOUT_DETAILS=kv,e.CHECKOUT_FEATURE="checkout",e.CLAIM_CUSTOMER_COUPON_PROCESS_ID="claimCustomerCoupon",e.CLIENT_TOKEN_DATA="[Auth] Client Token Data",e.CMS_COMPONENT_NORMALIZER=ei,e.CMS_FEATURE="cms",e.CMS_FLEX_COMPONENT_TYPE="CMSFlexComponent",e.CMS_PAGE_NORMALIZER=Qo,e.COMPONENT_ENTITY=GC,e.CONFIG_INITIALIZER=Gs,e.CONSENT_TEMPLATE_NORMALIZER=es,e.CONSIGNMENT_TRACKING_NORMALIZER=is,e.COUNTRY_NORMALIZER=ki,e.CSAGENT_TOKEN_DATA=Df,e.CURRENCY_CONTEXT_ID="currency",e.CURRENCY_NORMALIZER=Fi,e.CUSTOMER_COUPONS=Xc,e.CUSTOMER_COUPON_SEARCH_RESULT_NORMALIZER=Us,e.CUSTOMER_SEARCH_DATA="[asm] Customer search data",e.CUSTOMER_SEARCH_PAGE_NORMALIZER=vo,e.CartActions=Ev,e.CartAdapter=mo,e.CartAddEntryEvent=kC,e.CartAddEntryFailEvent=jC,e.CartAddEntrySuccessEvent=NC,e.CartConfig=xS,e.CartConfigService=BS,e.CartConnector=TC,e.CartEntryAdapter=Io,e.CartEntryConnector=Av,e.CartEventBuilder=xC,e.CartEventModule=$C,e.CartModule=jS,e.CartOccModule=Fo,e.CartVoucherAdapter=To,e.CartVoucherConnector=Pv,e.CartVoucherService=$S,e.CategoryPageMetaResolver=yR,e.CheckoutActions=RC,e.CheckoutAdapter=zo,e.CheckoutConnector=sg,e.CheckoutDeliveryAdapter=Ko,e.CheckoutDeliveryConnector=ag,e.CheckoutDeliveryService=Vg,e.CheckoutModule=dg,e.CheckoutOccModule=Jo,e.CheckoutPageMetaResolver=qS,e.CheckoutPaymentAdapter=Zo,e.CheckoutPaymentConnector=og,e.CheckoutPaymentService=Wg,e.CheckoutSelectors=Bg,e.CheckoutService=Hg,e.CmsActions=eS,e.CmsComponentAdapter=ii,e.CmsComponentConnector=im,e.CmsConfig=ri,e.CmsModule=tE,e.CmsOccModule=si,e.CmsPageAdapter=oi,e.CmsPageConnector=jm,e.CmsPageTitleModule=Yg,e.CmsSelectors=LS,e.CmsService=bS,e.CmsStructureConfig=nm,e.CmsStructureConfigService=om,e.Config=A,e.ConfigChunk=U,e.ConfigInitializerModule=rm,e.ConfigInitializerService=Yl,e.ConfigModule=D,e.ConfigValidatorModule=em,e.ConfigValidatorToken=yc,e.ConfigurableRoutesService=hm,e.ConflictHandler=Uh,e.ConsentService=NT,e.ContentPageMetaResolver=zg,e.ContextServiceMap=Hl,e.ConverterService=Co,e.CurrencyService=Gi,e.CustomerCouponAdapter=gs,e.CustomerCouponConnector=FT,e.CustomerCouponService=$T,e.CustomerSupportAgentTokenInterceptor=uy,e.CxDatePipe=hE,e.DEFAULT_LOCAL_STORAGE_KEY="spartacus-local-data",e.DEFAULT_SCOPE="default",e.DEFAULT_SESSION_STORAGE_KEY="spartacus-session-data",e.DEFAULT_URL_MATCHER=km,e.DELIVERY_MODE_NORMALIZER=jo,e.DefaultConfigChunk=P,e.DynamicAttributeService=oE,e.EMAIL_PATTERN=hy,e.EXTERNAL_CONFIG_TRANSFER_ID=zs,e.EventService=Tc,e.ExternalJsFileLoader=mT,e.ExternalRoutesConfig=Sm,e.ExternalRoutesGuard=gm,e.ExternalRoutesModule=Im,e.ExternalRoutesService=Em,e.FeatureConfigService=pE,e.FeatureDirective=lE,e.FeatureLevelDirective=dE,e.FeaturesConfig=iE,e.FeaturesConfigModule=fE,e.ForbiddenHandler=Ph,e.GIVE_CONSENT_PROCESS_ID="giveConsent",e.GLOBAL_MESSAGE_FEATURE="global-message",e.GatewayTimeoutHandler=Lh,e.GlobService=lm,e.GlobalMessageActions=dh,e.GlobalMessageConfig=ih,e.GlobalMessageModule=zh,e.GlobalMessageSelectors=Ch,e.GlobalMessageService=Sh,e.GoogleMapRendererService=ET,e.HttpErrorHandler=gh,e.I18nConfig=vE,e.I18nModule=TE,e.I18nTestingModule=_E,e.I18nextTranslationService=RE,e.InterceptorUtil=N,e.InternalServerErrorHandler=_h,e.JSP_INCLUDE_CMS_COMPONENT_TYPE="JspIncludeComponent",e.JavaRegExpConverter=$s,e.KYMA_FEATURE="kyma",e.KymaActions=FE,e.KymaConfig=OE,e.KymaModule=rI,e.KymaSelectors=HE,e.KymaService=VE,e.LANGUAGE_CONTEXT_ID="language",e.LANGUAGE_NORMALIZER=Mi,e.LanguageService=Bi,e.LoadingScopesService=gc,e.MEDIA_BASE_URL_META_TAG_NAME="media-backend-base-url",e.MEDIA_BASE_URL_META_TAG_PLACEHOLDER="MEDIA_BACKEND_BASE_URL_VALUE",e.MULTI_CART_DATA=yy,e.MULTI_CART_FEATURE="cart",e.MockDatePipe=LE,e.MockTranslatePipe=UE,e.MultiCartSelectors=_y,e.MultiCartService=Iv,e.MultiCartStatePersistenceService=DS,e.NAVIGATION_DETAIL_ENTITY="[Cms] Navigation Entity",e.NOTIFICATION_PREFERENCES="[User] Notification Preferences",e.NgExpressEngineDecorator=HR,e.NotAuthGuard=bn,e.NotFoundHandler=Oh,e.OCC_BASE_URL_META_TAG_NAME="occ-backend-base-url",e.OCC_BASE_URL_META_TAG_PLACEHOLDER="OCC_BACKEND_BASE_URL_VALUE",e.OCC_CART_ID_CURRENT="current",e.OCC_USER_ID_ANONYMOUS="anonymous",e.OCC_USER_ID_CURRENT="current",e.OCC_USER_ID_GUEST="guest",e.OPEN_ID_TOKEN_DATA=bE,e.ORDER_HISTORY_NORMALIZER=os,e.ORDER_NORMALIZER=ko,e.ORDER_RETURNS_NORMALIZER=cs,e.ORDER_RETURN_REQUEST_INPUT_SERIALIZER=as,e.ORDER_RETURN_REQUEST_NORMALIZER=ss,e.OccAnonymousConsentTemplatesAdapter=ts,e.OccAsmAdapter=So,e.OccCartAdapter=wo,e.OccCartEntryAdapter=_o,e.OccCartNormalizer=Uo,e.OccCartVoucherAdapter=bo,e.OccCheckoutAdapter=No,e.OccCheckoutDeliveryAdapter=Bo,e.OccCheckoutPaymentAdapter=qo,e.OccCmsComponentAdapter=ti,e.OccCmsPageAdapter=Xo,e.OccCmsPageNormalizer=ni,e.OccConfig=xr,e.OccConfigLoaderModule=Zs,e.OccConfigLoaderService=Ys,e.OccCustomerCouponAdapter=Ps,e.OccEndpointsService=$r,e.OccFieldsService=Ai,e.OccLoadedConfigConverter=Ws,e.OccModule=Sc,e.OccOrderNormalizer=Yo,e.OccProductAdapter=Pi,e.OccProductReferencesAdapter=fi,e.OccProductReferencesListNormalizer=pi,e.OccProductReviewsAdapter=vi,e.OccProductSearchAdapter=mi,e.OccProductSearchPageNormalizer=ui,e.OccRequestsOptimizerService=Ui,e.OccReturnRequestNormalizer=_s,e.OccSiteAdapter=ji,e.OccSitesConfigLoader=qs,e.OccStoreFinderAdapter=Ji,e.OccUserAdapter=ys,e.OccUserAddressAdapter=rs,e.OccUserConsentAdapter=ns,e.OccUserInterestsAdapter=Ds,e.OccUserInterestsNormalizer=Os,e.OccUserNotificationPreferenceAdapter=js,e.OccUserOrderAdapter=us,e.OccUserPaymentAdapter=ps,e.OpenIdAuthenticationTokenService=qE,e.OrderReturnRequestService=BT,e.PASSWORD_PATTERN=/^(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[!@#$%^*()_\-+{};:.,]).{6,}$/,e.PAYMENT_DETAILS_NORMALIZER=Ho,e.PAYMENT_DETAILS_SERIALIZER=Vo,e.POINT_OF_SERVICE_NORMALIZER=Yi,e.PROCESS_FEATURE="process",e.PRODUCT_DETAIL_ENTITY="[Product] Detail Entity",e.PRODUCT_FEATURE="product",e.PRODUCT_INTERESTS=eu,e.PRODUCT_INTERESTS_NORMALIZER=ms,e.PRODUCT_NORMALIZER=Ao,e.PRODUCT_REFERENCES_NORMALIZER=li,e.PRODUCT_REVIEW_NORMALIZER=hi,e.PRODUCT_REVIEW_SERIALIZER=yi,e.PRODUCT_SEARCH_PAGE_NORMALIZER=Ci,e.PRODUCT_SUGGESTION_NORMALIZER=Si,e.PageContext=Rm,e.PageMetaResolver=fy,e.PageMetaService=rE,e.PersonalizationConfig=oI,e.PersonalizationContextService=uI,e.PersonalizationModule=cI,e.ProcessModule=yI,e.ProcessSelectors=wc,e.ProductActions=GI,e.ProductAdapter=Li,e.ProductConnector=vI,e.ProductImageNormalizer=ai,e.ProductLoadingService=lR,e.ProductModule=xR,e.ProductNameNormalizer=di,e.ProductOccModule=Di,e.ProductPageMetaResolver=CR,e.ProductReferenceNormalizer=ci,e.ProductReferenceService=uR,e.ProductReferencesAdapter=_i,e.ProductReferencesConnector=CI,e.ProductReviewService=pR,e.ProductReviewsAdapter=Oi,e.ProductReviewsConnector=SI,e.ProductSearchAdapter=bi,e.ProductSearchConnector=gI,e.ProductSearchService=dR,e.ProductSelectors=cR,e.ProductService=fR,e.ProductURLPipe=vm,e.ProtectedRoutesGuard=Am,e.ProtectedRoutesService=Tm,e.REGIONS=Qc,e.REGION_NORMALIZER=Ni,e.REGISTER_USER_PROCESS_ID="registerUser",e.REMOVE_PRODUCT_INTERESTS_PROCESS_ID="removeProductInterests",e.REMOVE_USER_PROCESS_ID="removeUser",e.ROUTING_FEATURE="router",e.RoutingActions=_t,e.RoutingConfig=It,e.RoutingConfigService=Rt,e.RoutingModule=Fm,e.RoutingSelector=xt,e.RoutingService=$t,e.SERVER_REQUEST_ORIGIN=Vs,e.SERVER_REQUEST_URL=Hs,e.SET_DELIVERY_ADDRESS_PROCESS_ID="setDeliveryAddress",e.SET_DELIVERY_MODE_PROCESS_ID="setDeliveryMode",e.SET_PAYMENT_DETAILS_PROCESS_ID="setPaymentDetails",e.SET_SUPPORTED_DELIVERY_MODE_PROCESS_ID="setSupportedDeliveryMode",e.SITE_CONTEXT_FEATURE="siteContext",e.STORE_COUNT_NORMALIZER=Zi,e.STORE_FINDER_DATA=zR,e.STORE_FINDER_FEATURE="stores",e.STORE_FINDER_SEARCH_PAGE_NORMALIZER=Ki,e.SUBSCRIBE_CUSTOMER_COUPON_PROCESS_ID="subscribeCustomerCoupon",e.SearchPageMetaResolver=SR,e.SearchboxService=hR,e.SelectiveCartService=HS,e.SemanticPathService=Tt,e.SiteAdapter=xi,e.SiteConnector=Bl,e.SiteContextActions=vr,e.SiteContextConfig=zt,e.SiteContextInterceptor=Hi,e.SiteContextModule=Sf,e.SiteContextOccModule=Vi,e.SiteContextSelectors=kr,e.SmartEditModule=BR,e.SmartEditService=nE,e.StateConfig=Wr,e.StateEventService=Uc,e.StateModule=nn,e.StatePersistenceService=Pc,e.StateUtils=Be,e.StoreDataService=gT,e.StoreFinderActions=sT,e.StoreFinderAdapter=Wi,e.StoreFinderConfig=qR,e.StoreFinderConnector=zi,e.StoreFinderCoreModule=OT,e.StoreFinderOccModule=Qi,e.StoreFinderSelectors=CT,e.StoreFinderService=ST,e.TITLE_NORMALIZER=hs,e.TOKEN_REVOCATION_HEADER="cx-token-revocation",e.TestConfigModule=Qg,e.TranslatePipe=yE,e.TranslationChunkService=CE,e.TranslationService=WS,e.UNSUBSCRIBE_CUSTOMER_COUPON_PROCESS_ID="unsubscribeCustomerCoupon",e.UPDATE_EMAIL_PROCESS_ID="updateEmail",e.UPDATE_NOTIFICATION_PREFERENCES_PROCESS_ID="updateNotificationPreferences",e.UPDATE_PASSWORD_PROCESS_ID="updatePassword",e.UPDATE_USER_DETAILS_PROCESS_ID="updateUserDetails",e.USER_ADDRESSES=Kc,e.USER_CONSENTS=qc,e.USER_FEATURE="user",e.USER_NORMALIZER=ds,e.USER_ORDERS=Yc,e.USER_ORDER_DETAILS=Jc,e.USER_PAYMENT_METHODS=zc,e.USER_RETURN_REQUESTS=Zc,e.USER_RETURN_REQUEST_DETAILS="[User] Return Request Details",e.USER_SERIALIZER=ls,e.USER_SIGN_UP_SERIALIZER=fs,e.USE_CLIENT_TOKEN=k,e.USE_CUSTOMER_SUPPORT_AGENT_TOKEN="cx-use-csagent-token",e.UnauthorizedErrorHandler=bh,e.UnknownErrorHandler=wh,e.UrlMatcherService=fm,e.UrlModule=Cm,e.UrlPipe=ym,e.UserActions=Ud,e.UserAdapter=As,e.UserAddressAdapter=Cs,e.UserAddressConnector=rg,e.UserAddressService=jT,e.UserConnector=bT,e.UserConsentAdapter=Ss,e.UserConsentConnector=wT,e.UserConsentService=jl,e.UserInterestsAdapter=Es,e.UserInterestsConnector=kT,e.UserInterestsService=VT,e.UserModule=ZA,e.UserNotificationPreferenceService=HT,e.UserOccModule=xs,e.UserOrderAdapter=Rs,e.UserOrderConnector=MT,e.UserOrderService=xT,e.UserPaymentAdapter=Ts,e.UserPaymentConnector=DT,e.UserPaymentService=GT,e.UserService=GS,e.UsersSelectors=Nl,e.WITHDRAW_CONSENT_PROCESS_ID="withdrawConsent",e.WindowRef=St,e.WishListService=VS,e.WithCredentialsInterceptor=hc,e.configInitializerFactory=tm,e.configValidatorFactory=Xg,e.configurationFactory=w,e.contextServiceMapProvider=Wl,e.createFrom=Ac,e.defaultAnonymousConsentsConfig=M,e.defaultCmsModuleConfig=qg,e.defaultOccConfig=ea,e.defaultStateConfig=qr,e.errorHandlers=Fh,e.getServerRequestProviders=VR,e.httpErrorInterceptors=kh,e.initConfigurableRoutes=Mm,e.isFeatureEnabled=uE,e.isFeatureLevel=cE,e.mediaServerConfigFromMetaTagFactory=Qs,e.occConfigValidator=ta,e.occServerConfigFromMetaTagFactory=Js,e.provideConfig=L,e.provideConfigFactory=_,e.provideConfigFromMetaTags=function(){return[_(Js,[u.Meta]),_(Qs,[u.Meta])]},e.provideConfigValidator=vc,e.provideDefaultConfig=O,e.provideDefaultConfigFactory=b,e.resolveApplicable=Dh,e.serviceMapFactory=Vl,e.testestsd="sare",e.validateConfig=Cc,e.withdrawOn=Tv,e.ɵa=NS,e.ɵb=Zg,e.ɵba=nh,e.ɵbb=Zf,e.ɵbc=Jf,e.ɵbd=Qf,e.ɵbe=Xf,e.ɵbf=eh,e.ɵbg=zf,e.ɵbh=Wf,e.ɵbi=qf,e.ɵbj=dn,e.ɵbk=Kf,e.ɵbl=py,e.ɵbm=cy,e.ɵbn=ay,e.ɵbo=wf,e.ɵbp=En,e.ɵbq=Pn,e.ɵbr=vn,e.ɵbs=Cn,e.ɵbt=Sn,e.ɵbu=gn,e.ɵbv=mn,e.ɵbw=fn,e.ɵbx=pn,e.ɵby=ln,e.ɵbz=un,e.ɵc=Jg,e.ɵca=yn,e.ɵcb=F,e.ɵcc=Vr,e.ɵcd=Gr,e.ɵce=Br,e.ɵcf=Bt,e.ɵcg=Gt,e.ɵch=gt,e.ɵci=Ct,e.ɵcj=Hr,e.ɵck=kS,e.ɵcl=bC,e.ɵcm=wC,e.ɵcn=DC,e.ɵco=MC,e.ɵcp=FC,e.ɵcq=AC,e.ɵcr=Uv,e.ɵcs=Lv,e.ɵct=PC,e.ɵcu=UC,e.ɵcv=Ro,e.ɵcw=MS,e.ɵcx=ke,e.ɵcy=he,e.ɵcz=be,e.ɵd=Bs,e.ɵda=LC,e.ɵdb=_C,e.ɵdc=OC,e.ɵdd=wS,e.ɵde=Kl,e.ɵdf=pg,e.ɵdg=XS,e.ɵdh=eg,e.ɵdi=tg,e.ɵdj=ug,e.ɵdk=ng,e.ɵdl=ig,e.ɵdm=cg,e.ɵdn=QS,e.ɵdo=ZS,e.ɵdp=YS,e.ɵdq=Xm,e.ɵdr=eE,e.ɵds=Ym,e.ɵdt=Km,e.ɵdu=Zm,e.ɵdv=Jm,e.ɵdw=Qm,e.ɵdx=$m,e.ɵdy=sm,e.ɵdz=Nm,e.ɵe=Ks,e.ɵea=xm,e.ɵeb=A,e.ɵec=qm,e.ɵed=ye,e.ɵee=zm,e.ɵef=Hm,e.ɵeg=Vm,e.ɵeh=Bh,e.ɵei=xh,e.ɵej=$h,e.ɵek=Gh,e.ɵel=jh,e.ɵem=Wh,e.ɵen=qh,e.ɵeo=Mh,e.ɵep=SE,e.ɵeq=IE,e.ɵer=gE,e.ɵes=PE,e.ɵet=eI,e.ɵeu=tI,e.ɵev=KE,e.ɵew=ZE,e.ɵex=JE,e.ɵey=QE,e.ɵez=XE,e.ɵf=_f,e.ɵfa=YE,e.ɵfb=zE,e.ɵfc=WE,e.ɵfd=ho,e.ɵfe=Po,e.ɵff=Mo,e.ɵfg=wi,e.ɵfh=$i,e.ɵfi=qi,e.ɵfj=bs,e.ɵfk=Is,e.ɵfl=nI,e.ɵfm=aI,e.ɵfn=iI,e.ɵfo=sI,e.ɵfp=hI,e.ɵfq=pI,e.ɵfr=lI,e.ɵfs=fI,e.ɵft=kR,e.ɵfu=NR,e.ɵfv=bR,e.ɵfw=wR,e.ɵfx=DR,e.ɵfy=MR,e.ɵfz=FR,e.ɵg=Of,e.ɵga=RR,e.ɵgb=gR,e.ɵgc=mR,e.ɵgd=ER,e.ɵge=IR,e.ɵgf=KI,e.ɵgg=OR,e.ɵgh=_R,e.ɵgi=PR,e.ɵgj=AR,e.ɵgk=fy,e.ɵgl=vR,e.ɵgm=fy,e.ɵgn=mm,e.ɵgo=_m,e.ɵgp=Om,e.ɵgq=bm,e.ɵgr=wm,e.ɵgs=Dm,e.ɵgt=Pm,e.ɵgu=Um,e.ɵgv=vf,e.ɵgw=Cf,e.ɵgx=ff,e.ɵgy=hf,e.ɵgz=yf,e.ɵh=Xr,e.ɵha=sf,e.ɵhb=rf,e.ɵhc=nf,e.ɵhd=of,e.ɵhe=lf,e.ɵhf=pf,e.ɵhg=cf,e.ɵhh=zl,e.ɵhi=Xl,e.ɵhj=ef,e.ɵhk=Ql,e.ɵhl=Jl,e.ɵhm=tf,e.ɵhn=ql,e.ɵho=GR,e.ɵhp=$R,e.ɵhq=_T,e.ɵhr=RT,e.ɵhs=TT,e.ɵht=AT,e.ɵhu=LT,e.ɵhv=UT,e.ɵhw=PT,e.ɵhx=IT,e.ɵhy=KA,e.ɵhz=IA,e.ɵi=en,e.ɵia=RA,e.ɵib=TA,e.ɵic=AA,e.ɵid=UA,e.ɵie=YA,e.ɵif=PA,e.ɵig=LA,e.ɵih=_A,e.ɵii=OA,e.ɵij=wA,e.ɵik=DA,e.ɵil=MA,e.ɵim=FA,e.ɵin=kA,e.ɵio=NA,e.ɵip=jA,e.ɵiq=GA,e.ɵir=BA,e.ɵis=HA,e.ɵit=VA,e.ɵiu=WA,e.ɵiv=qA,e.ɵiw=zA,e.ɵix=bA,e.ɵiy=xA,e.ɵiz=$A,e.ɵj=rn,e.ɵja=ks,e.ɵjb=fA,e.ɵjc=uA,e.ɵjd=qT,e.ɵje=dA,e.ɵjf=rA,e.ɵjg=yA,e.ɵjh=eA,e.ɵji=EA,e.ɵjj=ZT,e.ɵjk=aA,e.ɵjl=oA,e.ɵjm=iA,e.ɵjn=YT,e.ɵjo=CA,e.ɵjp=QT,e.ɵjq=gA,e.ɵk=zr,e.ɵl=Qr,e.ɵm=Tf,e.ɵn=Af,e.ɵo=Uf,e.ɵp=Pf,e.ɵq=Lf,e.ɵr=Gl,e.ɵs=$l,e.ɵt=se,e.ɵu=Rf,e.ɵv=gf,e.ɵw=mf,e.ɵx=Ic,e.ɵy=Ec,e.ɵz=th,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=spartacus-core.umd.min.js.map